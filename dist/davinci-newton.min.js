/*! davinci-newton 2017-01-14 */
!function(a,b){var c,d,b,e=a.define;!function(a){function e(a,b){return v.call(a,b)}function f(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o=b&&b.split("/"),p=t.map,q=p&&p["*"]||{};if(a){for(a=a.split("/"),g=a.length-1,t.nodeIdCompat&&x.test(a[g])&&(a[g]=a[g].replace(x,"")),"."===a[0].charAt(0)&&o&&(n=o.slice(0,o.length-1),a=n.concat(a)),k=0;k<a.length;k++)if(m=a[k],"."===m)a.splice(k,1),k-=1;else if(".."===m){if(0===k||1===k&&".."===a[2]||".."===a[k-1])continue;k>0&&(a.splice(k-1,2),k-=2)}a=a.join("/")}if((o||q)&&p){for(c=a.split("/"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join("/"),o)for(l=o.length;l>0;l-=1)if(e=p[o.slice(0,l).join("/")],e&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&q&&q[d]&&(i=q[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function g(b,c){return function(){var d=w.call(arguments,0);return"string"!=typeof d[0]&&1===d.length&&d.push(null),o.apply(a,d.concat([b,c]))}}function h(a){return function(b){return f(b,a)}}function i(a){return function(b){r[a]=b}}function j(b){if(e(s,b)){var c=s[b];delete s[b],u[b]=!0,n.apply(a,c)}if(!e(r,b)&&!e(u,b))throw new Error("No "+b);return r[b]}function k(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function l(a){return a?k(a):[]}function m(a){return function(){return t&&t.config&&t.config[a]||{}}}var n,o,p,q,r={},s={},t={},u={},v=Object.prototype.hasOwnProperty,w=[].slice,x=/\.js$/;p=function(a,b){var c,d=k(a),e=d[0],g=b[1];return a=d[1],e&&(e=f(e,g),c=j(e)),e?a=c&&c.normalize?c.normalize(a,h(g)):f(a,g):(a=f(a,g),d=k(a),e=d[0],a=d[1],e&&(c=j(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},q={require:function(a){return g(a)},exports:function(a){var b=r[a];return"undefined"!=typeof b?b:r[a]={}},module:function(a){return{id:a,uri:"",exports:r[a],config:m(a)}}},n=function(b,c,d,f){var h,k,m,n,o,t,v,w=[],x=typeof d;if(f=f||b,t=l(f),"undefined"===x||"function"===x){for(c=!c.length&&d.length?["require","exports","module"]:c,o=0;o<c.length;o+=1)if(n=p(c[o],t),k=n.f,"require"===k)w[o]=q.require(b);else if("exports"===k)w[o]=q.exports(b),v=!0;else if("module"===k)h=w[o]=q.module(b);else if(e(r,k)||e(s,k)||e(u,k))w[o]=j(k);else{if(!n.p)throw new Error(b+" missing "+k);n.p.load(n.n,g(f,!0),i(k),{}),w[o]=r[k]}m=d?d.apply(r[b],w):void 0,b&&(h&&h.exports!==a&&h.exports!==r[b]?r[b]=h.exports:m===a&&v||(r[b]=m))}else b&&(r[b]=d)},c=d=o=function(b,c,d,e,f){if("string"==typeof b)return q[b]?q[b](c):j(p(b,l(c)).f);if(!b.splice){if(t=b,t.deps&&o(t.deps,t.callback),!c)return;c.splice?(b=c,c=d,d=null):b=a}return c=c||function(){},"function"==typeof d&&(d=e,e=f),e?n(a,b,c,d):setTimeout(function(){n(a,b,c,d)},4),o},o.config=function(a){return o(a)},c._defined=r,b=function(a,b,c){if("string"!=typeof a)throw new Error("See almond README: incorrect module build, no module name");b.splice||(c=b,b=[]),e(r,a)||e(s,a)||(s[a]=[a,b,c])},b.amd={jQuery:!0}}(),b("../bower_components/almond/almond",function(){}),b("davinci-newton/config",["require","exports"],function(a,b){"use strict";var c=function(){function a(){this.GITHUB="https://github.com/geometryzen/davinci-newton",this.LAST_MODIFIED="2017-01-08",this.NAMESPACE="NEWTON",this.VERSION="6.0.0"}return a.prototype.log=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];console.log(a)},a.prototype.info=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];console.log(a)},a.prototype.warn=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];console.warn(a)},a.prototype.error=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];console.error(a)},a}(),d=new c;Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-newton/objects/AbstractSimObject",["require","exports"],function(a,b){"use strict";var c=function(){function a(a,b){}return a.prototype.isMassObject=function(){return!1},a}();b.AbstractSimObject=c,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/math/Vector",["require","exports"],function(a,b){"use strict";var c=function(){function a(a,b,c){void 0===c&&(c=0),this.x_=a,this.y_=b,this.z_=c}return a.prototype.getX=function(){return this.x_},a.prototype.getY=function(){return this.y_},a.prototype.add=function(a){},a.prototype.subtract=function(a){},a.prototype.multiply=function(a){},a.prototype.distanceTo=function(a){return 0},a.prototype.immutable=function(){return this},a.prototype.length=function(){return 0},a.prototype.normalize=function(){},a.prototype.rotate=function(a,b){},a}();c.ORIGIN=new c(0,0),b.Vector=c,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-newton/objects/AbstractMassObject",["require","exports","./AbstractSimObject","../math/Vector"],function(a,b,c,d){"use strict";var e=function(a){function b(b,c){var e=a.call(this)||this;return e.loc_world_=d["default"].ORIGIN,e.sinAngle_=0,e.cosAngle_=1,e.velocity_=d["default"].ORIGIN,e.angular_velocity_=0,e.cm_body_=d["default"].ORIGIN,e}return f(b,a),b.prototype.bodyToWorld=function(a){var b=a.getX()-this.cm_body_.getX(),c=a.getY()-this.cm_body_.getY(),e=this.loc_world_.getX()+(b*this.cosAngle_-c*this.sinAngle_),f=this.loc_world_.getY()+(b*this.sinAngle_+c*this.cosAngle_);return new d["default"](e,f)},b.prototype.getVelocity=function(a){if(a){var b=this.rotateBodyToWorld(a.immutable().subtract(this.cm_body_));return new d["default"](this.velocity_.getX()-b.getY()*this.angular_velocity_,this.velocity_.getY()+b.getX()*this.angular_velocity_)}return this.velocity_},b.prototype.rotateBodyToWorld=function(a){return a.immutable().rotate(this.cosAngle_,this.sinAngle_)},b}(c["default"]);b.AbstractMassObject=e,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-newton/objects/PointMass",["require","exports","./AbstractMassObject"],function(a,b,c){"use strict";var d=function(a){function b(b,c){return a.call(this,b,c)||this}return f(b,a),b}(c["default"]);b.PointMass=d,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-newton/util/toName",["require","exports"],function(a,b){"use strict";function c(a){return a.toUpperCase().replace(/[ -]/g,"_")}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/util/validName",["require","exports"],function(a,b){"use strict";function c(a){if(!a.match(/^[A-Z_][A-Z_0-9]*$/))throw new Error("not a valid name: "+a);return a}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/util/AbstractSubject",["require","exports","../util/toName","../util/validName"],function(a,b,c,d){"use strict";var e=function(){function a(a){if(!a)throw new Error("no name");this.name_=d["default"](c["default"](a))}return a.prototype.getName=function(){return this.name_},a}();b.AbstractSubject=e,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-newton/util/contains",["require","exports"],function(a,b){"use strict";function c(a,b){return!0}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/model/EnergyInfo",["require","exports"],function(a,b){"use strict";var c=function(){function a(a,b,c){}return a.prototype.getPotential=function(){return 0},a.prototype.getTranslational=function(){return 0},a.prototype.getRotational=function(){return 0},a.prototype.getTotalEnergy=function(){return 0},a}();b.EnergyInfo=c,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/util/remove",["require","exports"],function(a,b){"use strict";function c(a,b){throw new Error("TODO")}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/core/SimList",["require","exports"],function(a,b){"use strict";var c=function(){function a(){}return a.prototype.add=function(a){throw new Error("TODO")},a.prototype.remove=function(a){throw new Error("TODO")},a.prototype.removeTemporary=function(a){throw new Error("TODO")},a}();b.SimList=c,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/model/ConcreteVariable",["require","exports","../util/toName","../util/validName"],function(a,b,c,d){"use strict";var e=function(){function a(a,b,e){this.varsList_=a,this.localName_=e,this.value_=0,this.name_=d["default"](c["default"](b))}return a.prototype.getValue=function(){return this.value_},a}();b.ConcreteVariable=e,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-newton/checks/isString",["require","exports"],function(a,b){"use strict";function c(a){return"string"==typeof a}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-newton/core/VarsList",["require","exports","../util/AbstractSubject","../model/ConcreteVariable","../checks/isString","../util/toName","../util/validName"],function(a,b,c,d,e,g,h){"use strict";var i="TIME",j=function(a){function b(b,c,f){void 0===f&&(f="VARIABLES");var j=a.call(this,f)||this;if(j.timeIdx_=-1,j.varList_=[],b.length!==c.length)throw new Error("varNames and localNames are different lengths");for(var k=0,l=b.length;k<l;k++){var m=b[k];if(!e["default"](m))throw new Error("variable name "+m+" is not a string i="+k);m=h["default"](g["default"](m)),b[k]=m,m===i&&(j.timeIdx_=k)}for(var k=0,l=b.length;k<l;k++)j.varList_.push(new d["default"](j,b[k],c[k]));return j}return f(b,a),b.prototype.addVariables=function(a,b){throw new Error("TODO")},b.prototype.deleteVariables=function(a,b){throw new Error("TODO")},b.prototype.incrSequence=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];throw new Error("TODO")},b.prototype.getValue=function(a){return this.checkIndex_(a),this.varList_[a].getValue()},b.prototype.getValues=function(){throw new Error("TODO")},b.prototype.setValues=function(a,b){throw void 0===b&&(b=!1),new Error("TODO")},b.prototype.setValue=function(a,b,c){throw void 0===c&&(c=!1),new Error("TODO")},b.prototype.getTime=function(){if(this.timeIdx_<0)throw new Error("no time variable");return this.getValue(this.timeIdx_)},b.prototype.timeIndex=function(){throw new Error("TODO")},b.prototype.checkIndex_=function(a){if(a<0||a>=this.varList_.length)throw new Error("bad variable index="+a+"; numVars="+this.varList_.length)},b}(c["default"]);b.VarsList=j,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=j});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-newton/engine/RigidBodySim",["require","exports","../util/AbstractSubject","../util/contains","../model/EnergyInfo","../util/remove","../core/SimList","../core/VarsList","../math/Vector"],function(a,b,c,d,e,g,h,i,j){"use strict";var k=["time","kinetic enetry","potential energy","total energy"],l=["time","kinetic enetry","potential energy","total energy"],m=function(a){function b(b){void 0===b&&(b="SIM");var c=a.call(this,b)||this;return c.simList_=new h["default"],c.varsList_=new i["default"](k,l,c.getName()+"_VARS"),c.bods_=[],c.forceLaws_=[],c}return f(b,a),b.prototype.addBody=function(a){if(!d["default"](this.bods_,a)){for(var b=[],c=0;c<6;c++)b.push(a.getVarName(c,!1));for(var e=[],c=0;c<6;c++)e.push(a.getVarName(c,!0));var f=this.varsList_.addVariables(b,e);a.setVarsIndex(f),this.bods_.push(a),this.getSimList().add(a)}this.initializeFromBody(a),this.bods_.forEach(function(a){a.eraseOldCopy()})},b.prototype.removeBody=function(a){d["default"](this.bods_,a)&&(this.varsList_.deleteVariables(a.getVarsIndex(),6),g["default"](this.bods_,a),a.setVarsIndex(-1)),this.getSimList().remove(a),this.getVarsList().incrSequence(1,2,3)},b.prototype.addForceLaw=function(a){d["default"](this.forceLaws_,a)||this.forceLaws_.push(a),this.getVarsList().incrSequence(1,2,3)},b.prototype.removeForceLaw=function(a){return a.disconnect(),this.getVarsList().incrSequence(1,2,3),g["default"](this.forceLaws_,a)},b.prototype.moveObjects=function(a){this.bods_.forEach(function(c){var d=c.getVarsIndex();d<0||(c.setPosition(new j["default"](a[d+b.X_],a[d+b.Y_]),a[d+b.W_]),c.setVelocity(new j["default"](a[d+b.VX_],a[d+b.VY_]),a[d+b.VW_]))})},b.prototype.evaluate=function(a,c,d){var e=this;return this.moveObjects(a),this.bods_.forEach(function(d){var e=d.getVarsIndex();if(!(e<0)){var f=d.getMass();if(f===Number.POSITIVE_INFINITY)for(var g=0;g<6;g++)c[e+g]=0;else c[e+b.X_]=a[e+b.VX_],c[e+b.Y_]=a[e+b.VY_],c[e+b.W_]=a[e+b.VW_],c[e+b.VX_]=0,c[e+b.VY_]=0,c[e+b.VW_]=0}}),this.forceLaws_.forEach(function(a){var b=a.calculateForces();b.forEach(function(a){e.applyForce(c,a)})}),c[this.varsList_.timeIndex()]=1,null},b.prototype.applyForce=function(a,c){var e=c.getBody();if(d["default"](this.bods_,e)){var f=e,g=f.getVarsIndex();if(!(g<0)){var h=c.getVector(),i=c.getStartPoint(),j=f.getMass();a[g+b.VX_]+=h.getX()/j,a[g+b.VY_]+=h.getY()/j;var k=i.getX()-f.getPosition().getX(),l=i.getY()-f.getPosition().getY();a[g+b.VW_]+=(k*h.getY()-l*h.getX())/f.momentAboutCM();var m=c.getTorque();0!==m&&(a[g+b.VW_]+=m/f.momentAboutCM()),this.showForces_&&(c.setExpireTime(this.getTime()),this.getSimList().add(c))}}},b.prototype.getTime=function(){return this.varsList_.getTime()},b.prototype.initializeFromBody=function(a){a.eraseOldCopy();var c=a.getVarsIndex();if(c>-1){var d=this.varsList_;d.setValue(b.X_+c,a.getPosition().getX()),d.setValue(b.Y_+c,a.getPosition().getY()),d.setValue(b.W_+c,a.getAngle()),d.setValue(b.VX_+c,a.getVelocity().getX()),d.setValue(b.VY_+c,a.getVelocity().getY()),d.setValue(b.VW_+c,a.getAngularVelocity())}this.getVarsList().incrSequence(1,2,3)},b.prototype.modifyObjects=function(){var a=this.varsList_,b=a.getValues();this.moveObjects(b);var c=this.getEnergyInfo_(b);a.setValue(1,c.getTranslational()+c.getRotational(),!0),a.setValue(2,c.getPotential(),!0),a.setValue(3,c.getTotalEnergy(),!0)},b.prototype.getSimList=function(){return this.simList_},b.prototype.getVarsList=function(){return this.varsList_},b.prototype.getEnergyInfo_=function(a){var b=0,c=0,d=0;return this.bods_.forEach(function(a){isFinite(a.getMass())&&(c+=a.rotationalEnergy(),d+=a.translationalEnergy())}),this.forceLaws_.forEach(function(a){b+=a.getPotentialEnergy()}),new e["default"](b+this.potentialOffset_,d,c)},b.prototype.saveState=function(){this.recentState_=this.varsList_.getValues(),this.bods_.forEach(function(a){a.saveOldCopy()})},b.prototype.restoreState=function(){null!=this.recentState_&&this.varsList_.setValues(this.recentState_,!0),this.bods_.forEach(function(a){a.eraseOldCopy()})},b.prototype.findCollisions=function(a,b,c){throw new Error("TODO: findCollisions")},b}(c["default"]);m.X_=0,m.VX_=1,m.Y_=2,m.VY_=3,m.W_=4,m.VW_=5,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=m}),b("davinci-newton/util/zeroArray",["require","exports"],function(a,b){"use strict";function c(a){for(var b=a.length,c=0;c<b;c++)a[c]=0}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/model/RungeKutta",["require","exports","../util/zeroArray"],function(a,b,c){"use strict";var d=function(){function a(a){this.ode_=a,this.inp_=[],this.k1_=[],this.k2_=[],this.k3_=[],this.k4_=[]}return a.prototype.step=function(a){var b,d,e=this.ode_.getVarsList(),f=e.getValues(),g=f.length;this.inp_.length<g&&(this.inp_=new Array(g),this.k1_=new Array(g),this.k2_=new Array(g),this.k3_=new Array(g),this.k4_=new Array(g));var h=this.inp_,i=this.k1_,j=this.k2_,k=this.k3_,l=this.k4_;for(d=0;d<g;d++)h[d]=f[d];if(c["default"](i),b=this.ode_.evaluate(h,i,0),null!==b)return b;for(d=0;d<g;d++)h[d]=f[d]+i[d]*a/2;if(c["default"](j),b=this.ode_.evaluate(h,j,a/2),null!==b)return b;for(d=0;d<g;d++)h[d]=f[d]+j[d]*a/2;if(c["default"](k),b=this.ode_.evaluate(h,k,a/2),null!==b)return b;for(d=0;d<g;d++)h[d]=f[d]+k[d]*a;if(c["default"](l),b=this.ode_.evaluate(h,l,a),null!==b)return b;for(d=0;d<g;d++)f[d]+=(i[d]+2*j[d]+2*k[d]+l[d])*a/6;return e.setValues(f,!0),null},a}();b.RungeKutta=d,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-newton/strategy/SimpleAdvance",["require","exports"],function(a,b){"use strict";var c=function(){function a(a,b){this.sim_=a,this.odeSolver_=b,this.timeStep_=.025}return a.prototype.advance=function(a,b){this.sim_.getSimList().removeTemporary(this.sim_.getTime());var c=this.odeSolver_.step(a);if(null!=c)throw new Error("error during advance "+c);this.sim_.modifyObjects(),void 0!==b&&b.memorize()},a.prototype.getTime=function(){return this.sim_.getTime()},a.prototype.getTimeStep=function(){return this.timeStep_},a}();b.SimpleAdvance=c,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/util/getSystemTime",["require","exports"],function(a,b){"use strict";function c(){return.001*Date.now()}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-newton/runner/Clock",["require","exports","../util/AbstractSubject","../util/getSystemTime"],function(a,b,c,d){"use strict";var e=function(a){function b(b){void 0===b&&(b="CLOCK");var c=a.call(this,b)||this;return c.clockStart_sys_secs_=d["default"](),c.isRunning_=!1,c.saveTime_secs_=0,c.timeRate_=1,c}return f(b,a),b.prototype.getTime=function(){return this.isRunning_?(d["default"]()-this.clockStart_sys_secs_)*this.timeRate_:this.saveTime_secs_},b.prototype.setTime=function(a){throw new Error("TODO")},b.prototype.setRealTime=function(a){throw new Error("TODO")},b}(c["default"]);b.Clock=e,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-newton/runner/SimRunner",["require","exports","./Clock"],function(a,b,c){"use strict";var d=function(){function a(a,b){this.advanceStrategy_=a,this.clock_=new c["default"],this.timeStep_=a.getTimeStep()}return a.prototype.advanceToTargetTime=function(a,b){for(var c=a.getTime();c<b;){a.advance(this.timeStep_,this);var d=c;if(c=a.getTime(),c-d<=1e-15)throw new Error("SimRunner time did not advance")}},a.prototype.update=function(){var a=this.clock_.getTime(),b=this.advanceStrategy_.getTime();if(a>b+1||a<b-1){var c=b+this.timeStep_;this.clock_.setTime(c),this.clock_.setRealTime(c),a=c}var d=a,e=d-this.timeStep_/10;this.advanceToTargetTime(this.advanceStrategy_,e)},a.prototype.memorize=function(){throw new Error("SimRunner.memorize()")},a}();b.SimRunner=d,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-newton/model/CoordType",["require","exports"],function(a,b){"use strict";var c;!function(a){a[a.BODY=0]="BODY",a[a.WORLD=1]="WORLD"}(c||(c={})),Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/model/Force",["require","exports","./CoordType"],function(a,b,c){"use strict";var d=function(){function a(a,b,c,d,e,f,g){void 0===g&&(g=0),this.body_=b,this.location_=c,this.locationCoordType_=d,this.direction_=e,this.directionCoordType_=f,this.torque_=g}return a.prototype.getBody=function(){return this.body_},a.prototype.getVector=function(){return this.directionCoordType_===c["default"].BODY?this.body_.rotateBodyToWorld(this.direction_):this.direction_},a.prototype.getStartPoint=function(){return this.locationCoordType_===c["default"].BODY?this.body_.bodyToWorld(this.location_):this.location_},a.prototype.getTorque=function(){return this.torque_},a.prototype.isMassObject=function(){return!1},a.prototype.setExpireTime=function(a){throw new Error("TODO")},a}();b.Force=d,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-newton/objects/Spring",["require","exports","../model/CoordType","../model/Force","../math/Vector"],function(a,b,c,d,e){"use strict";var f=function(){function a(a,b,c,d,e,f,g,h){void 0===g&&(g=0),void 0===h&&(h=!1),this.body1_=b,this.attach1_=c,this.body2_=d,this.attach2_=e,this.restLength_=f,this.stiffness_=g,this.compressOnly_=h,this.damping_=0}return a.prototype.getStartPoint=function(){if(null==this.attach1_||null==this.body1_)throw new Error;return this.body1_.bodyToWorld(this.attach1_)},a.prototype.getEndPoint=function(){if(null==this.attach2_||null==this.body2_)throw new Error;var a=this.body2_.bodyToWorld(this.attach2_);if(this.compressOnly_){var b=this.getStartPoint(),c=b.distanceTo(a),d=this.restLength_;if(c<=d)return a;var e=a.subtract(b).normalize();return b.add(e.multiply(d))}return a},a.prototype.calculateForces=function(){var a=this.getStartPoint(),b=this.getEndPoint(),f=b.subtract(a),g=f.length(),h=-this.stiffness_*(g-this.restLength_),i=-h*(f.getX()/g),j=-h*(f.getY()/g),k=new e["default"](i,j,0);if(0!==this.damping_&&(!this.compressOnly_||g<this.restLength_-1e-10)){var l=this.body1_.getVelocity(this.attach1_),m=this.body2_.getVelocity(this.attach2_),n=l.subtract(m).multiply(-this.damping_);k=k.add(n)}return[new d["default"]("spring",this.body1_,a,c["default"].WORLD,k,c["default"].WORLD),new d["default"]("spring",this.body2_,b,c["default"].WORLD,k.multiply(-1),c["default"].WORLD)]},a.prototype.disconnect=function(){},a.prototype.isMassObject=function(){return!1},a.prototype.getPotentialEnergy=function(){return 0},a.prototype.getVector=function(){return this.getEndPoint().subtract(this.getStartPoint())},a}();b.Spring=f,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-newton",["require","exports","./davinci-newton/config","./davinci-newton/objects/PointMass","./davinci-newton/engine/RigidBodySim","./davinci-newton/model/RungeKutta","./davinci-newton/strategy/SimpleAdvance","./davinci-newton/runner/SimRunner","./davinci-newton/objects/Spring"],function(a,b,c,d,e,f,g,h,i){"use strict";var j={get LAST_MODIFIED(){return c["default"].LAST_MODIFIED},get VERSION(){return c["default"].VERSION},get PointMass(){return d["default"]},get RigidBodySim(){return e["default"]},get RungeKutta(){return f["default"]},get SimpleAdvance(){return g["default"]},get SimRunner(){return h["default"]},get Spring(){return i["default"]}};Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=j});var g=d("davinci-newton")["default"];"undefined"!=typeof module&&module.exports?module.exports=g:e?!function(a){a(function(){return g})}(e):a.NEWTON=g}(this);