/*! davinci-newton 2017-01-30 */
!function(a,b){var c,d,b,e=a.define;!function(a){function e(a,b){return v.call(a,b)}function f(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o=b&&b.split("/"),p=t.map,q=p&&p["*"]||{};if(a){for(a=a.split("/"),g=a.length-1,t.nodeIdCompat&&x.test(a[g])&&(a[g]=a[g].replace(x,"")),"."===a[0].charAt(0)&&o&&(n=o.slice(0,o.length-1),a=n.concat(a)),k=0;k<a.length;k++)if(m=a[k],"."===m)a.splice(k,1),k-=1;else if(".."===m){if(0===k||1===k&&".."===a[2]||".."===a[k-1])continue;k>0&&(a.splice(k-1,2),k-=2)}a=a.join("/")}if((o||q)&&p){for(c=a.split("/"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join("/"),o)for(l=o.length;l>0;l-=1)if(e=p[o.slice(0,l).join("/")],e&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&q&&q[d]&&(i=q[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function g(b,c){return function(){var d=w.call(arguments,0);return"string"!=typeof d[0]&&1===d.length&&d.push(null),o.apply(a,d.concat([b,c]))}}function h(a){return function(b){return f(b,a)}}function i(a){return function(b){r[a]=b}}function j(b){if(e(s,b)){var c=s[b];delete s[b],u[b]=!0,n.apply(a,c)}if(!e(r,b)&&!e(u,b))throw new Error("No "+b);return r[b]}function k(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function l(a){return a?k(a):[]}function m(a){return function(){return t&&t.config&&t.config[a]||{}}}var n,o,p,q,r={},s={},t={},u={},v=Object.prototype.hasOwnProperty,w=[].slice,x=/\.js$/;p=function(a,b){var c,d=k(a),e=d[0],g=b[1];return a=d[1],e&&(e=f(e,g),c=j(e)),e?a=c&&c.normalize?c.normalize(a,h(g)):f(a,g):(a=f(a,g),d=k(a),e=d[0],a=d[1],e&&(c=j(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},q={require:function(a){return g(a)},exports:function(a){var b=r[a];return"undefined"!=typeof b?b:r[a]={}},module:function(a){return{id:a,uri:"",exports:r[a],config:m(a)}}},n=function(b,c,d,f){var h,k,m,n,o,t,v,w=[],x=typeof d;if(f=f||b,t=l(f),"undefined"===x||"function"===x){for(c=!c.length&&d.length?["require","exports","module"]:c,o=0;o<c.length;o+=1)if(n=p(c[o],t),k=n.f,"require"===k)w[o]=q.require(b);else if("exports"===k)w[o]=q.exports(b),v=!0;else if("module"===k)h=w[o]=q.module(b);else if(e(r,k)||e(s,k)||e(u,k))w[o]=j(k);else{if(!n.p)throw new Error(b+" missing "+k);n.p.load(n.n,g(f,!0),i(k),{}),w[o]=r[k]}m=d?d.apply(r[b],w):void 0,b&&(h&&h.exports!==a&&h.exports!==r[b]?r[b]=h.exports:m===a&&v||(r[b]=m))}else b&&(r[b]=d)},c=d=o=function(b,c,d,e,f){if("string"==typeof b)return q[b]?q[b](c):j(p(b,l(c)).f);if(!b.splice){if(t=b,t.deps&&o(t.deps,t.callback),!c)return;c.splice?(b=c,c=d,d=null):b=a}return c=c||function(){},"function"==typeof d&&(d=e,e=f),e?n(a,b,c,d):setTimeout(function(){n(a,b,c,d)},4),o},o.config=function(a){return o(a)},c._defined=r,b=function(a,b,c){if("string"!=typeof a)throw new Error("See almond README: incorrect module build, no module name");b.splice||(c=b,b=[]),e(r,a)||e(s,a)||(s[a]=[a,b,c])},b.amd={jQuery:!0}}(),b("../bower_components/almond/almond",function(){}),b("davinci-newton/solvers/AdaptiveStepSolver",["require","exports"],function(a,b){"use strict";var c=function(){function a(a,b,c){this.stepUBound=1,this.stepLBound=1e-5,this.diffEq_=a,this.energySystem_=b,this.odeSolver_=c,this.totSteps_=0,this.secondDiff_=!0,this.tolerance_=1e-6}return a.prototype.step=function(a){this.savedState=this.diffEq_.getState();var b=this.diffEq_.time,c=a,d=0;this.diffEq_.epilog();var e=this.energySystem_.totalEnergy(),f=Number.POSITIVE_INFINITY,g=Number.POSITIVE_INFINITY,h=!0;if(!(a<this.stepLBound)){do{var i=b;if(!h&&(this.diffEq_.setState(this.savedState),this.diffEq_.epilog(),c/=5,c<this.stepLBound))throw new Error("time step "+c+" too small. startEnergy => "+e+" lastEnergyDiff => "+f);for(d=0;i<b+a;){var j=c;i+j>b+a-1e-10&&(j=b+a-i),d++,this.odeSolver_.step(j),this.diffEq_.epilog(),i+=j}var k=this.energySystem_.totalEnergy(),l=Math.abs(e-k);this.secondDiff_?h||(g=Math.abs(l-f)):g=l,f=l,h=!1}while(g>this.tolerance_);this.totSteps_+=d}},Object.defineProperty(a.prototype,"secondDiff",{get:function(){return this.secondDiff_},set:function(a){this.secondDiff_=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tolerance",{get:function(){return this.tolerance_},set:function(a){this.tolerance_=a},enumerable:!0,configurable:!0}),a}();b.AdaptiveStepSolver=c,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/view/AlignH",["require","exports"],function(a,b){"use strict";var c;!function(a){a[a.LEFT=0]="LEFT",a[a.MIDDLE=1]="MIDDLE",a[a.RIGHT=2]="RIGHT",a[a.FULL=3]="FULL"}(c=b.AlignH||(b.AlignH={})),Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/view/AlignV",["require","exports"],function(a,b){"use strict";var c;!function(a){a[a.TOP=0]="TOP",a[a.MIDDLE=1]="MIDDLE",a[a.BOTTOM=2]="BOTTOM",a[a.FULL=3]="FULL"}(c=b.AlignV||(b.AlignV={})),Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/graph/AxisChoice",["require","exports"],function(a,b){"use strict";var c;!function(a){a[a.HORIZONTAL=1]="HORIZONTAL",a[a.VERTICAL=2]="VERTICAL",a[a.BOTH=3]="BOTH"}(c=b.AxisChoice||(b.AxisChoice={})),Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/checks/mustSatisfy",["require","exports"],function(a,b){"use strict";function c(a,b,c,d){if(!b){var e=c?c():"satisfy some condition",f=d?" in "+d():"";throw new Error(a+" must "+e+f+".")}}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/checks/isDefined",["require","exports"],function(a,b){"use strict";function c(a){return"undefined"!=typeof a}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/checks/mustBeDefined",["require","exports","../checks/mustSatisfy","../checks/isDefined"],function(a,b,c,d){"use strict";function e(){return"not be 'undefined'"}function f(a,b,f){return c["default"](a,d["default"](b),e,f),b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-newton/checks/isNumber",["require","exports"],function(a,b){"use strict";function c(a){return"number"==typeof a}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/checks/isInteger",["require","exports","../checks/isNumber"],function(a,b,c){"use strict";function d(a){return c["default"](a)&&a%1===0}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-newton/checks/mustBeInteger",["require","exports","../checks/mustSatisfy","../checks/isInteger"],function(a,b,c,d){"use strict";function e(){return"be an integer"}function f(a,b,f){return c["default"](a,d["default"](b),e,f),b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-newton/checks/isUndefined",["require","exports"],function(a,b){"use strict";function c(a){return"undefined"==typeof a}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/checks/mustBeNumber",["require","exports","../checks/mustSatisfy","../checks/isNumber"],function(a,b,c,d){"use strict";function e(){return"be a `number`"}function f(a,b,f){return c["default"](a,d["default"](b),e,f),b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-newton/checks/expectArg",["require","exports","../checks/isUndefined","../checks/mustBeNumber"],function(a,b,c,d){"use strict";function e(a,b){return c["default"](b)?a:b()}function f(a,b){var f={toSatisfy:function(a,b){if(c["default"](a))throw new Error("condition must be specified");if(c["default"](b))throw new Error("message must be specified");if(!a)throw new Error(b);return f},toBeBoolean:function(c){var d=typeof b;if("boolean"!==d)throw new Error(e("Expecting argument "+a+": "+d+" to be a boolean.",c));return f},toBeDefined:function(){var c=typeof b;if("undefined"===c){var d="Expecting argument "+a+": "+c+" to be defined.";throw new Error(d)}return f},toBeInClosedInterval:function(c,e){var g=b,h=g;if(d["default"]("x",h),h>=c&&h<=e)return f;var i="Expecting argument "+a+" => "+b+" to be in the range ["+c+", "+e+"].";throw new Error(i)},toBeFunction:function(){var c=typeof b;if("function"!==c){var d="Expecting argument "+a+": "+c+" to be a function.";throw new Error(d)}return f},toBeNumber:function(c){var d=typeof b;if("number"!==d)throw new Error(e("Expecting argument "+a+": "+d+" to be a number.",c));return f},toBeObject:function(c){var d=typeof b;if("object"!==d)throw new Error(e("Expecting argument "+a+": "+d+" to be an object.",c));return f},toBeString:function(){var c=typeof b;if("string"!==c){var d="Expecting argument "+a+": "+c+" to be a string.";throw new Error(d)}return f},toBeUndefined:function(){var c=typeof b;if("undefined"!==c){var d="Expecting argument "+a+": "+c+" to be undefined.";throw new Error(d)}return f},toNotBeNull:function(){if(null===b){var c="Expecting argument "+a+" to not be null.";throw new Error(c)}return f},get value(){return b}};return f}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-newton/math/AbstractMatrix",["require","exports","../checks/mustBeDefined","../checks/mustBeInteger","../checks/expectArg"],function(a,b,c,d,e){"use strict";var f=function(){function a(a,b){this._elements=c["default"]("elements",a),this._dimensions=d["default"]("dimensions",b),this._length=b*b,e["default"]("elements",a).toSatisfy(a.length===this._length,"elements must have length "+this._length),this.modified=!1}return Object.defineProperty(a.prototype,"dimensions",{get:function(){return this._dimensions},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"elements",{get:function(){return this._elements},set:function(a){e["default"]("elements",a).toSatisfy(a.length===this._length,"elements length must be "+this._length),this._elements=a},enumerable:!0,configurable:!0}),a.prototype.copy=function(a){for(var b=this.dimensions,c=0;c<b;c++)for(var d=0;d<b;d++){var e=a.getElement(c,d);this.setElement(c,d,e)}return this},a.prototype.getElement=function(a,b){return this.elements[a+b*this._dimensions]},a.prototype.isOne=function(){for(var a=0;a<this._dimensions;a++)for(var b=0;b<this._dimensions;b++){var c=this.getElement(a,b);if(a===b){if(1!==c)return!1}else if(0!==c)return!1}return!0},a.prototype.setElement=function(a,b,c){this.elements[a+b*this._dimensions]=c},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-newton/math/det3x3",["require","exports"],function(a,b){"use strict";function c(a){var b=a[0],c=a[3],d=a[6],e=a[1],f=a[4],g=a[7],h=a[2],i=a[5],j=a[8];return b*f*j+c*g*h+d*e*i-b*g*i-c*e*j-d*f*h}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/math/inv3x3",["require","exports","../math/det3x3"],function(a,b,c){"use strict";function d(a,b){var d=c["default"](a),e=a[0],f=a[3],g=a[6],h=a[1],i=a[4],j=a[7],k=a[2],l=a[5],m=a[8],n=i*m-j*l,o=g*l-f*m,p=f*j-g*i,q=j*k-h*m,r=e*m-g*k,s=g*h-e*j,t=h*l-i*k,u=f*k-e*l,v=e*i-f*h,w=1/d;b[0]=n*w,b[3]=o*w,b[6]=p*w,b[1]=q*w,b[4]=r*w,b[7]=s*w,b[2]=t*w,b[5]=u*w,b[8]=v*w}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-newton/math/mul3x3",["require","exports"],function(a,b){"use strict";function c(a,b,c){var d=a[0],e=a[3],f=a[6],g=a[1],h=a[4],i=a[7],j=a[2],k=a[5],l=a[8],m=b[0],n=b[3],o=b[6],p=b[1],q=b[4],r=b[7],s=b[2],t=b[5],u=b[8];return c[0]=d*m+e*p+f*s,c[3]=d*n+e*q+f*t,c[6]=d*o+e*r+f*u,c[1]=g*m+h*p+i*s,c[4]=g*n+h*q+i*t,c[7]=g*o+h*r+i*u,c[2]=j*m+k*p+l*s,c[5]=j*n+k*q+l*t,c[8]=j*o+k*r+l*u,c}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-newton/math/Matrix3",["require","exports","./AbstractMatrix","./inv3x3","./mul3x3"],function(a,b,c,d,e){"use strict";var g=function(a){function b(b){return void 0===b&&(b=new Float32Array([1,0,0,0,1,0,0,0,1])),a.call(this,b,3)||this}return f(b,a),b.prototype.inv=function(){return d["default"](this.elements,this.elements),this},b.prototype.mul=function(a){return this.mul2(this,a)},b.prototype.rmul=function(a){return e["default"](a.elements,this.elements,this.elements),this},b.prototype.mul2=function(a,b){return e["default"](a.elements,b.elements,this.elements),this},b.prototype.rotation=function(a){var b=-a.yz,c=-a.zx,d=-a.xy,e=a.a,f=b+b,g=c+c,h=d+d,i=b*f,j=b*g,k=b*h,l=c*g,m=c*h,n=d*h,o=e*f,p=e*g,q=e*h;return this.set(1-l-n,j-q,k+p,j+q,1-i-n,m-o,k-p,m+o,1-i-l),this},b.prototype.row=function(a){var b=this.elements;return[b[0+a],b[3+a],b[6+a]]},b.prototype.set=function(a,b,c,d,e,f,g,h,i){var j=this.elements;return j[0]=a,j[3]=b,j[6]=c,j[1]=d,j[4]=e,j[7]=f,j[2]=g,j[5]=h,j[8]=i,this},b.prototype.toString=function(a){for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b,c){return b.toString(a)}).join(" "));return b.join("\n")},b.prototype.transpose=function(){var a,b=this.elements;return a=b[1],b[1]=b[3],b[3]=a,a=b[2],b[2]=b[6],b[6]=a,a=b[5],b[5]=b[7],b[7]=a,this},b.one=function(){return new b(new Float32Array([1,0,0,0,1,0,0,0,1]))},b.zero=function(){return new b(new Float32Array([0,0,0,0,0,0,0,0,0]))},b}(c["default"]);b.Matrix3=g,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=g}),b("davinci-newton/objects/AbstractSimObject",["require","exports"],function(a,b){"use strict";var c=function(){function a(){this.expireTime_=Number.POSITIVE_INFINITY}return Object.defineProperty(a.prototype,"expireTime",{get:function(){return this.expireTime_},set:function(a){this.expireTime_=a},enumerable:!0,configurable:!0}),a}();b.AbstractSimObject=c,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/math/wedge3",["require","exports"],function(a,b){"use strict";function c(a,b){return a.y*b.z-a.z*b.y}function d(a,b){return a.z*b.x-a.x*b.z}function e(a,b){return a.x*b.y-a.y*b.x}b.wedgeYZ=c,b.wedgeZX=d,b.wedgeXY=e}),b("davinci-newton/math/Bivector3",["require","exports","./wedge3"],function(a,b,c){"use strict";var d=function(){function a(){this.yz=0,this.zx=0,this.xy=0}return a.prototype.applyMatrix=function(a){var b=this.yz,c=this.zx,d=this.xy,e=a.getElement(0,0),f=a.getElement(0,1),g=a.getElement(0,2),h=a.getElement(1,0),i=a.getElement(1,1),j=a.getElement(1,2),k=a.getElement(2,0),l=a.getElement(2,1),m=a.getElement(2,2);return this.yz=e*b+f*c+g*d,this.zx=h*b+i*c+j*d,this.xy=k*b+l*c+m*d,this},a.prototype.copy=function(a){return this.yz=a.yz,this.zx=a.zx,this.xy=a.xy,this},a.prototype.isZero=function(){return 0===this.xy&&0===this.yz&&0===this.zx},a.prototype.rev=function(){return this.yz=-this.yz,this.zx=-this.zx,this.xy=-this.xy,this},a.prototype.rotate=function(a){if(1===a.a&&0===a.xy&&0===a.yz&&0===a.zx)return this;var b=this.yz,c=this.zx,d=this.xy,e=a.xy,f=a.yz,g=a.zx,h=a.a,i=h*b-g*d+e*c,j=h*c-e*b+f*d,k=h*d-f*c+g*b,l=f*b+g*c+e*d;return this.yz=i*h+l*f+j*e-k*g,this.zx=j*h+l*g+k*f-i*e,this.xy=k*h+l*e+i*g-j*f,this},a.prototype.scp=function(a){return this.xy*a.xy+this.yz*a.yz+this.zx*a.zx},a.prototype.toString=function(a){return"new Bivector3(yz: "+this.yz.toString(a)+", zx: "+this.zx.toString(a)+", xy: "+this.xy.toString(a)+")"},a.prototype.wedge=function(a,b){return this.yz=c.wedgeYZ(a,b),this.zx=c.wedgeZX(a,b),this.xy=c.wedgeXY(a,b),this},a.prototype.write=function(a){return a.xy=this.xy,a.yz=this.yz,a.zx=this.zx,this},a.prototype.zero=function(){return this.yz=0,this.zx=0,this.xy=0,this},a}();b.Bivector3=d,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-newton/math/Mat3",["require","exports","./Matrix3"],function(a,b,c){"use strict";var d=function(){function a(a){this.data=c["default"].one();var b=a.getElement(0,0),d=a.getElement(0,1),e=a.getElement(0,2),f=a.getElement(1,0),g=a.getElement(1,1),h=a.getElement(1,2),i=a.getElement(2,0),j=a.getElement(2,1),k=a.getElement(2,2);this.data.set(b,d,e,f,g,h,i,j,k)}return Object.defineProperty(a.prototype,"dimensions",{get:function(){return 3},enumerable:!0,configurable:!0}),a.prototype.getElement=function(a,b){return this.data.getElement(a,b)},a.prototype.row=function(a){return this.data.row(a)},a.prototype.toString=function(a){return this.data.toString(a)},a}();b.Mat3=d,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-newton/checks/isFunction",["require","exports"],function(a,b){"use strict";function c(a){return"function"==typeof a}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/checks/mustBeFunction",["require","exports","../checks/mustSatisfy","../checks/isFunction"],function(a,b,c,d){"use strict";function e(){return"be a function"}function f(a,b,f){return c["default"](a,d["default"](b),e,f),b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-newton/checks/isNull",["require","exports"],function(a,b){"use strict";function c(a){return null===a}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/checks/isObject",["require","exports"],function(a,b){"use strict";function c(a){return"object"==typeof a}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/checks/mustBeNonNullObject",["require","exports","../checks/mustSatisfy","../checks/isNull","../checks/isObject"],function(a,b,c,d,e){"use strict";function f(){return"be a non-null `object`"}function g(a,b,g){return c["default"](a,e["default"](b)&&!d["default"](b),f,g),b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=g}),b("davinci-newton/math/rotate3",["require","exports"],function(a,b){"use strict";function c(a,b,c,d){var e=d.xy,f=d.yz,g=d.zx,h=d.a,i=h*a-g*c+e*b,j=h*b-e*a+f*c,k=h*c-f*b+g*a,l=f*a+g*b+e*c;return i*h+l*f+j*e-k*g}function d(a,b,c,d){var e=d.xy,f=d.yz,g=d.zx,h=d.a,i=h*a-g*c+e*b,j=h*b-e*a+f*c,k=h*c-f*b+g*a,l=f*a+g*b+e*c;return j*h+l*g+k*f-i*e}function e(a,b,c,d){var e=d.xy,f=d.yz,g=d.zx,h=d.a,i=h*a-g*c+e*b,j=h*b-e*a+f*c,k=h*c-f*b+g*a,l=f*a+g*b+e*c;return k*h+l*e+i*g-j*f}b.rotateX=c,b.rotateY=d,b.rotateZ=e}),b("davinci-newton/math/Spinor3",["require","exports"],function(a,b){"use strict";var c=function(){function a(a,b,c,d){void 0===a&&(a=1),void 0===b&&(b=0),void 0===c&&(c=0),void 0===d&&(d=0),this.a=a,this.xy=b,this.yz=c,this.zx=d}return a.prototype.copy=function(a){return this.a=a.a,this.xy=a.xy,this.yz=a.yz,this.zx=a.zx,this},a.prototype.divByScalar=function(a){return 1!==a&&(this.a/=a,this.xy/=a,this.yz/=a,this.zx/=a),this},a.prototype.isOne=function(){return 1===this.a&&0===this.xy&&0===this.yz&&0===this.zx},a.prototype.magnitude=function(){return Math.sqrt(this.quaditude())},a.prototype.normalize=function(){var a=this.magnitude();return 1!==a?this.divByScalar(a):this},a.prototype.one=function(){return this.a=1,this.xy=0,this.yz=0,this.zx=0,this},a.prototype.quaditude=function(){var a=this.a,b=this.yz,c=this.zx,d=this.xy;return a*a+b*b+c*c+d*d},a.prototype.rev=function(){return this.xy=-this.xy,this.yz=-this.yz,this.zx=-this.zx,this},a}();b.Spinor3=c,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/util/veryDifferent",["require","exports"],function(a,b){"use strict";function c(a,b,c,d){if(void 0===c&&(c=1e-14),void 0===d&&(d=1),c<=0)throw new Error("epsilon ("+c+") must be positive.");if(d<=0)throw new Error("magnitude ("+d+") must be positive.");var e=Math.max(Math.abs(a),Math.abs(b)),f=e>d?e:d;return Math.abs(a-b)>f*c}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/math/Vec3",["require","exports","../util/veryDifferent"],function(a,b,c){"use strict";var d=function(){function a(a,b,c){this.x_=a,this.y_=b,this.z_=c}return Object.defineProperty(a.prototype,"x",{get:function(){return this.x_},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this.y_},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"z",{get:function(){return this.z_},enumerable:!0,configurable:!0}),a.prototype.add=function(b){return new a(this.x+b.x,this.y+b.y,this.z+b.z)},a.prototype.divByScalar=function(b){return new a(this.x/b,this.y/b,this.z/b)},a.prototype.lco=function(b){var c=b.yz,d=b.zx,e=b.xy,f=this.x,g=this.y,h=this.z,i=d*h-e*g,j=e*f-c*h,k=c*g-d*f;return new a(i,j,k)},a.prototype.subtract=function(b){return new a(this.x-b.x,this.y-b.y,this.z-b.z)},a.prototype.mulByScalar=function(b){return new a(b*this.x,b*this.y,b*this.z)},a.prototype.cross=function(b){var c=this.x,d=this.y,e=this.z,f=b.x,g=b.y,h=b.z,i=d*h-e*g,j=e*f-c*h,k=c*g-d*f;return new a(i,j,k)},a.prototype.distanceTo=function(a){var b=this.x-a.x,c=this.y-a.y,d=this.z-a.z;return Math.sqrt(b*b+c*c+d*d)},a.prototype.dot=function(a){return this.x*a.x+this.y*a.y+this.z*a.z},a.prototype.magnitude=function(){var a=this.x,b=this.y,c=this.z;return Math.sqrt(a*a+b*b+c*c)},a.prototype.nearEqual=function(a,b){return!c["default"](this.x_,a.x,b)&&(!c["default"](this.y_,a.y,b)&&!c["default"](this.z_,a.z,b))},a.prototype.direction=function(){var a=this.magnitude();if(1!==a){if(0===a)throw new Error("direction is undefined.");return this.divByScalar(a)}return this},a.prototype.rotate=function(b){if(1===b.a&&0===b.xy&&0===b.yz&&0===b.zx)return this;var c=this.x,d=this.y,e=this.z,f=b.xy,g=b.yz,h=b.zx,i=b.a,j=i*c-h*e+f*d,k=i*d-f*c+g*e,l=i*e-g*d+h*c,m=g*c+h*d+f*e,n=j*i+m*g+k*f-l*h,o=k*i+m*h+l*g-j*f,p=l*i+m*f+j*h-k*g;return new a(n,o,p)},a.prototype.toString=function(a){return"new Vec3("+this.x_.toString(a)+", "+this.y_.toString(a)+", "+this.z_.toString(a)+")"},a.prototype.__add__=function(b){return new a(this.x+b.x,this.y+b.y,this.z+b.z)},a.prototype.__sub__=function(b){return new a(this.x-b.x,this.y-b.y,this.z-b.z)},a.prototype.__mul__=function(b){return new a(this.x*b,this.y*b,this.z*b)},a.prototype.__div__=function(b){return new a(this.x/b,this.y/b,this.z/b)},a.fromVector=function(b){return new a(b.x,b.y,b.z)},a}();d.ORIGIN=new d(0,0,0),b.Vec3=d,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-newton/math/Vector3",["require","exports"],function(a,b){"use strict";var c=function(){function a(a,b,c){void 0===a&&(a=0),void 0===b&&(b=0),void 0===c&&(c=0),this.x=a,this.y=b,this.z=c}return a.prototype.add=function(a){return this.x+=a.x,this.y+=a.y,this.z+=a.z,this},a.prototype.applyMatrix=function(a){var b=this.x,c=this.y,d=this.z,e=a.getElement(0,0),f=a.getElement(0,1),g=a.getElement(0,2),h=a.getElement(1,0),i=a.getElement(1,1),j=a.getElement(1,2),k=a.getElement(2,0),l=a.getElement(2,1),m=a.getElement(2,2);return this.x=e*b+f*c+g*d,this.y=h*b+i*c+j*d,this.z=k*b+l*c+m*d,this},a.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this},a.prototype.direction=function(){var a=this.magnitude();return this.divByScalar(a)},a.prototype.distanceTo=function(a){return Math.sqrt(this.quadranceTo(a))},a.prototype.divByScalar=function(a){return this.x/=a,this.y/=a,this.z/=a,this},a.prototype.dot=function(a){return this.x*a.x+this.y*a.y+this.z*a.z},a.prototype.dual=function(a){return this.x=-a.yz,this.y=-a.zx,this.z=-a.xy,this},a.prototype.isZero=function(){return 0===this.x&&0===this.y&&0===this.z},a.prototype.magnitude=function(){return Math.sqrt(this.quaditude())},a.prototype.mulByScalar=function(a){return this.x*=a,this.y*=a,this.z*=a,this},a.prototype.neg=function(){return this.mulByScalar(-1)},a.prototype.write=function(a){return a.x=this.x,a.y=this.y,a.z=this.z,this},a.prototype.zero=function(){return this.x=0,this.y=0,this.z=0,this},a.prototype.quaditude=function(){var a=this.x,b=this.y,c=this.z;return a*a+b*b+c*c},a.prototype.quadranceTo=function(a){var b=this.x-a.x,c=this.y-a.y,d=this.z-a.z;return b*b+c*c+d*d},a.prototype.rotate=function(a){if(1===a.a&&0===a.xy&&0===a.yz&&0===a.zx)return this;var b=this.x,c=this.y,d=this.z,e=a.xy,f=a.yz,g=a.zx,h=a.a,i=h*b-g*d+e*c,j=h*c-e*b+f*d,k=h*d-f*c+g*b,l=f*b+g*c+e*d;return this.x=i*h+l*f+j*e-k*g,this.y=j*h+l*g+k*f-i*e,this.z=k*h+l*e+i*g-j*f,this},a.prototype.subtract=function(a){return this.x-=a.x,this.y-=a.y,this.z-=a.z,this},a.prototype.toString=function(a){return"new Vector3("+this.x.toString(a)+", "+this.y.toString(a)+", "+this.z.toString(a)+")"},a.prototype.__add__=function(b){return new a(this.x+b.x,this.y+b.y,this.z+b.z)},a.prototype.__div__=function(b){return new a(this.x/b,this.y/b,this.z/b)},a.prototype.__mul__=function(b){return new a(this.x*b,this.y*b,this.z*b)},a.prototype.__neg__=function(){return new a((-this.x),(-this.y),(-this.z))},a.dual=function(b){return(new a).dual(b)},a}();b.Vector3=c,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-newton/engine3D/RigidBody3",["require","exports","../objects/AbstractSimObject","../math/Bivector3","../math/Mat3","../math/Matrix3","../checks/mustBeFunction","../checks/mustBeNonNullObject","../checks/mustBeNumber","../math/rotate3","../math/Spinor3","../math/Vec3","../math/Vector3"],function(a,b,c,d,e,g,h,i,j,k,l,m,n){"use strict";var o=function(a){function b(){var b=a.call(this)||this;return b.M_=1,b.inertiaTensorInverse_=new e["default"](g["default"].one()),b.varsIndex_=-1,b.position_=new n["default"],b.attitude_=new l["default"],b.linearMomentum_=new n["default"],b.angularMomentum_=new d["default"],b.Ω=new d["default"],b.centerOfMassLocal_=m["default"].ORIGIN,b}return f(b,a),Object.defineProperty(b.prototype,"centerOfMassLocal",{get:function(){return this.centerOfMassLocal_},set:function(a){this.centerOfMassLocal_=m["default"].fromVector(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"M",{get:function(){return this.M_},set:function(a){this.M_!==a&&(this.M_=j["default"]("M",a),this.updateInertiaTensor())},enumerable:!0,configurable:!0}),b.prototype.updateAngularVelocity=function(){this.Ω.copy(this.L),this.Ω.rotate(this.R.rev()),this.Ω.applyMatrix(this.Iinv),this.Ω.rotate(this.R.rev())},b.prototype.updateInertiaTensor=function(){},Object.defineProperty(b.prototype,"I",{get:function(){var a=g["default"].zero().copy(this.inertiaTensorInverse_).inv();return new e["default"](a)},set:function(a){var b=g["default"].zero().copy(a).inv();this.inertiaTensorInverse_=new e["default"](b)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"Iinv",{get:function(){return this.inertiaTensorInverse_},set:function(a){i["default"]("Iinv",a),j["default"]("dimensions",a.dimensions),h["default"]("getElement",a.getElement),this.inertiaTensorInverse_=new e["default"](a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"X",{get:function(){return this.position_},set:function(a){this.position_.copy(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"R",{get:function(){return this.attitude_},set:function(a){this.attitude_.copy(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"P",{get:function(){return this.linearMomentum_},set:function(a){this.linearMomentum_.copy(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"L",{get:function(){return this.angularMomentum_},set:function(a){this.angularMomentum_.copy(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"expireTime",{get:function(){return Number.POSITIVE_INFINITY},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"varsIndex",{get:function(){return this.varsIndex_},set:function(a){this.varsIndex_=a},enumerable:!0,configurable:!0}),b.prototype.rotationalEnergy=function(){return.5*this.Ω.scp(this.L)},b.prototype.translationalEnergy=function(){return.5*this.P.quaditude()/this.M},b.prototype.localPointToWorldPoint=function(a,b){var c=this.centerOfMassLocal_,d=a.x-c.x,e=a.y-c.y,f=a.z-c.z,g=this.position_,h=this.attitude_;b.x=k.rotateX(d,e,f,h)+g.x,b.y=k.rotateY(d,e,f,h)+g.y,b.z=k.rotateZ(d,e,f,h)+g.z},b}(c["default"]);b.RigidBody3=o,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=o});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-newton/engine3D/Block3",["require","exports","../math/Matrix3","./RigidBody3"],function(a,b,c,d){"use strict";var e=function(a){function b(b,c,d){void 0===b&&(b=1),void 0===c&&(c=1),void 0===d&&(d=1);var e=a.call(this)||this;return e.width_=1,e.height_=1,e.depth_=1,e.width_=b,e.height_=c,e.depth_=d,e.updateInertiaTensor(),e}return f(b,a),Object.defineProperty(b.prototype,"width",{get:function(){return this.width_},set:function(a){this.width!==a&&(this.width_=a,this.updateInertiaTensor())},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"height",{get:function(){return this.height_},set:function(a){this.height!==a&&(this.height_=a,this.updateInertiaTensor())},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"depth",{get:function(){return this.depth_},set:function(a){this.depth!==a&&(this.depth_=a,this.updateInertiaTensor())},enumerable:!0,configurable:!0}),b.prototype.updateAngularVelocity=function(){var a=this.width_,b=this.height_,c=this.depth_,d=a*a,e=b*b,f=c*c;this.Ω.yz=12/this.M*this.L.yz/(e+f),this.Ω.zx=12/this.M*this.L.zx/(d+f),this.Ω.xy=12/this.M*this.L.xy/(d+e)},b.prototype.updateInertiaTensor=function(){var a=this.width_,b=this.height_,d=this.depth_,e=a*a,f=b*b,g=d*d,h=this.M/12,i=c["default"].zero();i.setElement(0,0,h*(f+g)),i.setElement(1,1,h*(g+e)),i.setElement(2,2,h*(e+f)),this.I=i},b}(d["default"]);b.Block3=e,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-newton/util/UtilityCore",["require","exports"],function(a,b){"use strict";var c=function(){function a(){}return a}();c.MAX_INTEGER=Math.pow(2,53),Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/util/CircularList",["require","exports","./UtilityCore"],function(a,b,c){"use strict";var d="exceeded max int",e=function(){function a(a){if(void 0===a&&(a=3e3),this.size_=0,this.cycles_=0,this.nextPtr_=0,this.lastPtr_=-1,this.capacity_=a||3e3,this.capacity_<2)throw new Error;this.size_=0,this.cycles_=0,this.nextPtr_=0,this.lastPtr_=-1,this.values_=new Array(this.capacity_),this.lastValue_=null}return a.prototype.causeMaxIntError=function(){this.size_=this.capacity_,this.cycles_=Math.floor(c["default"].MAX_INTEGER/this.capacity_)-1},a.prototype.getEndIndex=function(){if(0===this.size_)return-1;var a;return a=0===this.nextPtr_?this.pointerToIndex(this.size_-1):this.pointerToIndex(this.nextPtr_-1)},a.prototype.getEndValue=function(){var a=this.getEndIndex();return a===-1?null:this.values_[this.indexToPointer_(a)]},a.prototype.getIterator=function(a){return new f(this,a)},a.prototype.getSize=function(){return this.size_},a.prototype.getStartIndex=function(){var a=this.size_<this.capacity_?0:this.pointerToIndex(this.nextPtr_);return a},a.prototype.getValue=function(a){var b=this.indexToPointer_(a);return this.values_[b]},a.prototype.indexToPointer_=function(a){if(this.size_<this.capacity_)return a;var b=a%this.capacity_,c=a-(this.cycles_-(b<this.nextPtr_?0:1))*this.capacity_;return c},a.prototype.pointerToIndex=function(a){if(this.size_<this.capacity_)return a;var b=a+(this.cycles_-(a<this.nextPtr_?0:1))*this.capacity_;if(b>=c["default"].MAX_INTEGER)throw new Error(d);return b},a.prototype.reset=function(){this.nextPtr_=this.size_=0,this.cycles_=0,this.lastPtr_=-1},a.prototype.store=function(a){return this.lastPtr_=this.nextPtr_,this.values_[this.nextPtr_]=a,this.nextPtr_++,this.size_<this.capacity_&&this.size_++,this.nextPtr_>=this.capacity_&&(this.cycles_++,this.nextPtr_=0),this.pointerToIndex(this.lastPtr_)},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e;var f=function(){function a(a,b){if(this.cList=a,this.first_=a.size_>0,this.cList_=a,(void 0===b||b<0)&&(b=a.getStartIndex()),a.size_>0&&(b<a.getStartIndex()||b>a.getEndIndex()))throw new Error("out of range startIndex="+b);this.index_=b,this.pointer_=a.indexToPointer_(b)}return a.prototype.getIndex=function(){if(0===this.cList_.size_)throw new Error("no data");
return this.index_},a.prototype.getValue=function(){if(0===this.cList_.size_)throw new Error("no data");return this.cList_.values_[this.pointer_]},a.prototype.hasNext=function(){return this.first_||this.index_<this.cList_.getEndIndex()},a.prototype.hasPrevious=function(){return this.first_||this.index_>this.cList_.getStartIndex()},a.prototype.nextValue=function(){if(0===this.cList_.size_)throw new Error("no data");if(this.first_)this.first_=!1;else{if(this.index_+1>this.cList_.getEndIndex())throw new Error("cannot iterate past end of list");this.index_++,this.pointer_=this.cList_.indexToPointer_(this.index_)}return this.cList_.values_[this.pointer_]},a.prototype.previousValue=function(){if(0===this.cList_.size_)throw new Error("no data");if(this.first_)this.first_=!1;else{if(this.index_-1<this.cList_.getStartIndex())throw new Error("cannot iterate prior to start of list");this.index_--,this.pointer_=this.cList_.indexToPointer_(this.index_)}return this.cList_.values_[this.pointer_]},a}()}),b("davinci-newton/config",["require","exports"],function(a,b){"use strict";var c=function(){function a(){this.GITHUB="https://github.com/geometryzen/davinci-newton",this.LAST_MODIFIED="2017-01-30",this.NAMESPACE="NEWTON",this.VERSION="0.0.20"}return a.prototype.log=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];console.log(a)},a.prototype.info=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];console.log(a)},a.prototype.warn=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];console.warn(a)},a.prototype.error=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];console.error(a)},a}(),d=new c;Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-newton/model/CoordType",["require","exports"],function(a,b){"use strict";var c;!function(a){a[a.BODY=0]="BODY",a[a.WORLD=1]="WORLD"}(c=b.CoordType||(b.CoordType={})),Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-newton/engine3D/Force3",["require","exports","../objects/AbstractSimObject","../math/Bivector3","../model/CoordType","../math/Vec3","../math/Vector3"],function(a,b,c,d,e,g,h){"use strict";var i=function(a){function b(b){var c=a.call(this)||this;return c.body_=b,c.location=new h["default"],c.vector=new h["default"],c.position_=new h["default"],c.force_=new h["default"],c.torque_=new d["default"],c}return f(b,a),b.prototype.getBody=function(){return this.body_},b.prototype.computeForce=function(a){switch(this.vectorCoordType){case e["default"].BODY:this.force_.copy(this.vector),this.force_.rotate(this.body_.R),this.force_.write(a);break;case e["default"].WORLD:this.force_.copy(this.vector),this.force_.write(a)}},Object.defineProperty(b.prototype,"F",{get:function(){return this.computeForce(this.force_),g["default"].fromVector(this.force_)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"x",{get:function(){return this.computePosition(this.position_),g["default"].fromVector(this.position_)},enumerable:!0,configurable:!0}),b.prototype.computePosition=function(a){switch(this.locationCoordType){case e["default"].BODY:this.position_.copy(this.location),this.position_.rotate(this.body_.R),this.position_.add(this.body_.X),this.position_.write(a);break;case e["default"].WORLD:this.position_.copy(this.location),this.position_.write(a)}},b.prototype.computeTorque=function(a){this.computePosition(this.position_),this.computeForce(this.force_),this.torque_.wedge(this.position_.subtract(this.body_.X),this.force_),this.torque_.write(a)},b}(c["default"]);b.Force3=i,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=i});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-newton/engine3D/ConstantForceLaw3",["require","exports","../objects/AbstractSimObject","../model/CoordType","./Force3"],function(a,b,c,d,e){"use strict";var g=function(a){function b(b,c,f){void 0===f&&(f=d["default"].WORLD);var g=a.call(this)||this;return g.body_=b,g.forces=[],g.force_=new e["default"](g.body_),g.force_.locationCoordType=d["default"].BODY,g.force_.vector.copy(c),g.force_.vectorCoordType=f,g.forces=[g.force_],g}return f(b,a),Object.defineProperty(b.prototype,"location",{get:function(){return this.force_.location},set:function(a){this.force_.location.copy(a)},enumerable:!0,configurable:!0}),b.prototype.updateForces=function(){return this.forces},b.prototype.disconnect=function(){},b.prototype.potentialEnergy=function(){return 0},b}(c["default"]);b.ConstantForceLaw3=g,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=g});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-newton/engine3D/Cylinder3",["require","exports","../math/Matrix3","./RigidBody3"],function(a,b,c,d){"use strict";var e=function(a){function b(b,c){void 0===b&&(b=1),void 0===c&&(c=1);var d=a.call(this)||this;return d.radius_=1,d.height_=1,d.radius_=b,d.height_=c,d.updateInertiaTensor(),d}return f(b,a),Object.defineProperty(b.prototype,"radius",{get:function(){return this.radius_},set:function(a){this.radius!==a&&(this.radius_=a,this.updateInertiaTensor())},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"height",{get:function(){return this.height_},set:function(a){this.height!==a&&(this.height_=a,this.updateInertiaTensor())},enumerable:!0,configurable:!0}),b.prototype.updateInertiaTensor=function(){var a=this.radius_,b=this.height_,d=a*a,e=b*b,f=this.M*(3*d+e)/12,g=this.M*d/2,h=c["default"].zero();h.setElement(0,0,f),h.setElement(1,1,g),h.setElement(2,2,f),this.I=h},b}(d["default"]);b.Cylinder3=e,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-newton/strategy/DefaultAdvanceStrategy",["require","exports"],function(a,b){"use strict";var c=function(){function a(a,b){this.sim_=a,this.odeSolver_=b,this.timeStep_=.025}return a.prototype.advance=function(a,b){this.sim_.prolog(),this.odeSolver_.step(a),this.sim_.epilog(),void 0!==b&&b.memorize()},a.prototype.getTime=function(){return this.sim_.time},a.prototype.getTimeStep=function(){return this.timeStep_},a}();b.DefaultAdvanceStrategy=c,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/util/contains",["require","exports"],function(a,b){"use strict";function c(a,b){for(var c=a.length,d=0;d<c;d++)if(a[d]===b)return!0;return!1}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/view/DrawingMode",["require","exports"],function(a,b){"use strict";var c;!function(a){a[a.DOTS=0]="DOTS",a[a.LINES=1]="LINES"}(c=b.DrawingMode||(b.DrawingMode={})),Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/util/clone",["require","exports"],function(a,b){"use strict";function c(a){for(var b=a.length,c=new Array(b),d=0;d<b;d++)c[d]=a[d];return c}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/util/findIndex",["require","exports"],function(a,b){"use strict";function c(a,b){for(var c=a.length,d=0;d<c;d++){var e=a[d];if(b(e,d))return d}return-1}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/util/find",["require","exports","./findIndex"],function(a,b,c){"use strict";function d(a,b){var d=c["default"](a,b);return d<0?null:a[d]}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-newton/util/toName",["require","exports"],function(a,b){"use strict";function c(a){return a.toUpperCase().replace(/[ -]/g,"_")}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/util/validName",["require","exports"],function(a,b){"use strict";function c(a){if(!a.match(/^[A-Z_][A-Z_0-9]*$/))throw new Error("not a valid name: "+a);return a}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/util/ParameterBoolean",["require","exports","./toName","./validName"],function(a,b,c,d){"use strict";var e=function(){function a(a,b,e,f,g,h){this.subject_=a,this.name_=d["default"](c["default"](b)),this.getter_=e,this.setter_=f,this.isComputed_=!1,this.choices_=[],this.values_=[]}return Object.defineProperty(a.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),a.prototype.getSubject=function(){return this.subject_},a.prototype.nameEquals=function(a){return this.name_===c["default"](a)},a.prototype.setComputed=function(a){this.isComputed_=a},a}();b.ParameterBoolean=e,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-newton/util/ParameterNumber",["require","exports","./toName","./validName"],function(a,b,c,d){"use strict";var e=function(){function a(a,b,e,f,g,h){this.subject_=a,this.name_=d["default"](c["default"](b)),this.getter_=e,this.setter_=f,this.isComputed_=!1,this.signifDigits_=3,this.decimalPlaces_=-1,this.lowerLimit_=0,this.upperLimit_=Number.POSITIVE_INFINITY,this.choices_=[],this.values_=[]}return Object.defineProperty(a.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),a.prototype.getSubject=function(){return this.subject_},a.prototype.getValue=function(){return this.getter_()},a.prototype.nameEquals=function(a){return this.name_===c["default"](a)},a.prototype.setComputed=function(a){this.isComputed_=a},a.prototype.setLowerLimit=function(a){if(a>this.getValue()||a>this.upperLimit_)throw new Error("out of range");return this.lowerLimit_=a,this},a.prototype.setSignifDigits=function(a){return this.signifDigits_=a,this},a}();b.ParameterNumber=e,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-newton/util/ParameterString",["require","exports","./toName","./validName"],function(a,b,c,d){"use strict";var e=function(){function a(a,b,e,f,g,h){this.subject_=a,this.name_=d["default"](c["default"](b)),this.getter_=e,this.setter_=f,this.isComputed_=!1,this.suggestedLength_=20,this.maxLength_=Number.POSITIVE_INFINITY,this.choices_=[],this.values_=[],this.inputFunction_=null}return Object.defineProperty(a.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),a.prototype.getSubject=function(){return this.subject_},a.prototype.getValue=function(){return this.getter_()},a.prototype.nameEquals=function(a){return this.name_===c["default"](a)},a.prototype.setComputed=function(a){this.isComputed_=a},a}();b.ParameterString=e,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-newton/util/removeAt",["require","exports"],function(a,b){"use strict";function c(a,b){return 1===Array.prototype.splice.call(a,b,1).length}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/util/remove",["require","exports","./removeAt"],function(a,b,c){"use strict";function d(a,b){var d,e=a.indexOf(b);return(d=e>=0)&&c["default"](a,e),d}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-newton/util/AbstractSubject",["require","exports","./clone","./contains","./find","./ParameterBoolean","./ParameterNumber","./ParameterString","./remove","../util/toName"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=function(){function a(){this.doBroadcast_=!0,this.observers_=[],this.paramList_=[]}return a.prototype.addObserver=function(a){d["default"](this.observers_,a)||this.observers_.push(a)},a.prototype.removeObserver=function(a){i["default"](this.observers_,a)},a.prototype.addParameter=function(a){var b=a.name,c=this.getParam(b);if(null!=c)throw new Error("parameter "+b+" already exists: "+c);this.paramList_.push(a)},a.prototype.getParam=function(a){return a=j["default"](a),e["default"](this.paramList_,function(b){return b.name===a})},a.prototype.getParameter=function(a){var b=this.getParam(a);if(null!=b)return b;throw new Error("Parameter not found "+a)},a.prototype.getParameterBoolean=function(a){var b=this.getParam(a);if(b instanceof f["default"])return b;throw new Error("ParameterBoolean not found "+a)},a.prototype.getParameterNumber=function(a){var b=this.getParam(a);if(b instanceof g["default"])return b;throw new Error("ParameterNumber not found "+a)},a.prototype.getParameterString=function(a){var b=this.getParam(a);if(b instanceof h["default"])return b;throw new Error("ParameterString not found "+a)},a.prototype.getParameters=function(){return c["default"](this.paramList_)},a.prototype.broadcast=function(a){if(this.doBroadcast_)for(var b=this.observers_.length,c=0;c<b;c++)this.observers_[c].observe(a)},a.prototype.broadcastParameter=function(a){var b=this.getParam(a);if(null===b)throw new Error("unknown Parameter "+a);this.broadcast(b)},a.prototype.getBroadcast=function(){return this.doBroadcast_},a.prototype.getObservers=function(){return c["default"](this.observers_)},a}();b.AbstractSubject=k,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=k}),b("davinci-newton/util/GenericEvent",["require","exports","./toName","./validName"],function(a,b,c,d){"use strict";var e=function(){function a(a,b,e){this.subject_=a,this.value_=e,this.name_=d["default"](c["default"](b))}return Object.defineProperty(a.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),a.prototype.getSubject=function(){return this.subject_},a.prototype.nameEquals=function(a){return this.name_===c["default"](a)},a}();b.GenericEvent=e,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-newton/graph/GraphPoint",["require","exports"],function(a,b){"use strict";var c=function(){function a(a,b,c,d){this.x=a,this.y=b,this.seqX=c,this.seqY=d}return a.prototype.equals=function(a){return this.x===a.x&&this.y===a.y&&this.seqX===a.seqX&&this.seqY===a.seqY},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/graph/GraphStyle",["require","exports"],function(a,b){"use strict";var c=function(){function a(a,b,c,d){this.index_=a,this.drawingMode=b,this.color_=c,this.lineWidth=d}return a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/checks/isLE",["require","exports"],function(a,b){"use strict";function c(a,b){return a<=b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/checks/mustBeLE",["require","exports","../checks/mustSatisfy","../checks/isLE"],function(a,b,c,d){"use strict";function e(a,b,e,f){return c["default"](a,d["default"](b,e),function(){return"be less than or equal to "+e},f),b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-newton/checks/mustBeObject",["require","exports","../checks/mustSatisfy","../checks/isObject"],function(a,b,c,d){"use strict";function e(){return"be an `object`"}function f(a,b,f){return c["default"](a,d["default"](b),e,f),b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-newton/graph/GraphLine",["require","exports","../util/AbstractSubject","../util/CircularList","../view/DrawingMode","../util/GenericEvent","./GraphPoint","./GraphStyle","../checks/isObject","../checks/mustBeLE","../checks/mustBeObject","../util/ParameterNumber","../util/ParameterString","../util/veryDifferent"],function(a,b,c,d,e,g,h,i,j,k,l,m,n,o){"use strict";var p=function(a){function b(c,f){var g=a.call(this)||this;return g.lineWidth_=1,g.hotspotColor_="red",g.styles_=[],g.varsList_=c,c.addObserver(g),g.xVar_=-1,g.yVar_=-1,g.xVarParam_=new m["default"](g,b.PARAM_NAME_X_VARIABLE,function(){return g.hCoordIndex},function(a){return g.hCoordIndex=a}),g.xVarParam_.setLowerLimit(-1),g.addParameter(g.xVarParam_),g.yVarParam_=new m["default"](g,b.PARAM_NAME_Y_VARIABLE,function(){return g.vCoordIndex},function(a){return g.vCoordIndex=a}),g.yVarParam_.setLowerLimit(-1),g.addParameter(g.yVarParam_),g.dataPoints_=new d["default"](f||1e5),g.drawColor_="lime",g.drawingMode_=e["default"].LINES,g.addGraphStyle(),g.xTransform=function(a,b){return a},g.yTransform=function(a,b){return b},g.addParameter(new m["default"](g,b.PARAM_NAME_LINE_WIDTH,function(){return g.lineWidth},function(a){return g.lineWidth=a})),g.addParameter(new m["default"](g,b.PARAM_NAME_DRAWING_MODE,function(){return g.drawingMode},function(a){return g.drawingMode=a})),g.addParameter(new n["default"](g,b.PARAM_NAME_COLOR,function(){return g.color},function(a){return g.color=a})),g}return f(b,a),b.prototype.addGraphStyle=function(){this.styles_.push(new i["default"](this.dataPoints_.getEndIndex()+1,this.drawingMode_,this.drawColor_,this.lineWidth_))},b.isDuckType=function(a){return a instanceof b||j["default"](a)&&void 0!==a.setXVariable&&void 0!==a.setYVariable&&void 0!==a.color&&void 0!==a.lineWidth&&void 0!==a.setAxes&&void 0!==a.varsList&&void 0!==a.reset&&void 0!==a.getGraphStyle},Object.defineProperty(b.prototype,"color",{get:function(){return this.drawColor_},set:function(a){this.drawColor_!==a&&(this.drawColor_=a,this.addGraphStyle(),this.broadcastParameter(b.PARAM_NAME_COLOR))},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"drawingMode",{get:function(){return this.drawingMode_},set:function(a){this.drawingMode_!==a&&(this.drawingMode_=a,this.addGraphStyle()),this.broadcastParameter(b.PARAM_NAME_DRAWING_MODE)},enumerable:!0,configurable:!0}),b.prototype.getGraphPoints=function(){return this.dataPoints_},b.prototype.getGraphStyle=function(a){var b=this.styles_;if(0===b.length)throw new Error("graph styles list is empty");for(var c=b[0],d=1,e=b.length;d<e;d++){var f=b[d];if(k["default"]("",c.index_,f.index_),f.index_>a)break;c=f}return l["default"]("last",c),c},Object.defineProperty(b.prototype,"hotspotColor",{get:function(){return this.hotspotColor_},set:function(a){this.hotspotColor_=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"lineWidth",{get:function(){return this.lineWidth_},set:function(a){o["default"](a,this.lineWidth_)&&(this.lineWidth_=a,this.addGraphStyle(),this.broadcastParameter(b.PARAM_NAME_LINE_WIDTH))},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"varsList",{get:function(){return this.varsList_},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"hCoordIndex",{get:function(){return this.xVar_},set:function(a){this.checkVarIndex(b.PARAM_NAME_X_VARIABLE,a),a!==this.xVar_&&(this.xVar_=a,this.reset(),this.broadcastParameter(b.PARAM_NAME_X_VARIABLE))},enumerable:!0,configurable:!0}),b.prototype.getXVarName=function(){return this.xVar_>-1?this.varsList_.getName(this.xVar_):""},Object.defineProperty(b.prototype,"vCoordIndex",{get:function(){return this.yVar_},set:function(a){this.checkVarIndex(b.PARAM_NAME_Y_VARIABLE,a),a!==this.yVar_&&(this.yVar_=a,this.reset(),this.broadcastParameter(b.PARAM_NAME_Y_VARIABLE))},enumerable:!0,configurable:!0}),b.prototype.getYVarName=function(){return this.yVar_>-1?this.varsList_.getName(this.yVar_):""},b.prototype.memorize=function(){if(this.xVar_>-1&&this.yVar_>-1){var a=this.varsList_,b=a.getValue(this.xVar_),c=a.getValue(this.yVar_),d=this.xTransform(b,c),e=this.yTransform(b,c),f=a.getSequence(this.xVar_),g=a.getSequence(this.xVar_),i=new h["default"](d,e,f,g),j=this.dataPoints_.getEndValue();null!=j&&j.equals(i)||this.dataPoints_.store(i)}},b.prototype.observe=function(a){},b.prototype.reset=function(){this.dataPoints_.reset(),this.resetStyle(),this.broadcast(new g["default"](this,b.RESET))},b.prototype.resetStyle=function(){this.styles_=[],this.addGraphStyle()},b.prototype.checkVarIndex=function(a,b){if(b<-1||b>this.varsList_.numVariables()-1)throw new Error(a+" bad index: "+b)},b}(c["default"]);p.PARAM_NAME_X_VARIABLE="X variable",p.PARAM_NAME_Y_VARIABLE="Y variable",p.PARAM_NAME_LINE_WIDTH="line width",p.PARAM_NAME_COLOR="color",p.PARAM_NAME_DRAWING_MODE="drawing mode",p.RESET="RESET",Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=p}),b("davinci-newton/util/repeat",["require","exports"],function(a,b){"use strict";function c(a,b){for(var c=[],d=0;d<b;d++)c[d]=a;return c}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/view/ScreenRect",["require","exports","../checks/isFunction","../util/veryDifferent"],function(a,b,c,d){"use strict";var e=function(){function a(a,b,c,d){if(c<0||d<0)throw new Error;this.left_=a,this.top_=b,this.width_=c,this.height_=d}return a.clone=function(b){return new a(b.left_,b.top_,b.width_,b.height_)},a.prototype.equals=function(a){return this.left_===a.left_&&this.top_===a.top_&&this.width_===a.width_&&this.height_===a.height_},a.isDuckType=function(b){return b instanceof a||void 0!==b.getLeft&&void 0!==b.getTop&&void 0!==b.getWidth&&void 0!==b.getHeight&&void 0!==b.isEmpty&&void 0!==b.equals&&void 0!==b.nearEqual},a.prototype.getCenterX=function(){return this.left_+this.width_/2},a.prototype.getCenterY=function(){return this.top_+this.height_/2},a.prototype.getHeight=function(){return this.height_},a.prototype.getLeft=function(){return this.left_},a.prototype.getTop=function(){return this.top_},a.prototype.getWidth=function(){return this.width_},a.prototype.isEmpty=function(a){return void 0===a&&(a=1e-14),this.width_<a||this.height_<a},a.prototype.makeOval=function(a){var b=this.width_/2,d=this.height_/2;if(c["default"](a.ellipse))a.beginPath(),a.moveTo(this.left_+this.width_,this.top_+d),a.ellipse(this.left_+b,this.top_+d,b,d,0,0,2*Math.PI,!1);else{var e=Math.min(b,d);a.beginPath(),a.moveTo(this.left_+this.width_,this.top_),a.arc(this.left_+b,this.top_+d,e,0,2*Math.PI,!1),a.closePath()}},a.prototype.makeRect=function(a){a.rect(this.left_,this.top_,this.width_,this.height_)},a.prototype.nearEqual=function(a,b){return!d["default"](this.left_,a.left_,b)&&(!d["default"](this.top_,a.top_,b)&&(!d["default"](this.width_,a.width_,b)&&!d["default"](this.height_,a.height_,b)))},a}();e.EMPTY_RECT=new e(0,0,0,0),Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-newton/graph/DisplayGraph",["require","exports","../util/contains","../view/DrawingMode","./GraphLine","../checks/isDefined","../checks/mustBeNonNullObject","../util/removeAt","../util/repeat","../view/ScreenRect"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=function(){function a(){this.graphLines_=[],this.memDraw_=i["default"](-1,this.graphLines_.length),this.offScreen_=null,this.lastMap_=null,this.screenRect_=j["default"].EMPTY_RECT,this.needRedraw_=!1,this.useBuffer_=!1,this.zIndex=0}return a.prototype.draw=function(a,b){if(!this.screenRect_.isEmpty()){var c=this.graphLines_,d=c.length;a.save(),null!=this.lastMap_&&this.lastMap_===b||(this.lastMap_=b,this.needRedraw_=!0);for(var e=0;e<d;e++)if(this.memDraw_[e]>c[e].getGraphPoints().getEndIndex()){this.reset();break}if(this.useBuffer_){var f=this.screenRect_.getWidth(),g=this.screenRect_.getHeight();null==this.offScreen_&&(this.offScreen_=document.createElement("canvas"),this.offScreen_.width=f,this.offScreen_.height=g,this.needRedraw_=!0);var h=this.offScreen_.getContext("2d");this.needRedraw_?(h.clearRect(0,0,f,g),this.fullDraw(h,b),this.needRedraw_=!1):this.incrementalDraw(h,b),a.drawImage(this.offScreen_,0,0,f,g)}else this.needRedraw_=!0,this.needRedraw_?(this.fullDraw(a,b),this.needRedraw_=!1):this.incrementalDraw(a,b);for(var e=0;e<d;e++)this.drawHotSpot(a,b,c[e]);a.restore()}},a.prototype.drawHotSpot=function(a,b,c){var d=c.getGraphPoints().getEndValue();if(null!=d){var e=b.simToScreenX(d.x),f=b.simToScreenY(d.y),g=c.hotspotColor;g&&(a.fillStyle=g,a.fillRect(e-2,f-2,5,5))}},a.prototype.drawPoints=function(a,b,c,e){var f=b.screenToSimRect(this.screenRect_),h=e.getGraphPoints().getIterator(c);if(!h.hasNext())return c;var i=h.nextValue();g["default"]("first",i);var j=e.getGraphStyle(h.getIndex());if(j.drawingMode===d["default"].DOTS){var k=b.simToScreenX(i.x),l=b.simToScreenY(i.y),m=j.lineWidth;a.fillStyle=j.color_,a.fillRect(k,l,m,m)}for(;h.hasNext();){var n=i;if(i=h.nextValue(),g["default"]("next",i),i.x!==n.x||i.y!==n.y){var o=e.getGraphStyle(h.getIndex()),p=i.seqX===n.seqX&&i.seqY===n.seqY;if(o.drawingMode!==d["default"].DOTS&&p){if(!f.maybeVisible(n,i))continue;var q=b.simToScreenX(n.x),r=b.simToScreenY(n.y),s=b.simToScreenX(i.x),t=b.simToScreenY(i.y);a.strokeStyle=o.color_,a.lineWidth=o.lineWidth,a.beginPath(),a.moveTo(q,r),a.lineTo(s,t),a.stroke()}else{if(!f.contains(i))continue;var k=b.simToScreenX(i.x),l=b.simToScreenY(i.y),m=o.lineWidth;a.fillStyle=o.color_,a.fillRect(k,l,m,m)}}}return h.getIndex()},a.prototype.fullDraw=function(a,b){this.memDraw_=i["default"](-1,this.graphLines_.length),this.incrementalDraw(a,b)},a.prototype.getZIndex=function(){return this.zIndex},a.prototype.setZIndex=function(a){this.zIndex=f["default"](a)?a:0},a.prototype.incrementalDraw=function(a,b){for(var c=0,d=this.graphLines_.length;c<d;c++)this.memDraw_[c]=this.drawPoints(a,b,this.memDraw_[c],this.graphLines_[c])},a.prototype.isDragable=function(){return!1},a.prototype.addGraphLine=function(a){if(!e["default"].isDuckType(a))throw new Error("not a GraphLine "+a);c["default"](this.graphLines_,a)||(this.graphLines_.push(a),this.memDraw_.push(-1))},a.prototype.removeGraphLine=function(a){if(!e["default"].isDuckType(a))throw new Error("not a GraphLine "+a);var b=this.graphLines_.indexOf(a);h["default"](this.graphLines_,b),h["default"](this.memDraw_,b),this.needRedraw_=!0},a.prototype.setDragable=function(a){},a.prototype.setScreenRect=function(a){this.screenRect_=a,this.offScreen_=null},a.prototype.setUseBuffer=function(a){this.useBuffer_=a,this.useBuffer_||(this.offScreen_=null)},a.prototype.reset=function(){var a=this.graphLines_,b=a.length;this.memDraw_=i["default"](-1,b);for(var c=0;c<b;c++)a[c].reset();this.needRedraw_=!0},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=k}),b("davinci-newton/util/zeroArray",["require","exports"],function(a,b){"use strict";function c(a){for(var b=a.length,c=0;c<b;c++)a[c]=0}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/solvers/EulerMethod",["require","exports","../util/zeroArray"],function(a,b,c){"use strict";var d=function(){function a(a){this.sim_=a,this.inp_=[],this.k1_=[]}return a.prototype.step=function(a){var b=this.sim_.getState(),d=b.length;this.inp_.length!==d&&(this.inp_=new Array(d),this.k1_=new Array(d));for(var e=this.inp_,f=this.k1_,g=0;g<d;g++)e[g]=b[g];c["default"](f),this.sim_.evaluate(e,f,0);for(var g=0;g<d;g++)b[g]+=f[g]*a;this.sim_.setState(b)},a}();b.EulerMethod=d,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-newton/view/Point",["require","exports"],function(a,b){"use strict";var c=function(){function a(a,b){this.x_=a,this.y_=b}return Object.defineProperty(a.prototype,"x",{get:function(){return this.x_},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this.y_},enumerable:!0,configurable:!0}),a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/view/DoubleRect",["require","exports","./Point","../util/veryDifferent"],function(a,b,c,d){"use strict";var e=function(){function a(a,b,c,d){if(this.left_=a,this.right_=c,this.bottom_=b,this.top_=d,a>c)throw new Error("DoubleRect: left > right "+a+" > "+c);if(b>d)throw new Error("DoubleRect: bottom > top "+b+" > "+d)}return a.clone=function(b){return new a(b.getLeft(),b.getBottom(),b.getRight(),b.getTop())},a.isDuckType=function(b){return b instanceof a||void 0!==b.getLeft&&void 0!==b.getRight&&void 0!==b.getTop&&void 0!==b.getBottom&&void 0!==b.translate&&void 0!==b.scale},a.make=function(b,c){var d=Math.min(b.x,c.x),e=Math.max(b.x,c.x),f=Math.min(b.y,c.y),g=Math.max(b.y,c.y);return new a(d,f,e,g)},a.makeCentered=function(b,c,d){var e=b.x,f=b.y;return new a(e-c/2,f-d/2,e+c/2,f+d/2)},a.makeCentered2=function(b,c){var d=b.x,e=b.y,f=c.x,g=c.y;return new a(d-f/2,e-g/2,d+f/2,e+g/2)},a.prototype.contains=function(a){return a.x>=this.left_&&a.x<=this.right_&&a.y>=this.bottom_&&a.y<=this.top_},a.prototype.equals=function(b){return b===this||b instanceof a&&(b.getLeft()===this.left_&&b.getRight()===this.right_&&b.getBottom()===this.bottom_&&b.getTop()===this.top_)},a.prototype.expand=function(b,c){return c=void 0===c?b:c,new a(this.getLeft()-b,this.getBottom()-c,this.getRight()+b,this.getTop()+b)},a.prototype.getBottom=function(){return this.bottom_},a.prototype.getCenter=function(){return new c["default"](this.getCenterX(),this.getCenterY())},a.prototype.getCenterX=function(){return(this.left_+this.right_)/2},a.prototype.getCenterY=function(){return(this.bottom_+this.top_)/2},a.prototype.getHeight=function(){return this.top_-this.bottom_},a.prototype.getLeft=function(){return this.left_},a.prototype.getRight=function(){return this.right_},a.prototype.getTop=function(){return this.top_},a.prototype.getWidth=function(){return this.right_-this.left_},a.prototype.isEmpty=function(a){return void 0===a&&(a=1e-16),this.getWidth()<a||this.getHeight()<a},a.prototype.maybeVisible=function(a,b){if(this.contains(a)||this.contains(b))return!0;var c=a.x,d=a.y,e=b.x,f=b.y,g=this.left_;return!(c<g&&e<g)&&(g=this.right_,!(c>g&&e>g)&&(g=this.bottom_,!(d<g&&f<g)&&(g=this.top_,!(d>g&&f>g))))},a.prototype.nearEqual=function(a,b){return!d["default"](this.left_,a.getLeft(),b)&&(!d["default"](this.bottom_,a.getBottom(),b)&&(!d["default"](this.right_,a.getRight(),b)&&!d["default"](this.top_,a.getTop(),b)))},a.prototype.scale=function(b,c){c=void 0===c?b:c;var d=this.getCenterX(),e=this.getCenterY(),f=this.getWidth(),g=this.getHeight();return new a(d-b*f/2,e-c*g/2,d+b*f/2,e+c*g/2)},a.prototype.translate=function(b,c){return new a(this.left_+b,this.bottom_+c,this.right_+b,this.top_+c)},a.prototype.union=function(b){return new a(Math.min(this.left_,b.getLeft()),Math.min(this.bottom_,b.getBottom()),Math.max(this.right_,b.getRight()),Math.max(this.top_,b.getTop()))},a.prototype.unionPoint=function(b){return new a(Math.min(this.left_,b.x),Math.min(this.bottom_,b.y),Math.max(this.right_,b.x),Math.max(this.top_,b.y))},a}();e.EMPTY_RECT=new e(0,0,0,0),Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-newton/view/AffineTransform",["require","exports","./Point"],function(a,b,c){"use strict";var d=function(){function a(a,b,c,d,e,f){this.m11_=a,this.m12_=b,this.m21_=c,this.m22_=d,this.dx_=e,this.dy_=f}return a.prototype.applyTransform=function(a){return a.transform(this.m11_,this.m12_,this.m21_,this.m22_,this.dx_,this.dy_),this},a.prototype.concatenate=function(b){var c=this.m11_*b.m11_+this.m21_*b.m12_,d=this.m12_*b.m11_+this.m22_*b.m12_,e=this.m11_*b.m21_+this.m21_*b.m22_,f=this.m12_*b.m21_+this.m22_*b.m22_,g=this.m11_*b.dx_+this.m21_*b.dy_+this.dx_,h=this.m12_*b.dx_+this.m22_*b.dy_+this.dy_;return new a(c,d,e,f,g,h)},a.prototype.lineTo=function(a,b,c){var d=this.transform(a,b);return c.lineTo(d.x,d.y),this},a.prototype.moveTo=function(a,b,c){var d=this.transform(a,b);return c.moveTo(d.x,d.y),this},a.prototype.rotate=function(b){var c=Math.cos(b),d=Math.sin(b),e=c*this.m11_+d*this.m21_,f=c*this.m12_+d*this.m22_,g=-d*this.m11_+c*this.m21_,h=-d*this.m12_+c*this.m22_;return new a(e,f,g,h,this.dx_,this.dy_)},a.prototype.scale=function(b,c){var d=this.m11_*b,e=this.m12_*b,f=this.m21_*c,g=this.m22_*c;return new a(d,e,f,g,this.dx_,this.dy_)},a.prototype.setTransform=function(a){return a.setTransform(this.m11_,this.m12_,this.m21_,this.m22_,this.dx_,this.dy_),this},a.prototype.transform=function(a,b){var d=this.m11_*a+this.m21_*b+this.dx_,e=this.m12_*a+this.m22_*b+this.dy_;return new c["default"](d,e)},a.prototype.translate=function(b,c){var d=this.dx_+this.m11_*b+this.m21_*c,e=this.dy_+this.m12_*b+this.m22_*c;
return new a(this.m11_,this.m12_,this.m21_,this.m22_,d,e)},a}();d.IDENTITY=new d(1,0,0,1,0,0),Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-newton/checks/mustBeFinite",["require","exports"],function(a,b){"use strict";function c(a){if("number"!=typeof a||!isFinite(a))throw new Error("not a finite number "+a);return a}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/view/CoordMap",["require","exports","./AffineTransform","./AlignH","./AlignV","./DoubleRect","../checks/mustBeFinite","./Point","./ScreenRect"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=1e-15,k=function(){function a(a,b,d,e,f,h){this.screen_left_=g["default"](a),this.screen_bottom_=g["default"](b),this.sim_left_=g["default"](d),this.sim_bottom_=g["default"](e),this.pixel_per_unit_x_=g["default"](f),this.pixel_per_unit_y_=g["default"](h);var i=c["default"].IDENTITY;i=i.translate(this.screen_left_,this.screen_bottom_),i=i.scale(this.pixel_per_unit_x_,-this.pixel_per_unit_y_),i=i.translate(-this.sim_left_,-this.sim_bottom_),this.transform_=i}return a.make=function(b,c,f,g,h){if(void 0===f&&(f=d["default"].MIDDLE),void 0===g&&(g=e["default"].MIDDLE),void 0===h&&(h=1),h<j||!isFinite(h))throw new Error("bad aspectRatio "+h);var i=c.getLeft(),k=c.getBottom(),l=c.getRight()-i,m=c.getTop()-k;if(l<j||m<j)throw new Error("simRect cannot be empty "+c);var n=b.getTop(),o=b.getLeft(),p=b.getWidth(),q=b.getHeight(),r=0,s=0,t=0,u=0;if(f===d["default"].FULL&&(t=p/l,r=0),g===e["default"].FULL&&(u=q/m,s=0),f!==d["default"].FULL||g!==e["default"].FULL){var v;if(f===d["default"].FULL)u=t*h,v=!0;else if(g===e["default"].FULL)t=u/h,v=!1;else{t=p/l,u=t*h,v=!0;var w=Math.floor(.5+u*m);q<w&&(u=q/m,t=u/h,v=!1)}if(v){r=0;var w=Math.floor(.5+m*u);switch(g){case e["default"].BOTTOM:s=0;break;case e["default"].MIDDLE:s=(q-w)/2;break;case e["default"].TOP:s=q-w;break;default:throw new Error}}else{s=0;var x=Math.floor(.5+l*t);switch(f){case d["default"].LEFT:r=0;break;case d["default"].MIDDLE:r=(p-x)/2;break;case d["default"].RIGHT:r=p-x;break;default:throw new Error}}}var y=new a(o,n+q,i-r/t,k-s/u,t,u);return y},a.isDuckType=function(b){return b instanceof a||void 0!==b.getAffineTransform&&void 0!==b.simToScreenX&&void 0!==b.simToScreenY&&void 0!==b.screenToSimX&&void 0!==b.screenToSimY&&void 0!==b.getScaleX&&void 0!==b.getScaleY},a.prototype.getAffineTransform=function(){return this.transform_},a.prototype.getScaleX=function(){return this.pixel_per_unit_x_},a.prototype.getScaleY=function(){return this.pixel_per_unit_y_},a.prototype.screenToSim=function(a,b){return new h["default"](this.screenToSimX(a),this.screenToSimY(b))},a.prototype.screenToSimRect=function(a){return new f["default"](this.screenToSimX(a.getLeft()),this.screenToSimY(a.getTop()+a.getHeight()),this.screenToSimX(a.getLeft()+a.getWidth()),this.screenToSimY(a.getTop()))},a.prototype.screenToSimScaleX=function(a){return a/this.pixel_per_unit_x_},a.prototype.screenToSimScaleY=function(a){return a/this.pixel_per_unit_y_},a.prototype.screenToSimX=function(a){return this.sim_left_+(a-this.screen_left_)/this.pixel_per_unit_x_},a.prototype.screenToSimY=function(a){return this.sim_bottom_+(this.screen_bottom_-a)/this.pixel_per_unit_y_},a.prototype.simToScreen=function(a){return new h["default"](this.simToScreenX(a.x),this.simToScreenY(a.y))},a.prototype.simToScreenRect=function(a){return new i["default"](this.simToScreenX(a.getLeft()),this.simToScreenY(a.getTop()),this.simToScreenScaleX(a.getWidth()),this.simToScreenScaleY(a.getHeight()))},a.prototype.simToScreenScaleX=function(a){return a*this.pixel_per_unit_x_},a.prototype.simToScreenScaleY=function(a){return a*this.pixel_per_unit_y_},a.prototype.simToScreenX=function(a){return this.screen_left_+(a-this.sim_left_)*this.pixel_per_unit_x_},a.prototype.simToScreenY=function(a){return this.screen_bottom_-(a-this.sim_bottom_)*this.pixel_per_unit_y_},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=k}),b("davinci-newton/util/insertAt",["require","exports"],function(a,b){"use strict";function c(a,b,c){return arguments.length<=2?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function d(a,b,d,e){return Array.prototype.splice.apply(a,c(arguments,1))}function e(a,b,c){void 0===c&&(c=0),d(a,c,0,b)}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-newton/view/DisplayList",["require","exports","../util/AbstractSubject","../util/GenericEvent","../util/insertAt","../checks/isObject"],function(a,b,c,d,e,g){"use strict";var h=function(a){function b(){var b=a.call(this)||this;return b.drawables_=[],b}return f(b,a),b.prototype.add=function(a){if(!g["default"](a))throw new Error("non-object passed to DisplayList.add");var c=a.getZIndex();this.sort();for(var f=0,h=this.drawables_.length;f<h;f++){var i=this.drawables_[f].getZIndex();if(c<i)break}e["default"](this.drawables_,a,f),this.broadcast(new d["default"](this,b.OBJECT_ADDED,a))},b.prototype.draw=function(a,b){this.sort();for(var c=this.drawables_,d=c.length,e=0;e<d;e++)c[e].draw(a,b)},b.prototype.prepend=function(a){if(!g["default"](a))throw new Error("non-object passed to DisplayList.add");var c=a.getZIndex();this.sort();for(var f=this.drawables_.length,h=f;h>0;h--){var i=this.drawables_[h-1].getZIndex();if(c>i)break}e["default"](this.drawables_,a,h),this.broadcast(new d["default"](this,b.OBJECT_ADDED,a))},b.prototype.sort=function(){},b}(c["default"]);h.OBJECT_ADDED="OBJECT_ADDED",h.OBJECT_REMOVED="OBJECT_REMOVED",b.DisplayList=h,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=h});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-newton/view/SimView",["require","exports","../util/AbstractSubject","./AlignH","./AlignV","../util/clone","../util/contains","./CoordMap","./DisplayList","./DoubleRect","../util/GenericEvent","../util/ParameterBoolean","../util/ParameterNumber","../util/remove","./ScreenRect","../util/veryDifferent"],function(a,b,c,d,e,g,h,i,j,k,l,m,n,o,p,q){"use strict";var r=function(a){function b(c){var f=a.call(this)||this;if(f.panX=.05,f.panY=.05,f.zoom=1.1,f.screenRect_=new p["default"](0,0,800,600),f.horizAlign_=d["default"].MIDDLE,f.verticalAlign_=e["default"].MIDDLE,f.aspectRatio_=1,f.displayList_=new j["default"],f.scaleTogether_=!0,f.opaqueness=1,f.memorizables_=[],!(c instanceof k["default"])||c.isEmpty())throw new Error("bad simRect: "+c);return f.simRect_=c,f.coordMap_=i["default"].make(f.screenRect_,f.simRect_,f.horizAlign_,f.verticalAlign_,f.aspectRatio_),f.width_=c.getWidth(),f.height_=c.getHeight(),f.centerX_=c.getCenterX(),f.centerY_=c.getCenterY(),f.ratio_=f.height_/f.width_,f.addParameter(new n["default"](f,b.PARAM_NAME_WIDTH,function(){return f.getWidth()},function(a){return f.setWidth(a)})),f.addParameter(new n["default"](f,b.PARAM_NAME_HEIGHT,function(){return f.getHeight()},function(a){return f.setHeight(a)})),f.addParameter(new n["default"](f,b.PARAM_NAME_CENTER_X,function(){return f.getCenterX()},function(a){return f.setCenterX(a)}).setLowerLimit(Number.NEGATIVE_INFINITY)),f.addParameter(new n["default"](f,b.PARAM_NAME_CENTER_Y,function(){return f.getCenterY()},function(a){return f.setCenterY(a)}).setLowerLimit(Number.NEGATIVE_INFINITY)),f.addParameter(new m["default"](f,b.PARAM_NAME_SCALE_TOGETHER,function(){return f.getScaleTogether()},function(a){return f.setScaleTogether(a)})),f.addParameter(new n["default"](f,b.PARAM_NAME_VERTICAL_ALIGN,function(){return f.vAxisAlign},function(a){return f.vAxisAlign=a})),f.addParameter(new n["default"](f,b.PARAM_NAME_HORIZONTAL_ALIGN,function(){return f.hAxisAlign},function(a){return f.hAxisAlign=a})),f.addParameter(new n["default"](f,b.PARAM_NAME_ASPECT_RATIO,function(){return f.getAspectRatio()},function(a){return f.setAspectRatio(a)})),f}return f(b,a),b.prototype.addMemo=function(a){h["default"](this.memorizables_,a)||this.memorizables_.push(a)},b.prototype.gainFocus=function(){},b.prototype.getAspectRatio=function(){return this.aspectRatio_},b.prototype.getCenterX=function(){return this.centerX_},b.prototype.getCenterY=function(){return this.centerY_},b.prototype.getCoordMap=function(){return this.coordMap_},b.prototype.getDisplayList=function(){return this.displayList_},b.prototype.getHeight=function(){return this.height_},Object.defineProperty(b.prototype,"hAxisAlign",{get:function(){return this.horizAlign_},set:function(a){this.horizAlign_=a,this.realign(),this.broadcastParameter(b.PARAM_NAME_HORIZONTAL_ALIGN)},enumerable:!0,configurable:!0}),b.prototype.getMemos=function(){return g["default"](this.memorizables_)},b.prototype.getScaleTogether=function(){return this.scaleTogether_},b.prototype.getScreenRect=function(){return this.screenRect_},b.prototype.getSimRect=function(){return this.simRect_},Object.defineProperty(b.prototype,"vAxisAlign",{get:function(){return this.verticalAlign_},set:function(a){this.verticalAlign_=a,this.realign(),this.broadcastParameter(b.PARAM_NAME_VERTICAL_ALIGN)},enumerable:!0,configurable:!0}),b.prototype.getWidth=function(){return this.width_},b.prototype.loseFocus=function(){},b.prototype.paint=function(a){a.save(),a.globalAlpha=this.opaqueness,this.displayList_.draw(a,this.coordMap_),a.restore()},b.prototype.setCoordMap=function(a){if(!i["default"].isDuckType(a))throw new Error("not a CoordMap: "+a);this.coordMap_=a,this.broadcast(new l["default"](this,b.COORD_MAP_CHANGED))},b.prototype.setScreenRect=function(a){if(!p["default"].isDuckType(a))throw new Error("not a ScreenRect: "+a);if(a.isEmpty())throw new Error("empty screenrect");this.screenRect_.equals(a)||(this.screenRect_=a,this.realign(),this.broadcast(new l["default"](this,b.SCREEN_RECT_CHANGED)))},b.prototype.setSimRect=function(a){if(!k["default"].isDuckType(a))throw new Error("not a DoubleRect: "+a);a.equals(this.simRect_)||(this.simRect_=a,this.realign(),this.broadcastParameter(b.PARAM_NAME_WIDTH),this.broadcastParameter(b.PARAM_NAME_HEIGHT),this.broadcastParameter(b.PARAM_NAME_CENTER_X),this.broadcastParameter(b.PARAM_NAME_CENTER_Y),this.broadcast(new l["default"](this,b.SIM_RECT_CHANGED)))},b.prototype.memorize=function(){for(var a=0,b=this.memorizables_.length;a<b;a++)this.memorizables_[a].memorize()},b.prototype.realign=function(){this.setCoordMap(i["default"].make(this.screenRect_,this.simRect_,this.horizAlign_,this.verticalAlign_,this.aspectRatio_)),this.width_=this.simRect_.getWidth(),this.height_=this.simRect_.getHeight(),this.centerX_=this.simRect_.getCenterX(),this.centerY_=this.simRect_.getCenterY(),this.ratio_=this.height_/this.width_},b.prototype.modifySimRect=function(){var a=this.centerX_-this.width_/2,b=this.centerY_-this.height_/2,c=new k["default"](a,b,a+this.width_,b+this.height_);this.setSimRect(c)},b.prototype.panDown=function(){this.setCenterY(this.centerY_-this.panY*this.height_)},b.prototype.panLeft=function(){this.setCenterX(this.centerX_-this.panX*this.width_)},b.prototype.panRight=function(){this.setCenterX(this.centerX_+this.panX*this.width_)},b.prototype.panUp=function(){this.setCenterY(this.centerY_+this.panY*this.height_)},b.prototype.removeMemo=function(a){o["default"](this.memorizables_,a)},b.prototype.setAspectRatio=function(a){q["default"](this.aspectRatio_,a)&&(this.aspectRatio_=a,this.realign(),this.broadcastParameter(b.PARAM_NAME_ASPECT_RATIO))},b.prototype.setCenterX=function(a){q["default"](this.centerX_,a)&&(this.centerX_=a,this.modifySimRect())},b.prototype.setCenterY=function(a){q["default"](this.centerY_,a)&&(this.centerY_=a,this.modifySimRect())},b.prototype.setHeight=function(a){q["default"](this.height_,a)&&(this.height_=a,this.scaleTogether_&&(this.width_=this.height_/this.ratio_),this.modifySimRect())},b.prototype.setScaleTogether=function(a){this.scaleTogether_!==a&&(this.scaleTogether_=a,this.scaleTogether_&&(this.ratio_=this.height_/this.width_),this.broadcastParameter(b.PARAM_NAME_SCALE_TOGETHER))},b.prototype.setWidth=function(a){q["default"](this.width_,a)&&(this.width_=a,this.scaleTogether_&&(this.height_=this.width_*this.ratio_),this.modifySimRect())},b.prototype.zoomIn=function(){this.setHeight(this.height_/this.zoom)},b.prototype.zoomOut=function(){this.setHeight(this.height_*this.zoom)},b}(c["default"]);r.PARAM_NAME_WIDTH="width",r.PARAM_NAME_HEIGHT="height",r.PARAM_NAME_CENTER_X="center-x",r.PARAM_NAME_CENTER_Y="center-y",r.PARAM_NAME_HORIZONTAL_ALIGN="horizontal-align",r.PARAM_NAME_VERTICAL_ALIGN="vertical-align",r.PARAM_NAME_ASPECT_RATIO="aspect-ratio",r.PARAM_NAME_SCALE_TOGETHER="scale X-Y together",r.COORD_MAP_CHANGED="COORD_MAP_CHANGED",r.SCREEN_RECT_CHANGED="SCREEN_RECT_CHANGED",r.SIM_RECT_CHANGED="SIM_RECT_CHANGED",b.SimView=r,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=r});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-newton/graph/AutoScale",["require","exports","../util/AbstractSubject","./AxisChoice","../util/contains","../view/DoubleRect","../util/GenericEvent","./GraphLine","../util/removeAt","../util/ParameterNumber","../util/repeat","../view/SimView","../util/veryDifferent"],function(a,b,c,d,e,g,h,i,j,k,l,m,n){"use strict";var o=function(a){function b(c){var e=a.call(this)||this;e.graphLines_=[],e.enabled_=!0,e.isActive_=!0,e.ownEvent_=!1,e.rangeSetX_=!1,e.rangeSetY_=!1,e.rangeXHi_=0,e.rangeXLo_=0,e.rangeYHi_=0,e.rangeYLo_=0,e.timeWindow_=10,e.extraMargin=.01,e.minSize=1e-14,e.axisChoice_=d["default"].BOTH,e.simView_=c,c.addMemo(e),c.addObserver(e),e.lastIndex_=l["default"](-1,e.graphLines_.length),e.addParameter(new k["default"](e,b.TIME_WINDOW,function(){return e.timeWindow},function(a){return e.timeWindow=a}).setSignifDigits(3));var f=["VERTICAL","HORIZONTAL","BOTH"],g=[d["default"].VERTICAL,d["default"].HORIZONTAL,d["default"].BOTH];return e.addParameter(new k["default"](e,b.AXIS,function(){return e.axisChoice},function(a){return e.axisChoice=a},f,g)),e.setComputed(e.isActive_),e}return f(b,a),b.prototype.addGraphLine=function(a){if(!i["default"].isDuckType(a))throw new Error("not a GraphLine "+a);e["default"](this.graphLines_,a)||(this.graphLines_.push(a),a.addObserver(this),this.lastIndex_.push(-1))},b.prototype.clearRange=function(){this.rangeXLo_=0,this.rangeXHi_=0,this.rangeSetX_=!1,this.rangeYLo_=0,this.rangeYHi_=0,this.rangeSetY_=!1},Object.defineProperty(b.prototype,"active",{get:function(){return this.isActive_},set:function(a){this.isActive_!==a&&(a?this.enabled_&&(this.reset(),this.simView_.addMemo(this),this.setComputed(!0),this.isActive_=!0,this.broadcast(new h["default"](this,b.ACTIVE,this.isActive_))):(this.simView_.removeMemo(this),this.setComputed(!1),this.isActive_=!1,this.broadcast(new h["default"](this,b.ACTIVE,this.isActive_))))},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"axisChoice",{get:function(){return this.axisChoice_},set:function(a){if(a!==d["default"].VERTICAL&&a!==d["default"].HORIZONTAL&&a!==d["default"].BOTH)throw new Error("unknown "+a);this.axisChoice_=a,this.broadcastParameter(b.AXIS)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"enabled",{get:function(){return this.enabled_},set:function(a){this.enabled_!==a&&(this.enabled_=a,this.active=a,this.broadcast(new h["default"](this,b.ENABLED,this.enabled_)))},enumerable:!0,configurable:!0}),b.prototype.getRangeRect=function(){return new g["default"](this.rangeXLo_,this.rangeYLo_,this.rangeXHi_,this.rangeYHi_)},Object.defineProperty(b.prototype,"timeWindow",{get:function(){return this.timeWindow_},set:function(a){n["default"](a,this.timeWindow_)&&(this.timeWindow_=a,this.reset(),this.active=!0,this.broadcastParameter(b.TIME_WINDOW))},enumerable:!0,configurable:!0}),b.prototype.memorize=function(){for(var a=0,b=this.graphLines_.length;a<b;a++){var c=this.graphLines_[a].getGraphPoints();this.lastIndex_[a]>c.getEndIndex()&&this.reset()}for(var a=0,b=this.graphLines_.length;a<b;a++)for(var c=this.graphLines_[a].getGraphPoints(),d=c.getIterator(this.lastIndex_[a]);d.hasNext();){var e=d.nextValue();this.updateRange_(this.graphLines_[a],e.x,e.y),this.lastIndex_[a]=d.getIndex()}this.rangeCheck_()},b.prototype.observe=function(a){a.getSubject()===this.simView_?a.nameEquals(m["default"].SIM_RECT_CHANGED)&&(this.ownEvent_||(this.active=!1)):e["default"](this.graphLines_,a.getSubject())&&(a.nameEquals(i["default"].PARAM_NAME_X_VARIABLE)||a.nameEquals(i["default"].PARAM_NAME_Y_VARIABLE)?this.reset():a.nameEquals(i["default"].RESET)&&(this.active=!0))},b.prototype.rangeCheck_=function(){var a=this.minSize;if(this.rangeXHi_-this.rangeXLo_<a){var c=(this.rangeXHi_+this.rangeXLo_)/2,e=Math.max(c*a,a);this.rangeXHi_=c+e,this.rangeXLo_=c-e}if(this.rangeYHi_-this.rangeYLo_<a){var c=(this.rangeYHi_+this.rangeYLo_)/2,e=Math.max(c*a,a);this.rangeYHi_=c+e,this.rangeYLo_=c-e}var f=this.getRangeRect(),i=this.simView_.getSimRect();this.axisChoice_===d["default"].VERTICAL?f=new g["default"](i.getLeft(),f.getBottom(),i.getRight(),f.getTop()):this.axisChoice_===d["default"].HORIZONTAL&&(f=new g["default"](f.getLeft(),i.getBottom(),f.getRight(),i.getTop())),this.isActive_&&!f.nearEqual(i)&&(this.ownEvent_=!0,this.simView_.setSimRect(f),this.ownEvent_=!1,this.broadcast(new h["default"](this,b.AUTO_SCALE,f)))},b.prototype.removeGraphLine=function(a){if(!i["default"].isDuckType(a))throw new Error("not a GraphLine "+a);var b=this.graphLines_.indexOf(a);j["default"](this.graphLines_,b),j["default"](this.lastIndex_,b),this.reset()},b.prototype.reset=function(){this.clearRange();for(var a=0,b=this.lastIndex_.length;a<b;a++)this.lastIndex_[a]=-1},b.prototype.setComputed=function(a){var b=this,c=[m["default"].PARAM_NAME_WIDTH,m["default"].PARAM_NAME_HEIGHT,m["default"].PARAM_NAME_CENTER_X,m["default"].PARAM_NAME_CENTER_Y];c.forEach(function(c){var d=b.simView_.getParameter(c);d.setComputed(a)})},b.prototype.updateRange_=function(a,b,c){isFinite(b)||(b===Number.POSITIVE_INFINITY?b=1e308:b===Number.NEGATIVE_INFINITY&&(b=-1e308)),isFinite(c)||(c===Number.POSITIVE_INFINITY?c=1e308:c===Number.NEGATIVE_INFINITY&&(c=-1e308));var d=a.varsList.timeIndex(),e=a.hCoordIndex===d,f=a.vCoordIndex===d;this.rangeSetX_?(b<this.rangeXLo_&&(e?(this.rangeXLo_=b,this.rangeXHi_=b+this.timeWindow_):this.rangeXLo_=b-this.extraMargin*(this.rangeXHi_-this.rangeXLo_)),e?b>this.rangeXHi_-this.extraMargin*this.timeWindow_&&(this.rangeXHi_=b+this.extraMargin*this.timeWindow_,this.rangeXLo_=this.rangeXHi_-this.timeWindow_):b>this.rangeXHi_&&(this.rangeXHi_=b+this.extraMargin*(this.rangeXHi_-this.rangeXLo_))):(this.rangeXLo_=b,this.rangeXHi_=b+(e?this.timeWindow_:0),this.rangeSetX_=!0),this.rangeSetY_?(c<this.rangeYLo_&&(f?(this.rangeYLo_=c,this.rangeYHi_=c+this.timeWindow_):this.rangeYLo_=c-this.extraMargin*(this.rangeYHi_-this.rangeYLo_)),f?c>this.rangeYHi_-this.extraMargin*this.timeWindow_&&(this.rangeYHi_=c+this.extraMargin*this.timeWindow_,this.rangeYLo_=this.rangeYHi_-this.timeWindow_):c>this.rangeYHi_&&(this.rangeYHi_=c+this.extraMargin*(this.rangeYHi_-this.rangeYLo_))):(this.rangeYLo_=c,this.rangeYHi_=c+(f?this.timeWindow_:0),this.rangeSetY_=!0)},b}(c["default"]);o.AXIS="AXIS",o.TIME_WINDOW="TIME_WINDOW",o.ACTIVE="ACTIVE",o.AUTO_SCALE="AUTO_SCALE",o.ENABLED="ENABLED",Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=o}),b("davinci-newton/graph/DisplayAxes",["require","exports","../view/AlignH","../view/AlignV","../view/DoubleRect","../checks/isDefined"],function(a,b,c,d,e,f){"use strict";var g=function(){function a(a,b,f){void 0===a&&(a=e["default"].EMPTY_RECT),void 0===b&&(b="14pt sans-serif"),void 0===f&&(f="gray"),this.simRect_=a,this.numFont_=b,this.drawColor_=f,this.fontDescent=8,this.fontAscent=12,this.hAxisAlign_=d["default"].BOTTOM,this.vAxisAlign_=c["default"].LEFT,this.numDecimal_=0,this.needRedraw_=!0,this.hLabel_="x",this.vLabel_="y",this.zIndex_=100}return a.prototype.draw=function(a,b){a.save(),a.strokeStyle=this.drawColor_,a.fillStyle=this.drawColor_,a.font=this.numFont_,a.textAlign="start",a.textBaseline="alphabetic";var e,f,g=this.simRect_,h=g.getLeft(),i=g.getRight(),j=g.getBottom(),k=g.getTop();switch(this.vAxisAlign_){case c["default"].RIGHT:e=b.simToScreenX(i-.05*(i-h));break;case c["default"].LEFT:e=b.simToScreenX(h+.05*(i-h));break;default:e=b.simToScreenX(g.getCenterX())}switch(this.hAxisAlign_){case d["default"].TOP:f=b.simToScreenY(k)+(10+this.fontDescent+this.fontAscent);break;case d["default"].BOTTOM:f=b.simToScreenY(j)-(10+this.fontDescent+this.fontAscent);break;default:f=b.simToScreenY(g.getCenterY())}a.beginPath(),a.moveTo(b.simToScreenX(h),f),a.lineTo(b.simToScreenX(i),f),a.stroke(),this.drawHorizTicks(f,a,b,this.simRect_),a.beginPath(),a.moveTo(e,b.simToScreenY(j)),a.lineTo(e,b.simToScreenY(k)),a.stroke(),this.drawVertTicks(e,a,b,this.simRect_),a.restore(),this.needRedraw_=!1},a.prototype.drawHorizTicks=function(b,c,d,e){for(var f=b-4,g=f+8,h=e.getLeft(),i=e.getRight(),j=this.getNiceIncrement(i-h),k=a.getNiceStart(h,j);k<i;){var l=d.simToScreenX(k);c.beginPath(),c.moveTo(l,f),c.lineTo(l,g),c.stroke();var m=k+j;if(!(m>k)){c.fillText("scale is too small",l,g+this.fontAscent);break}var n=k.toFixed(this.numDecimal_),o=c.measureText(n).width;c.fillText(n,l-o/2,g+this.fontAscent),k=m}var p=c.measureText(this.hLabel_).width;c.fillText(this.hLabel_,d.simToScreenX(i)-p-5,b-8)},a.prototype.drawVertTicks=function(b,d,e,f){for(var g=b-4,h=g+8,i=f.getBottom(),j=f.getTop(),k=this.getNiceIncrement(j-i),l=a.getNiceStart(i,k);l<j;){var m=e.simToScreenY(l);d.beginPath(),d.moveTo(g,m),d.lineTo(h,m),d.stroke();var n=l+k;if(!(n>l)){d.fillText("scale is too small",h,m);break}var o=l.toFixed(this.numDecimal_),p=d.measureText(o).width;this.vAxisAlign_===c["default"].RIGHT?d.fillText(o,h-(p+10),m+this.fontAscent/2):d.fillText(o,h+5,m+this.fontAscent/2),l=n}var q=d.measureText(this.vLabel_).width;this.vAxisAlign_===c["default"].RIGHT?d.fillText(this.vLabel_,b-(q+6),e.simToScreenY(j)+13):d.fillText(this.vLabel_,b+6,e.simToScreenY(j)+13)},Object.defineProperty(a.prototype,"color",{get:function(){return this.drawColor_},set:function(a){this.drawColor_=a,this.needRedraw_=!0},enumerable:!0,configurable:!0}),a.prototype.getFont=function(){return this.numFont_},Object.defineProperty(a.prototype,"hAxisLabel",{get:function(){return this.hLabel_},set:function(a){this.hLabel_=a,this.needRedraw_=!0},enumerable:!0,configurable:!0}),a.prototype.getNiceIncrement=function(a){var b,c=Math.pow(10,Math.floor(Math.log(a)/Math.LN10)),d=a/c;b=d>=8?2:d>=5?1:d>=3?.5:d>=2?.4:.2,b*=c;var e=Math.log(b)/Math.LN10;return this.numDecimal_=e<0?Math.ceil(-e):0,b},a.getNiceStart=function(a,b){return Math.ceil(a/b)*b},a.prototype.getSimRect=function(){return this.simRect_},Object.defineProperty(a.prototype,"vAxisLabel",{get:function(){return this.vLabel_},set:function(a){this.vLabel_=a,this.needRedraw_=!0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"hAxisAlign",{get:function(){return this.hAxisAlign_},set:function(a){this.hAxisAlign_=a,this.needRedraw_=!0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"vAxisAlign",{get:function(){return this.vAxisAlign_},set:function(a){this.vAxisAlign_=a,this.needRedraw_=!0},enumerable:!0,configurable:!0}),a.prototype.getZIndex=function(){return this.zIndex_},a.prototype.isDragable=function(){return!1},a.prototype.needsRedraw=function(){return this.needRedraw_},a.prototype.setDragable=function(a){},a.prototype.setFont=function(a){this.numFont_=a,this.needRedraw_=!0},a.prototype.setSimRect=function(a){this.simRect_=a,this.needRedraw_=!0},a.prototype.setZIndex=function(a){f["default"](a)&&(this.zIndex_=a)},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=g}),b("davinci-newton/util/GenericObserver",["require","exports"],function(a,b){"use strict";var c=function(){function a(a,b){this.subject_=a,a.addObserver(this),this.observeFn_=b}return a.prototype.disconnect=function(){this.subject_.removeObserver(this)},a.prototype.observe=function(a){this.observeFn_(a)},a}();b.GenericObserver=c,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/util/isEmpty",["require","exports"],function(a,b){"use strict";function c(a){return 0===a.length}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-newton/view/LabCanvas",["require","exports","../util/AbstractSubject","../util/clone","../util/contains","../util/GenericEvent","../util/isEmpty","../checks/isNumber","../checks/mustBeNonNullObject","../util/remove","./ScreenRect","../util/veryDifferent"],function(a,b,c,d,e,g,h,i,j,k,l,m){"use strict";var n="width",o="height",p="alpha",q="background",r=function(a){function b(b){var c=a.call(this)||this;return c.labViews_=[],c.memorizables_=[],c.focusView_=null,c.alpha_=1,c.background_="",c.canvas_=b,b.contentEditable="false",c}return f(b,a),b.prototype.addMemo=function(a){e["default"](this.memorizables_,a)||this.memorizables_.push(a)},b.prototype.addView=function(a){if(j["default"]("view",a),this.getWidth()>0&&this.getHeight()>0){var c=new l["default"](0,0,this.getWidth(),this.getHeight());a.setScreenRect(c)}this.labViews_.push(a),this.addMemo(a),this.broadcast(new g["default"](this,b.VIEW_ADDED,a)),this.broadcast(new g["default"](this,b.VIEW_LIST_MODIFIED)),null==this.focusView_&&this.setFocusView(a)},b.prototype.focus=function(){this.canvas_.focus()},b.prototype.getAlpha=function(){return this.alpha_},b.prototype.getBackground=function(){return this.background_},b.prototype.getCanvas=function(){return this.canvas_},b.prototype.getContext=function(){return this.canvas_.getContext("2d")},b.prototype.getFocusView=function(){return this.focusView_},b.prototype.getHeight=function(){return this.canvas_.height},b.prototype.getMemos=function(){return d["default"](this.memorizables_)},b.prototype.getScreenRect=function(){return new l["default"](0,0,this.canvas_.width,this.canvas_.height)},b.prototype.getViews=function(){return d["default"](this.labViews_)},b.prototype.getWidth=function(){return this.canvas_.width},b.prototype.memorize=function(){for(var a=0,b=this.memorizables_.length;a<b;a++)this.memorizables_[a].memorize()},b.prototype.notifySizeChanged=function(){var a=this.getScreenRect();this.labViews_.forEach(function(b){b.setScreenRect(a)}),this.broadcast(new g["default"](this,b.SIZE_CHANGED))},b.prototype.paint=function(){if(null!=this.canvas_.offsetParent){var a=this.canvas_.getContext("2d");a.save(),""!==this.background_?(a.globalAlpha=this.alpha_,a.fillStyle=this.background_,a.fillRect(0,0,this.canvas_.width,this.canvas_.height),a.globalAlpha=1):a.clearRect(0,0,this.canvas_.width,this.canvas_.height);for(var b=this.labViews_,c=b.length,d=0;d<c;d++)b[d].paint(a);a.restore()}},b.prototype.removeMemo=function(a){k["default"](this.memorizables_,a)},b.prototype.removeView=function(a){j["default"]("view",a),k["default"](this.labViews_,a),this.removeMemo(a),this.focusView_===a&&this.setFocusView(h["default"](this.labViews_)?null:this.labViews_[0]),this.broadcast(new g["default"](this,b.VIEW_REMOVED,a)),this.broadcast(new g["default"](this,b.VIEW_LIST_MODIFIED))},b.prototype.setAlpha=function(a){m["default"](this.alpha_,a)&&(this.alpha_=a,m["default"](a,1)&&""===this.background_&&this.setBackground("white"),this.broadcastParameter(p))},b.prototype.setBackground=function(a){this.background_!==a&&(this.background_=a,this.broadcastParameter(q))},b.prototype.setFocusView=function(a){if(null!=a&&!e["default"](this.labViews_,a))throw new Error("cannot set focus to unknown view "+a);this.focusView_!==a&&(null!=this.focusView_&&this.focusView_.loseFocus(),this.focusView_=a,null!=a&&a.gainFocus(),this.broadcast(new g["default"](this,b.FOCUS_VIEW_CHANGED,a)))},b.prototype.setHeight=function(a){m["default"](a,this.canvas_.height)&&(this.canvas_.height=a),this.notifySizeChanged(),this.broadcastParameter(o)},b.prototype.setScreenRect=function(a){if(!l["default"].isDuckType(a))throw new Error("not a ScreenRect "+a);if(0!==a.getTop()||0!==a.getLeft())throw new Error("top left must be 0,0, was: "+a);this.setSize(a.getWidth(),a.getHeight())},b.prototype.setSize=function(a,b){if(!i["default"](a)||a<=0||!i["default"](b)||b<=0)throw new Error("bad size "+a+", "+b);this.canvas_.width=a,this.canvas_.height=b,this.notifySizeChanged(),this.broadcastParameter(n),this.broadcastParameter(o)},b.prototype.setWidth=function(a){m["default"](a,this.canvas_.width)&&(this.canvas_.width=a),this.notifySizeChanged(),this.broadcastParameter(n)},b}(c["default"]);r.FOCUS_VIEW_CHANGED="FOCUS_VIEW_CHANGED",r.SIZE_CHANGED="SIZE_CHANGED",r.VIEW_LIST_MODIFIED="VIEW_LIST_MODIFIED",r.VIEW_ADDED="VIEW_ADDED",r.VIEW_REMOVED="VIEW_REMOVED",b.LabCanvas=r,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=r}),b("davinci-newton/checks/isString",["require","exports"],function(a,b){"use strict";function c(a){return"string"==typeof a}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/checks/mustBeString",["require","exports","../checks/mustSatisfy","../checks/isString"],function(a,b,c,d){"use strict";function e(){return"be a string"}function f(a,b,f){return c["default"](a,d["default"](b),e,f),b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-newton/graph/Graph",["require","exports","../util/AbstractSubject","../view/AlignH","../view/AlignV","./AutoScale","./DisplayAxes","./DisplayGraph","../view/DoubleRect","../util/GenericObserver","./GraphLine","../view/LabCanvas","../checks/mustBeNumber","../checks/mustBeString","../view/SimView"],function(a,b,c,d,e,g,h,i,j,k,l,m,n,o,p){"use strict";var q=function(a){function b(b,c){var f=a.call(this)||this;f.varsList=c,f.view=new p["default"](new j["default"](0,0,1,1)),f.autoScale=new g["default"](f.view);var l=document.getElementById(b);return f.labCanvas=new m["default"](l),f.view.hAxisAlign=d["default"].FULL,f.view.vAxisAlign=e["default"].FULL,f.labCanvas.addView(f.view),f.displayGraph=new i["default"],f.displayGraph.setScreenRect(f.view.getScreenRect()),f.view.getDisplayList().prepend(f.displayGraph),f.timeIdx_=c.timeIndex(),f.axes=new h["default"](f.view.getSimRect()),new k["default"](f.view,function(a){if(a.nameEquals(p["default"].COORD_MAP_CHANGED)){var b=f.view.getCoordMap().screenToSimRect(f.view.getScreenRect());f.axes.setSimRect(b)}}),f.view.getDisplayList().add(f.axes),f.autoScale.extraMargin=.05,f}return f(b,a),b.prototype.addGraphLine=function(a,b,c){void 0===c&&(c="black"),n["default"]("hCoordIndex",a),n["default"]("vCoordIndex",b),o["default"]("color",c);var d=new l["default"](this.varsList);return this.view.addMemo(d),d.hCoordIndex=a,d.vCoordIndex=b,d.color=c,d.hotspotColor=c,this.displayGraph.addGraphLine(d),this.displayGraph.setUseBuffer(d.hCoordIndex!==this.timeIdx_),d},b.prototype.removeGraphLine=function(a){this.displayGraph.removeGraphLine(a)},b.prototype.memorize=function(){this.labCanvas.memorize()},b.prototype.render=function(){this.labCanvas.paint()},b.prototype.reset=function(){this.autoScale.reset(),this.displayGraph.reset()},b}(c["default"]);b.Graph=q,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=q});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,
new c)};b("davinci-newton/engine3D/GravitationLaw3",["require","exports","../objects/AbstractSimObject","../model/CoordType","./Force3"],function(a,b,c,d,e){"use strict";var g=function(a){function b(b,c){var f=a.call(this)||this;return f.body1_=b,f.body2_=c,f.G=1,f.forces=[],f.F1=new e["default"](f.body1_),f.F1.locationCoordType=d["default"].WORLD,f.F1.vectorCoordType=d["default"].WORLD,f.F2=new e["default"](f.body2_),f.F2.locationCoordType=d["default"].WORLD,f.F2.vectorCoordType=d["default"].WORLD,f.forces=[f.F1,f.F2],f}return f(b,a),b.prototype.updateForces=function(){this.F1.location.copy(this.body1_.X),this.F2.location.copy(this.body2_.X);var a=this.body1_.M,b=this.body2_.M,c=this.F1.location.quadranceTo(this.F2.location),d=this.G*a*b/c;return this.F1.vector.copy(this.F2.location).subtract(this.F1.location).direction().mulByScalar(d),this.F2.vector.copy(this.F1.vector).neg(),this.forces},b.prototype.disconnect=function(){},b.prototype.potentialEnergy=function(){var a=this.body1_.M,b=this.body2_.M,c=this.F1.location.distanceTo(this.F2.location);return-this.G*a*b/c},b}(c["default"]);b.GravitationLaw3=g,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=g}),b("davinci-newton/solvers/ModifiedEuler",["require","exports","../util/zeroArray"],function(a,b,c){"use strict";var d=function(){function a(a){this.sim_=a,this.inp_=[],this.k1_=[],this.k2_=[]}return a.prototype.step=function(a){var b=this.sim_.getState(),d=b.length;this.inp_.length!==d&&(this.inp_=new Array(d),this.k1_=new Array(d),this.k2_=new Array(d));for(var e=this.inp_,f=this.k1_,g=this.k2_,h=0;h<d;h++)e[h]=b[h];c["default"](f),this.sim_.evaluate(e,f,0);for(var h=0;h<d;h++)e[h]=b[h]+f[h]*a;c["default"](g),this.sim_.evaluate(e,g,a);for(var h=0;h<d;h++)b[h]+=(f[h]+g[h])*a/2;this.sim_.setState(b)},a}();b.ModifiedEuler=d,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-newton/core/SimList",["require","exports","../util/AbstractSubject","../util/contains","../util/GenericEvent","../checks/mustBeNonNullObject","../util/remove"],function(a,b,c,d,e,g,h){"use strict";var i=function(a){function b(){var b=a.call(this)||this;return b.elements_=[],b}return f(b,a),b.prototype.add=function(a){for(var c=0;c<arguments.length;c++){var f=arguments[c];g["default"]("element",f),d["default"](this.elements_,f)||(this.elements_.push(f),this.broadcast(new e["default"](this,b.OBJECT_ADDED,f)))}},b.prototype.forEach=function(a){return this.elements_.forEach(a)},b.prototype.remove=function(a){h["default"](this.elements_,a)&&this.broadcast(new e["default"](this,b.OBJECT_REMOVED,a))},b.prototype.removeTemporary=function(a){for(var c=this.elements_.length-1;c>=0;c--){var d=this.elements_[c];d.expireTime<a&&(this.elements_.splice(c,1),this.broadcast(new e["default"](this,b.OBJECT_REMOVED,d)))}},b}(c["default"]);i.OBJECT_ADDED="OBJECT_ADDED",i.OBJECT_REMOVED="OBJECT_REMOVED",b.SimList=i,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=i}),b("davinci-newton/model/ConcreteVariable",["require","exports","../util/toName","../util/validName"],function(a,b,c,d){"use strict";var e=function(){function a(a,b){this.varsList_=a,this.value_=0,this.seq_=0,this.isComputed_=!1,this.doesBroadcast_=!1,this.name_=d["default"](c["default"](b))}return a.prototype.getBroadcast=function(){return this.doesBroadcast_},Object.defineProperty(a.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),a.prototype.getSequence=function(){return this.seq_},a.prototype.getSubject=function(){return this.varsList_},a.prototype.getValue=function(){return this.value_},a.prototype.nameEquals=function(a){return this.name_===c["default"](a)},a.prototype.setBroadcast=function(a){this.doesBroadcast_=a},a.prototype.setComputed=function(a){this.isComputed_=a},a.prototype.setValue=function(a){this.value_!==a&&(this.value_=a,this.seq_++,this.doesBroadcast_&&this.varsList_.broadcast(this))},a.prototype.setValueSmooth=function(a){this.value_=a},a.prototype.incrSequence=function(){this.seq_++},a}();b.ConcreteVariable=e,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-newton/checks/isArray",["require","exports"],function(a,b){"use strict";function c(a){return"[object Array]"===Object.prototype.toString.call(a)}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-newton/util/extendArray",["require","exports","../checks/isArray"],function(a,b,c){"use strict";function d(a,b,d){if(0!==b){if(b<0)throw new Error;var e=a.length;if(a.length=e+b,c["default"](d)){var f=d;if(f.length!==b)throw new Error;for(var g=e,h=a.length;g<h;g++)a[g]=d[g-e]}else for(var g=e,h=a.length;g<h;g++)a[g]=d}}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-newton/core/VarsList",["require","exports","../util/AbstractSubject","../util/clone","../model/ConcreteVariable","../util/extendArray","../util/find","../util/findIndex","../util/GenericEvent","../checks/isNumber","../checks/isString","../util/toName","../util/validName"],function(a,b,c,d,e,g,h,i,j,k,l,m,n){"use strict";var o=function(a){function b(b){var c=a.call(this)||this;c.timeIdx_=-1,c.varList_=[],c.history_=!0,c.histArray_=[];var d=b.length;return 0!==d&&c.addVariables(b),c}return f(b,a),b.prototype.findOpenSlot_=function(a){for(var c=0,d=-1,f=0,h=this.varList_.length;f<h;f++)if(this.varList_[f].name===b.DELETED){if(d===-1&&(d=f),c++,c>=a)return d}else d=-1,c=0;var i;c>0?i=a-c:(d=this.varList_.length,i=a);var j=[];for(f=0;f<i;f++)j.push(new e["default"](this,b.DELETED));return g["default"](this.varList_,i,j),d},b.prototype.addVariables=function(a){var c=a.length;if(0===c)throw new Error;for(var d=this.findOpenSlot_(c),f=0;f<c;f++){var g=n["default"](m["default"](a[f]));if(g===b.DELETED)throw new Error("variable cannot be named '"+b.DELETED+"'");var h=d+f;this.varList_[h]=new e["default"](this,g),g===b.TIME&&(this.timeIdx_=h)}return this.broadcast(new j["default"](this,b.VARS_MODIFIED)),d},b.prototype.deleteVariables=function(a,c){if(0!==c){if(c<0||a<0||a+c>this.varList_.length)throw new Error("deleteVariables");for(var d=a;d<a+c;d++)this.varList_[d]=new e["default"](this,b.DELETED);this.broadcast(new j["default"](this,b.VARS_MODIFIED))}},b.prototype.incrSequence=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(0===arguments.length)for(var c=0,d=this.varList_.length;c<d;c++)this.varList_[c].incrSequence();else for(var c=0,d=arguments.length;c<d;c++){var e=arguments[c];this.checkIndex_(e),this.varList_[e].incrSequence()}},b.prototype.getValue=function(a){return this.checkIndex_(a),this.varList_[a].getValue()},b.prototype.getName=function(a){return this.checkIndex_(a),this.varList_[a].name},b.prototype.getSequence=function(a){return this.checkIndex_(a),this.varList_[a].getSequence()},b.prototype.getValues=function(){return this.varList_.map(function(a){return a.getValue()})},b.prototype.setValues=function(a,b){void 0===b&&(b=!1);var c=this.varList_.length,d=a.length;if(d>c)throw new Error("setValues bad length n = "+d+" > N = "+c);for(var e=0;e<c;e++)e<d&&this.setValue(e,a[e],b)},b.prototype.setValue=function(a,b,c){void 0===c&&(c=!1),this.checkIndex_(a);var d=this.varList_[a];if(isNaN(b))throw new Error("cannot set variable "+d.name+" to NaN");c?d.setValueSmooth(b):d.setValue(b)},b.prototype.checkIndex_=function(a){if(a<0||a>=this.varList_.length)throw new Error("bad variable index="+a+"; numVars="+this.varList_.length)},b.prototype.addVariable=function(a){var c=a.name;if(c===b.DELETED)throw new Error("variable cannot be named '"+b.DELETED+"'");var d=this.findOpenSlot_(1);return this.varList_[d]=a,c===b.TIME&&(this.timeIdx_=d),this.broadcast(new j["default"](this,b.VARS_MODIFIED)),d},b.prototype.getHistory=function(){return this.history_},b.prototype.getParameter=function(a){a=m["default"](a);var b=h["default"](this.varList_,function(b){return b.name===a});if(null!=b)return b;throw new Error("Parameter not found "+a)},b.prototype.getParameters=function(){return d["default"](this.varList_)},b.prototype.getTime=function(){if(this.timeIdx_<0)throw new Error("no time variable");return this.getValue(this.timeIdx_)},b.prototype.getVariable=function(a){var b;if(k["default"](a))b=a;else{if(!l["default"](a))throw new Error;if(a=m["default"](a),b=i["default"](this.varList_,function(b){return b.name===a}),b<0)throw new Error("unknown variable name "+a)}return this.checkIndex_(b),this.varList_[b]},b.prototype.numVariables=function(){return this.varList_.length},b.prototype.saveHistory=function(){if(this.history_){var a=this.getValues();a.push(this.getTime()),this.histArray_.push(a),this.histArray_.length>20&&this.histArray_.shift()}},b.prototype.setComputed=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];for(var c=0,d=arguments.length;c<d;c++){var e=arguments[c];this.checkIndex_(e),this.varList_[e].setComputed(!0)}},b.prototype.setHistory=function(a){this.history_=a},b.prototype.setTime=function(a){this.setValue(this.timeIdx_,a)},b.prototype.timeIndex=function(){return this.timeIdx_},b.prototype.toArray=function(){return d["default"](this.varList_)},b}(c["default"]);o.DELETED="DELETED",o.TIME="TIME",o.VARS_MODIFIED="VARS_MODIFIED",b.VarsList=o,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=o});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-newton/engine3D/Physics3",["require","exports","../util/AbstractSubject","../math/Bivector3","../util/contains","../util/remove","../core/SimList","../core/VarsList","../math/Vector3","../math/wedge3"],function(a,b,c,d,e,g,h,i,j,k){"use strict";function l(a){switch(a){case o.OFFSET_POSITION_X:return"position x";case o.OFFSET_POSITION_Y:return"position y";case o.OFFSET_POSITION_Z:return"position z";case o.OFFSET_ATTITUDE_A:return"attitude a";case o.OFFSET_ATTITUDE_YZ:return"attitude yz";case o.OFFSET_ATTITUDE_ZX:return"attitude zx";case o.OFFSET_ATTITUDE_XY:return"attitude xy";case o.OFFSET_LINEAR_MOMENTUM_X:return"linear momentum x";case o.OFFSET_LINEAR_MOMENTUM_Y:return"linear momentum y";case o.OFFSET_LINEAR_MOMENTUM_Z:return"linear momentum z";case o.OFFSET_ANGULAR_MOMENTUM_YZ:return"angular momentum yz";case o.OFFSET_ANGULAR_MOMENTUM_ZX:return"angular momentum zx";case o.OFFSET_ANGULAR_MOMENTUM_XY:return"angular momentum xy"}throw new Error("getVarName("+a+")")}var m=[i["default"].TIME,"translational kinetic energy","rotational kinetic energy","potential energy","total energy","total linear momentum - x","total linear momentum - y","total linear momentum - z","total angular momentum - yz","total angular momentum - zx","total angular momentum - xy"],n=13,o=function(a){function b(){var b=a.call(this)||this;return b.simList_=new h["default"],b.bodies_=[],b.forceLaws_=[],b.showForces_=!1,b.potentialOffset_=0,b.force_=new j["default"](0,0,0),b.torque_=new d["default"],b.varsList_=new i["default"](m),b}return f(b,a),Object.defineProperty(b.prototype,"showForces",{get:function(){return this.showForces_},set:function(a){this.showForces_=a},enumerable:!0,configurable:!0}),b.prototype.addBody=function(a){if(!e["default"](this.bodies_,a)){for(var b=[],c=0;c<n;c++)b.push(l(c));a.varsIndex=this.varsList_.addVariables(b),this.bodies_.push(a),this.simList_.add(a)}this.initializeFromBody(a),this.bodies_.forEach(function(a){}),this.discontinuosChangeToEnergy()},b.prototype.removeBody=function(a){e["default"](this.bodies_,a)&&(this.varsList_.deleteVariables(a.varsIndex,n),g["default"](this.bodies_,a),a.varsIndex=-1),this.simList_.remove(a),this.discontinuosChangeToEnergy()},b.prototype.addForceLaw=function(a){e["default"](this.forceLaws_,a)||this.forceLaws_.push(a),this.discontinuosChangeToEnergy()},b.prototype.removeForceLaw=function(a){a.disconnect(),this.discontinuosChangeToEnergy(),g["default"](this.forceLaws_,a)},b.prototype.discontinuosChangeToEnergy=function(){this.varsList_.incrSequence(b.INDEX_TRANSLATIONAL_KINETIC_ENERGY,b.INDEX_ROTATIONAL_KINETIC_ENERGY,b.INDEX_POTENTIAL_ENERGY,b.INDEX_TOTAL_ENERGY,b.INDEX_TOTAL_LINEAR_MOMENTUM_X,b.INDEX_TOTAL_LINEAR_MOMENTUM_Y,b.INDEX_TOTAL_LINEAR_MOMENTUM_Z,b.INDEX_TOTAL_ANGULAR_MOMENTUM_YZ,b.INDEX_TOTAL_ANGULAR_MOMENTUM_ZX,b.INDEX_TOTAL_ANGULAR_MOMENTUM_XY)},b.prototype.moveObjects=function(a){for(var c=this.bodies_,d=c.length,e=0;e<d;e++){var f=c[e],g=f.varsIndex;if(g<0)return;f.X.x=a[g+b.OFFSET_POSITION_X],f.X.y=a[g+b.OFFSET_POSITION_Y],f.X.z=a[g+b.OFFSET_POSITION_Z],f.R.a=a[g+b.OFFSET_ATTITUDE_A],f.R.xy=a[g+b.OFFSET_ATTITUDE_XY],f.R.yz=a[g+b.OFFSET_ATTITUDE_YZ],f.R.zx=a[g+b.OFFSET_ATTITUDE_ZX],f.R.normalize(),f.P.x=a[g+b.OFFSET_LINEAR_MOMENTUM_X],f.P.y=a[g+b.OFFSET_LINEAR_MOMENTUM_Y],f.P.z=a[g+b.OFFSET_LINEAR_MOMENTUM_Z],f.L.xy=a[g+b.OFFSET_ANGULAR_MOMENTUM_XY],f.L.yz=a[g+b.OFFSET_ANGULAR_MOMENTUM_YZ],f.L.zx=a[g+b.OFFSET_ANGULAR_MOMENTUM_ZX],f.updateAngularVelocity()}},b.prototype.prolog=function(){this.simList.removeTemporary(this.varsList.getTime())},b.prototype.getState=function(){return this.varsList_.getValues()},b.prototype.setState=function(a){this.varsList.setValues(a,!0)},b.prototype.evaluate=function(a,c,d){this.moveObjects(a);for(var e=this.bodies_,f=e.length,g=0;g<f;g++){var h=e[g],i=h.varsIndex;if(i<0)return;var j=h.M;if(j===Number.POSITIVE_INFINITY)for(var k=0;k<n;k++)c[i+k]=0;else{c[i+b.OFFSET_POSITION_X]=a[i+b.OFFSET_LINEAR_MOMENTUM_X]/j,c[i+b.OFFSET_POSITION_Y]=a[i+b.OFFSET_LINEAR_MOMENTUM_Y]/j,c[i+b.OFFSET_POSITION_Z]=a[i+b.OFFSET_LINEAR_MOMENTUM_Z]/j;var l=h.R,m=h.Ω;c[i+b.OFFSET_ATTITUDE_A]=.5*(m.xy*l.xy+m.yz*l.yz+m.zx*l.zx),c[i+b.OFFSET_ATTITUDE_YZ]=-.5*(m.yz*l.a+m.xy*l.zx-m.zx*l.xy),c[i+b.OFFSET_ATTITUDE_ZX]=-.5*(m.zx*l.a+m.yz*l.xy-m.xy*l.yz),c[i+b.OFFSET_ATTITUDE_XY]=-.5*(m.xy*l.a+m.zx*l.yz-m.yz*l.zx),c[i+b.OFFSET_LINEAR_MOMENTUM_X]=0,c[i+b.OFFSET_LINEAR_MOMENTUM_Y]=0,c[i+b.OFFSET_LINEAR_MOMENTUM_Z]=0,c[i+b.OFFSET_ANGULAR_MOMENTUM_XY]=0,c[i+b.OFFSET_ANGULAR_MOMENTUM_YZ]=0,c[i+b.OFFSET_ANGULAR_MOMENTUM_ZX]=0}}for(var o=this.forceLaws_,p=o.length,q=0;q<p;q++)for(var r=o[q],s=r.updateForces(),t=s.length,u=0;u<t;u++)this.applyForce(c,s[u]);return c[this.varsList_.timeIndex()]=1,null},b.prototype.applyForce=function(a,c){var d=c.getBody();if(e["default"](this.bodies_,d)){var f=d.varsIndex;if(!(f<0)){c.computeForce(this.force_);var g=this.force_;a[f+b.OFFSET_LINEAR_MOMENTUM_X]+=g.x,a[f+b.OFFSET_LINEAR_MOMENTUM_Y]+=g.y,a[f+b.OFFSET_LINEAR_MOMENTUM_Z]+=g.z,c.computeTorque(this.torque_);var h=this.torque_;a[f+b.OFFSET_ANGULAR_MOMENTUM_YZ]+=h.yz,a[f+b.OFFSET_ANGULAR_MOMENTUM_ZX]+=h.zx,a[f+b.OFFSET_ANGULAR_MOMENTUM_XY]+=h.xy,this.showForces_&&(c.expireTime=this.varsList_.getTime(),this.simList_.add(c))}}},Object.defineProperty(b.prototype,"time",{get:function(){return this.varsList_.getTime()},enumerable:!0,configurable:!0}),b.prototype.initializeFromBody=function(a){var c=a.varsIndex;if(c>-1){var d=this.varsList_;d.setValue(b.OFFSET_POSITION_X+c,a.X.x),d.setValue(b.OFFSET_POSITION_Y+c,a.X.y),d.setValue(b.OFFSET_POSITION_Z+c,a.X.z),d.setValue(b.OFFSET_ATTITUDE_A+c,a.R.a),d.setValue(b.OFFSET_ATTITUDE_XY+c,a.R.xy),d.setValue(b.OFFSET_ATTITUDE_YZ+c,a.R.yz),d.setValue(b.OFFSET_ATTITUDE_ZX+c,a.R.zx),d.setValue(b.OFFSET_LINEAR_MOMENTUM_X+c,a.P.x),d.setValue(b.OFFSET_LINEAR_MOMENTUM_Y+c,a.P.y),d.setValue(b.OFFSET_LINEAR_MOMENTUM_Z+c,a.P.z),d.setValue(b.OFFSET_ANGULAR_MOMENTUM_XY+c,a.L.xy),d.setValue(b.OFFSET_ANGULAR_MOMENTUM_YZ+c,a.L.yz),d.setValue(b.OFFSET_ANGULAR_MOMENTUM_ZX+c,a.L.zx)}},b.prototype.epilog=function(){var a=this.varsList_,c=a.getValues();this.moveObjects(c);for(var d=this.potentialOffset_,e=0,f=0,g=0,h=0,i=0,j=0,l=0,m=0,n=this.bodies_,o=n.length,p=0;p<o;p++){var q=n[p];isFinite(q.M)&&(e+=q.rotationalEnergy(),f+=q.translationalEnergy(),g+=q.P.x,h+=q.P.y,i+=q.P.z,j+=k.wedgeYZ(q.X,q.P),l+=k.wedgeZX(q.X,q.P),m+=k.wedgeXY(q.X,q.P),j+=q.L.yz,l+=q.L.zx,m+=q.L.xy)}for(var r=this.forceLaws_,s=r.length,p=0;p<s;p++)d+=r[p].potentialEnergy();a.setValue(b.INDEX_TRANSLATIONAL_KINETIC_ENERGY,f,!0),a.setValue(b.INDEX_ROTATIONAL_KINETIC_ENERGY,e,!0),a.setValue(b.INDEX_POTENTIAL_ENERGY,d,!0),a.setValue(b.INDEX_TOTAL_ENERGY,f+e+d,!0),a.setValue(b.INDEX_TOTAL_LINEAR_MOMENTUM_X,g,!0),a.setValue(b.INDEX_TOTAL_LINEAR_MOMENTUM_Y,h,!0),a.setValue(b.INDEX_TOTAL_LINEAR_MOMENTUM_Z,i,!0),a.setValue(b.INDEX_TOTAL_ANGULAR_MOMENTUM_YZ,j,!0),a.setValue(b.INDEX_TOTAL_ANGULAR_MOMENTUM_ZX,l,!0),a.setValue(b.INDEX_TOTAL_ANGULAR_MOMENTUM_XY,m,!0)},Object.defineProperty(b.prototype,"simList",{get:function(){return this.simList_},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"varsList",{get:function(){return this.varsList_},enumerable:!0,configurable:!0}),b.prototype.totalEnergy=function(){for(var a=this.potentialOffset_,b=0,c=0,d=this.bodies_,e=d.length,f=0;f<e;f++){var g=d[f];isFinite(g.M)&&(b+=g.rotationalEnergy(),c+=g.translationalEnergy())}for(var h=this.forceLaws_,i=h.length,f=0;f<i;f++)a+=h[f].potentialEnergy();return c+b+a},b}(c["default"]);o.INDEX_TIME=0,o.INDEX_TRANSLATIONAL_KINETIC_ENERGY=1,o.INDEX_ROTATIONAL_KINETIC_ENERGY=2,o.INDEX_POTENTIAL_ENERGY=3,o.INDEX_TOTAL_ENERGY=4,o.INDEX_TOTAL_LINEAR_MOMENTUM_X=5,o.INDEX_TOTAL_LINEAR_MOMENTUM_Y=6,o.INDEX_TOTAL_LINEAR_MOMENTUM_Z=7,o.INDEX_TOTAL_ANGULAR_MOMENTUM_YZ=8,o.INDEX_TOTAL_ANGULAR_MOMENTUM_ZX=9,o.INDEX_TOTAL_ANGULAR_MOMENTUM_XY=10,o.OFFSET_POSITION_X=0,o.OFFSET_POSITION_Y=1,o.OFFSET_POSITION_Z=2,o.OFFSET_ATTITUDE_A=3,o.OFFSET_ATTITUDE_YZ=4,o.OFFSET_ATTITUDE_ZX=5,o.OFFSET_ATTITUDE_XY=6,o.OFFSET_LINEAR_MOMENTUM_X=7,o.OFFSET_LINEAR_MOMENTUM_Y=8,o.OFFSET_LINEAR_MOMENTUM_Z=9,o.OFFSET_ANGULAR_MOMENTUM_YZ=10,o.OFFSET_ANGULAR_MOMENTUM_ZX=11,o.OFFSET_ANGULAR_MOMENTUM_XY=12,b.Physics3=o,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=o}),b("davinci-newton/solvers/RungeKutta",["require","exports","../util/zeroArray"],function(a,b,c){"use strict";var d=function(){function a(a){this.sim_=a,this.inp_=[],this.k1_=[],this.k2_=[],this.k3_=[],this.k4_=[]}return a.prototype.step=function(a){var b=this.sim_.getState(),d=b.length;this.inp_.length<d&&(this.inp_=new Array(d),this.k1_=new Array(d),this.k2_=new Array(d),this.k3_=new Array(d),this.k4_=new Array(d));for(var e=this.inp_,f=this.k1_,g=this.k2_,h=this.k3_,i=this.k4_,j=0;j<d;j++)e[j]=b[j];c["default"](f),this.sim_.evaluate(e,f,0);for(var j=0;j<d;j++)e[j]=b[j]+f[j]*a/2;c["default"](g),this.sim_.evaluate(e,g,a/2);for(var j=0;j<d;j++)e[j]=b[j]+g[j]*a/2;c["default"](h),this.sim_.evaluate(e,h,a/2);for(var j=0;j<d;j++)e[j]=b[j]+h[j]*a;c["default"](i),this.sim_.evaluate(e,i,a);for(var j=0;j<d;j++)b[j]+=(f[j]+2*g[j]+2*h[j]+i[j])*a/6;this.sim_.setState(b)},a}();b.RungeKutta=d,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-newton/util/getSystemTime",["require","exports"],function(a,b){"use strict";function c(){return.001*Date.now()}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-newton/runner/Clock",["require","exports","../util/AbstractSubject","../util/GenericEvent","../util/getSystemTime"],function(a,b,c,d,e){"use strict";var g=function(a){function b(){var b=a.call(this)||this;return b.clockStart_sys_secs_=e["default"](),b.isRunning_=!1,b.saveTime_secs_=0,b.saveRealTime_secs_=0,b.stepMode_=!1,b.tasks_=[],b.timeRate_=1,b.realStart_sys_secs_=b.clockStart_sys_secs_,b}return f(b,a),b.prototype.clearStepMode=function(){this.stepMode_=!1},b.prototype.getTime=function(){return this.isRunning_?(e["default"]()-this.clockStart_sys_secs_)*this.timeRate_:this.saveTime_secs_},b.prototype.resume=function(){this.clearStepMode(),this.isRunning_||(this.isRunning_=!0,this.setTimePrivate(this.saveTime_secs_),this.setRealTime(this.saveRealTime_secs_),this.broadcast(new d["default"](this,b.CLOCK_RESUME)))},b.prototype.setTime=function(a){this.setTimePrivate(a),this.broadcast(new d["default"](this,b.CLOCK_SET_TIME))},b.prototype.setTimePrivate=function(a){this.isRunning_?(this.clockStart_sys_secs_=e["default"]()-a/this.timeRate_,this.scheduleAllClockTasks()):this.saveTime_secs_=a},b.prototype.scheduleAllClockTasks=function(){var a=this;this.tasks_.forEach(function(b){a.scheduleTask(b)})},b.prototype.scheduleTask=function(a){if(a.cancel(),this.isRunning_){var b=this.clockToSystem(this.getTime()),c=this.clockToSystem(a.getTime());c>=b&&a.schedule(c-b)}},b.prototype.setRealTime=function(a){this.isRunning_?this.realStart_sys_secs_=e["default"]()-a/this.timeRate_:this.saveRealTime_secs_=a},b.prototype.clockToSystem=function(a){return a/this.timeRate_+this.clockStart_sys_secs_},b}(c["default"]);g.CLOCK_RESUME="CLOCK_RESUME",g.CLOCK_SET_TIME="CLOCK_SET_TIME",b.Clock=g,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=g}),b("davinci-newton/runner/SimRunner",["require","exports","./Clock"],function(a,b,c){"use strict";var d=function(){function a(a,b){this.advanceStrategy_=a,this.clock_=new c["default"],this.timeStep_=a.getTimeStep()}return a.prototype.getClock=function(){return this.clock_},a.prototype.advanceToTargetTime=function(a,b){for(var c=a.getTime();c<b;){a.advance(this.timeStep_,this);var d=c;if(c=a.getTime(),c-d<=1e-15)throw new Error("SimRunner time did not advance")}},a.prototype.update=function(){var a=this.clock_.getTime(),b=this.advanceStrategy_.getTime();if(a>b+1||a<b-1){var c=b+this.timeStep_;this.clock_.setTime(c),this.clock_.setRealTime(c),a=c}var d=a,e=d-this.timeStep_/10;this.advanceToTargetTime(this.advanceStrategy_,e)},a.prototype.memorize=function(){},a}();b.SimRunner=d,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-newton/engine3D/Sphere3",["require","exports","../math/Matrix3","./RigidBody3"],function(a,b,c,d){"use strict";var e=function(a){function b(b){void 0===b&&(b=1);var c=a.call(this)||this;return c.radius_=1,c.radius_=b,c.updateInertiaTensor(),c}return f(b,a),Object.defineProperty(b.prototype,"radius",{get:function(){return this.radius_},set:function(a){this.radius!==a&&(this.radius_=a,this.updateInertiaTensor())},enumerable:!0,configurable:!0}),b.prototype.updateInertiaTensor=function(){var a=this.radius_,b=a*a,d=2*this.M*b/5,e=c["default"].zero();e.setElement(0,0,d),e.setElement(1,1,d),e.setElement(2,2,d),this.I=e},b}(d["default"]);b.Sphere3=e,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-newton/engine3D/Spring3",["require","exports","../objects/AbstractSimObject","../model/CoordType","./Force3","../math/Vec3","../math/Vector3"],function(a,b,c,d,e,g,h){"use strict";var i=function(a){function b(b,c){var f=a.call(this)||this;return f.body1_=b,f.body2_=c,f.restLength_=1,f.stiffness_=1,f.attach1_=g["default"].ORIGIN,f.attach2_=g["default"].ORIGIN,f.forces=[],f.end1_=new h["default"],f.end2_=new h["default"],f.F1=new e["default"](f.body1_),f.F1.locationCoordType=d["default"].WORLD,f.F1.vectorCoordType=d["default"].WORLD,f.F2=new e["default"](f.body2_),f.F2.locationCoordType=d["default"].WORLD,f.F2.vectorCoordType=d["default"].WORLD,f.forces=[f.F1,f.F2],f}return f(b,a),b.prototype.computeBody1AttachPointInWorldCoords=function(a){if(null==this.attach1_||null==this.body1_)throw new Error;this.body1_.localPointToWorldPoint(this.attach1_,a)},b.prototype.computeBody2AttachPointInWorldCoords=function(a){if(null==this.attach2_||null==this.body2_)throw new Error;this.body2_.localPointToWorldPoint(this.attach2_,a)},Object.defineProperty(b.prototype,"attach1",{get:function(){return this.attach1_},set:function(a){this.attach1_=g["default"].fromVector(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"attach2",{get:function(){return this.attach2_},set:function(a){this.attach2_=g["default"].fromVector(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"end1",{get:function(){return this.computeBody1AttachPointInWorldCoords(this.end1_),g["default"].fromVector(this.end1_)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"end2",{get:function(){return this.computeBody2AttachPointInWorldCoords(this.end2_),g["default"].fromVector(this.end2_)},enumerable:!0,configurable:!0}),b.prototype.updateForces=function(){this.computeBody1AttachPointInWorldCoords(this.F1.location),this.computeBody2AttachPointInWorldCoords(this.F2.location);var a=this.F1.location.distanceTo(this.F2.location),b=this.stiffness_*(a-this.restLength_)/a;return this.F1.vector.copy(this.F2.location).subtract(this.F1.location).mulByScalar(b),this.F2.vector.copy(this.F1.vector).neg(),this.forces},b.prototype.disconnect=function(){},b.prototype.potentialEnergy=function(){this.computeBody1AttachPointInWorldCoords(this.F1.location),this.computeBody2AttachPointInWorldCoords(this.F2.location);var a=this.F2.location.distanceTo(this.F1.location)-this.restLength_;return.5*this.stiffness_*a*a},b}(c["default"]);b.Spring3=i,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=i}),b("davinci-newton",["require","exports","./davinci-newton/solvers/AdaptiveStepSolver","./davinci-newton/view/AlignH","./davinci-newton/view/AlignV","./davinci-newton/graph/AxisChoice","./davinci-newton/engine3D/Block3","./davinci-newton/util/CircularList","./davinci-newton/config","./davinci-newton/engine3D/ConstantForceLaw3","./davinci-newton/model/CoordType","./davinci-newton/engine3D/Cylinder3","./davinci-newton/strategy/DefaultAdvanceStrategy","./davinci-newton/graph/DisplayGraph","./davinci-newton/view/DrawingMode","./davinci-newton/solvers/EulerMethod","./davinci-newton/engine3D/Force3","./davinci-newton/graph/Graph","./davinci-newton/graph/GraphLine","./davinci-newton/engine3D/GravitationLaw3","./davinci-newton/view/LabCanvas","./davinci-newton/math/Matrix3","./davinci-newton/solvers/ModifiedEuler","./davinci-newton/engine3D/RigidBody3","./davinci-newton/engine3D/Physics3","./davinci-newton/solvers/RungeKutta","./davinci-newton/runner/SimRunner","./davinci-newton/view/SimView","./davinci-newton/engine3D/Sphere3","./davinci-newton/engine3D/Spring3","./davinci-newton/core/VarsList","./davinci-newton/math/Vec3","./davinci-newton/math/Vector3"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G){"use strict";var H={get LAST_MODIFIED(){return i["default"].LAST_MODIFIED},get VERSION(){return i["default"].VERSION},get AdaptiveStepSolver(){return c["default"]},get AlignH(){return d["default"]},get AlignV(){return e["default"]},get AxisChoice(){return f["default"]},get Block3(){return g["default"]},get CircularList(){return h["default"]},get ConstantForceLaw3(){return j["default"]},get CoordType(){return k["default"]},get Cylinder3(){return l["default"]},get DefaultAdvanceStrategy(){return m["default"]},get DisplayGraph(){return n["default"]},get DrawingMode(){return o["default"]},get EulerMethod(){return p["default"]},get Force3(){return q["default"]},get Graph(){return r["default"]},get GraphLine(){return s["default"]},get GravitationLaw3(){return t["default"]},get LabCanvas(){return u["default"]},get Matrix3(){return v["default"]},get ModifiedEuler(){return w["default"]},get Physics3(){return y["default"]},get RigidBody3(){return x["default"]},get RungeKutta(){return z["default"]},get SimRunner(){return A["default"]},get SimView(){return B["default"]},get Sphere3(){return C["default"]},get Spring3(){return D["default"]},get VarsList(){return E["default"]},get Vec3(){return F["default"]},get Vector3(){return G["default"]}};Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=H});var g=d("davinci-newton")["default"];"undefined"!=typeof module&&module.exports?module.exports=g:e?!function(a){a(function(){return g})}(e):a.NEWTON=g}(this);