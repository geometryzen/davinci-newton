/*! davinci-newton 2021-03-07 */
System.register("davinci-newton/config.js",[],function(a,b){"use strict";var c,d;b&&b.id;return{setters:[],execute:function(){c=function(){function a(){this.GITHUB="https://github.com/geometryzen/davinci-newton",this.LAST_MODIFIED="2021-03-05",this.NAMESPACE="NEWTON",this.VERSION="1.0.16"}return a.prototype.log=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];console.log(a)},a.prototype.info=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];console.log(a)},a.prototype.warn=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];console.warn(a)},a.prototype.error=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];console.error(a)},a}(),a("config",d=new c)}}}),System.register("davinci-newton/core/CoulombLaw.js",["../model/CoordType","../objects/AbstractSimObject","./Force"],function(a,b){"use strict";var c,d,e,f,g=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(a){function b(b,d,f){var g=a.call(this)||this;g.body1_=b,g.body2_=d,g.forces=[],g.metric=b.metric;var h=g.metric;return g.F1=new e.Force(g.body1_,h),g.F1.locationCoordType=c.WORLD,g.F1.vectorCoordType=c.WORLD,g.F2=new e.Force(g.body2_,h),g.F2.locationCoordType=c.WORLD,g.F2.vectorCoordType=c.WORLD,g.k=f,g.forces=[g.F1,g.F2],g.potentialEnergy_=h.zero(),g.potentialEnergyLock_=h.lock(g.potentialEnergy_),g}return g(b,a),b.prototype.updateForces=function(){var a=this.F1.location,b=this.F2.location,c=this.metric;return c.copyVector(this.body1_.X,a),c.subVector(a,this.body2_.X),c.copyVector(a,b),c.quaditude(b,!0),c.direction(a,!0),c.mulByScalar(a,c.a(this.k),c.uom(this.k)),c.mulByScalar(a,c.a(this.body1_.Q),c.uom(this.body1_.Q)),c.mulByScalar(a,c.a(this.body2_.Q),c.uom(this.body2_.Q)),c.copyVector(a,this.F1.vector),c.divByScalar(this.F1.vector,c.a(b),c.uom(b)),c.copyVector(this.F1.vector,this.F2.vector),c.neg(this.F2.vector),c.copyVector(this.body1_.X,this.F1.location),c.copyVector(this.body2_.X,this.F2.location),this.forces},b.prototype.disconnect=function(){},b.prototype.potentialEnergy=function(){var a=this.metric;a.unlock(this.potentialEnergy_,this.potentialEnergyLock_);var b=this.F1.location,c=this.F2.location;return a.copyScalar(a.a(this.k),a.uom(this.k),b),a.mulByScalar(b,a.a(this.body1_.Q),a.uom(this.body1_.Q)),a.mulByScalar(b,a.a(this.body2_.Q),a.uom(this.body2_.Q)),a.copyVector(this.body1_.X,c),a.subVector(c,this.body2_.X),a.magnitude(c,!0),a.copyScalar(a.a(b),a.uom(b),this.potentialEnergy_),a.divByScalar(this.potentialEnergy_,a.a(c),a.uom(c)),a.copyVector(this.body1_.X,this.F1.location),a.copyVector(this.body2_.X,this.F2.location),this.potentialEnergyLock_=a.lock(this.potentialEnergy_),this.potentialEnergy_},b}(d.AbstractSimObject),a("CoulombLaw",f)}}}),System.register("davinci-newton/core/Particle.js",["./RigidBody"],function(a,b){"use strict";var c,d,e=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a}],execute:function(){d=function(a){function b(b,c,d){var e=a.call(this,d)||this;return e.M=b,e.Q=c,e}return e(b,a),b.prototype.updateAngularVelocity=function(){throw new Error},b.prototype.updateInertiaTensor=function(){},b}(c.RigidBody),a("Particle",d)}}}),System.register("davinci-newton/engine2D/Block2.js",["../core/RigidBody","../math/Geometric2","../math/Mat1","../math/Unit","./Euclidean2"],function(a,b){"use strict";var c,d,e,f,g,h,i=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(a){function b(b,c){void 0===b&&(b=d.Geometric2.one),void 0===c&&(c=d.Geometric2.one);var e=a.call(this,new g.Euclidean2)||this;return e.width_=d.Geometric2.copy(b),e.widthLock_=e.width_.lock(),e.height_=d.Geometric2.copy(c),e.heightLock_=e.height_.lock(),e.updateInertiaTensor(),e}return i(b,a),Object.defineProperty(b.prototype,"width",{get:function(){return this.width_},set:function(a){this.width_.unlock(this.widthLock_),this.width_.copy(a),this.widthLock_=this.width_.lock(),this.updateInertiaTensor()},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"height",{get:function(){return this.height_},set:function(a){this.height_.unlock(this.heightLock_),this.height_.copy(a),this.heightLock_=this.height_.lock(),this.updateInertiaTensor()},enumerable:!1,configurable:!0}),b.prototype.updateAngularVelocity=function(){var a=this.width_,b=this.height_,c=a.a*a.a,d=b.a*b.a,e=12/this.M.a;this.Ω.xy=e*this.L.xy/(c+d),this.Ω.uom=f.Unit.div(f.Unit.div(this.L.uom,this.M.uom),f.Unit.mul(a.uom,a.uom))},b.prototype.updateInertiaTensor=function(){var a=this.width_,b=this.height_,c=a.a*a.a,d=b.a*b.a,g=this.M.a*(d+c)/12,h=new e.Mat1(g);h.uom=f.Unit.mul(this.M.uom,f.Unit.mul(a.uom,a.uom)),this.I=h},b}(c.RigidBody),a("Block2",h)}}}),System.register("davinci-newton/engine2D/ConstantForceLaw2.js",["../core/ConstantForceLaw","../model/CoordType"],function(a,b){"use strict";var c,d,e,f=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function b(b,c,e){return void 0===e&&(e=d.WORLD),a.call(this,b,c,e)||this}return f(b,a),b}(c.ConstantForceLaw),a("ConstantForceLaw2",e)}}}),System.register("davinci-newton/engine2D/Disc2.js",["../core/RigidBody","../math/Geometric2","../math/Mat1","../math/Unit","./Euclidean2"],function(a,b){"use strict";var c,d,e,f,g,h,i=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(a){function b(b){void 0===b&&(b=d.Geometric2.one);var c=a.call(this,new g.Euclidean2)||this;return c.radius_=d.Geometric2.fromScalar(b),c.radiusLock_=c.radius_.lock(),c.updateInertiaTensor(),c}return i(b,a),Object.defineProperty(b.prototype,"radius",{get:function(){return this.radius_},set:function(a){this.radius_.unlock(this.radiusLock_),this.radius_.copyScalar(a.a,a.uom),this.radiusLock_=this.radius_.lock(),this.updateInertiaTensor()},enumerable:!1,configurable:!0}),b.prototype.updateAngularVelocity=function(){this.Ω.copyScalar(this.radius_.a,this.radius_.uom),this.Ω.quaditude(!0),this.Ω.mulByScalar(this.M.a,this.M.uom),this.Ω.mulByNumber(.5),this.Ω.inv(),this.Ω.mulByBivector(this.L)},b.prototype.updateInertiaTensor=function(){var a=this.radius_,b=.5*this.M.a*a.a*a.a,c=new e.Mat1(b);c.uom=f.Unit.mul(this.M.uom,f.Unit.mul(a.uom,a.uom)),this.I=c},b}(c.RigidBody),a("Disc2",h)}}}),System.register("davinci-newton/engine2D/Force2.js",["../core/Force"],function(a,b){"use strict";var c,d,e=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a}],execute:function(){d=function(a){function b(b){return a.call(this,b,b.metric)||this}return e(b,a),b}(c.Force),a("Force2",d)}}}),System.register("davinci-newton/engine2D/GravitationForceLaw2.js",["../core/GravitationLaw","../math/Geometric2"],function(a,b){"use strict";var c,d,e,f=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function b(b,c){return a.call(this,b,c,d.Geometric2.one)||this}return f(b,a),b}(c.GravitationLaw),a("GravitationForceLaw2",e)}}}),System.register("davinci-newton/engine2D/Dynamics2.js",["../core/Dynamics","../core/VarsList"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){a("INDEX_TOTAL_LINEAR_MOMENTUM_X",e=c.INDEX_RESERVED_LAST+1),a("INDEX_TOTAL_LINEAR_MOMENTUM_Y",f=c.INDEX_RESERVED_LAST+2),a("INDEX_TOTAL_ANGULAR_MOMENTUM_XY",g=c.INDEX_RESERVED_LAST+3),a("OFFSET_POSITION_X",h=0),a("OFFSET_POSITION_Y",i=1),a("OFFSET_ATTITUDE_A",j=2),a("OFFSET_ATTITUDE_XY",k=3),a("OFFSET_LINEAR_MOMENTUM_X",l=4),a("OFFSET_LINEAR_MOMENTUM_Y",m=5),a("OFFSET_ANGULAR_MOMENTUM_XY",n=6),o=[d.VarsList.TIME,"translational kinetic energy","rotational kinetic energy","potential energy","total energy","total linear momentum - x","total linear momentum - y","total angular momentum - xy"],p=[c.INDEX_TRANSLATIONAL_KINETIC_ENERGY,c.INDEX_ROTATIONAL_KINETIC_ENERGY,c.INDEX_POTENTIAL_ENERGY,c.INDEX_TOTAL_ENERGY,e,f,g],q=function(){function a(){}return a.prototype.numVariablesPerBody=function(){return 7},a.prototype.getVarNames=function(){return o},a.prototype.getOffsetName=function(a){switch(a){case h:return"position x";case i:return"position y";case j:return"attitude a";case k:return"attitude xy";case l:return"linear momentum x";case m:return"linear momentum y";case n:return"angular momentum xy"}throw new Error("getVarName("+a+")")},a.prototype.discontinuousEnergyVariables=function(){return p},a.prototype.epilog=function(a,b,d,h){for(var i=d.a,j=0,k=0,l=0,m=0,n=0,o=a,p=o.length,q=0;q<p;q++){var r=o[q];isFinite(r.M.a)&&(j+=r.rotationalEnergy().a,k+=r.translationalEnergy().a,l+=r.P.x,m+=r.P.y,n+=r.X.x*r.P.y-r.X.y*r.P.x,n+=r.L.xy)}for(var s=b,t=s.length,q=0;q<t;q++)i+=s[q].potentialEnergy().a;h.setValue(c.INDEX_TRANSLATIONAL_KINETIC_ENERGY,k,!0),h.setValue(c.INDEX_ROTATIONAL_KINETIC_ENERGY,j,!0),h.setValue(c.INDEX_POTENTIAL_ENERGY,i,!0),h.setValue(c.INDEX_TOTAL_ENERGY,k+j+i,!0),h.setValue(e,l,!0),h.setValue(f,m,!0),h.setValue(g,n,!0)},a.prototype.updateVarsFromBody=function(a,b,c){c.setValue(h+b,a.X.x),c.setValue(i+b,a.X.y),c.setValue(j+b,a.R.a),c.setValue(k+b,a.R.b),c.setValue(l+b,a.P.x),c.setValue(m+b,a.P.y),c.setValue(n+b,a.L.b)},a.prototype.addForce=function(a,b,c){a[b+l]+=c.x,a[b+m]+=c.y},a.prototype.addTorque=function(a,b,c){a[b+n]+=c.b},a.prototype.updateBody=function(a,b,c){c.X.a=0,c.X.x=a[b+h],c.X.y=a[b+i],c.X.b=0,c.R.a=a[b+j],c.R.x=0,c.R.y=0,c.R.b=a[b+k];var d=c.R,e=Math.sqrt(d.a*d.a+d.b*d.b);c.R.a=c.R.a/e,c.R.b=c.R.b/e,c.P.a=0,c.P.x=a[b+l],c.P.y=a[b+m],c.P.b=0,c.L.a=0,c.L.x=0,c.L.y=0,c.L.b=a[b+n],c.updateAngularVelocity()},a.prototype.setPositionRateOfChange=function(a,b,c){var d=c.P,e=c.M.a;a[b+h]=d.x/e,a[b+i]=d.y/e},a.prototype.setAttitudeRateOfChange=function(a,b,c){var d=c.R,e=c.Ω;a[b+j]=.5*(e.xy*d.xy),a[b+k]=-.5*(e.xy*d.a)},a.prototype.zeroLinearMomentum=function(a,b){a[b+l]=0,a[b+m]=0},a.prototype.zeroAngularMomentum=function(a,b){a[b+n]=0},a}(),a("Dynamics2",q)}}}),System.register("davinci-newton/math/Mat1.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){c=function(){function a(a){this.value=a}return Object.defineProperty(a.prototype,"dimensions",{get:function(){return 1},enumerable:!1,configurable:!0}),a.prototype.getElement=function(a,b){if(0===a&&0===b)return this.value;throw new Error("row and column must both b zero.")},a}(),a("Mat1",c)}}}),System.register("davinci-newton/engine2D/Euclidean2.js",["../math/Geometric2","../math/Mat1"],function(a,b){"use strict";var c,d,e;b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(){function a(){}return a.prototype.a=function(a){return a.a},a.prototype.add=function(a,b){return a.add(b)},a.prototype.addVector=function(a,b){return a.addVector(b)},a.prototype.applyMatrix=function(a,b){throw new Error("applyMatrix(mv, matrix) method not implemented.")},a.prototype.copy=function(a,b){return b.copy(a)},a.prototype.copyBivector=function(a,b){return b.copyBivector(a)},a.prototype.copyMatrix=function(a){if(1!==a.dimensions)throw new Error("matrix dimensions must be 1.");var b=a.getElement(0,0);return new d.Mat1(b)},a.prototype.copyVector=function(a,b){return b.copyVector(a)},a.prototype.copyScalar=function(a,b,c){return c.copyScalar(a,b)},a.prototype.direction=function(a,b){return a.direction(b)},a.prototype.divByScalar=function(a,b,c){return a.divByScalar(b,c)},a.prototype.identityMatrix=function(){return new d.Mat1(1)},a.prototype.invertMatrix=function(a){if(1!==a.dimensions)throw new Error("matrix dimensions must be 1.");var b=a.getElement(0,0);return new d.Mat1(1/b)},a.prototype.isZero=function(a){return a.isZero()},a.prototype.lock=function(a){return a.lock()},a.prototype.magnitude=function(a,b){return a.magnitude(b)},a.prototype.mulByNumber=function(a,b){return a.mulByNumber(b)},a.prototype.mulByScalar=function(a,b,c){return a.mulByScalar(b,c)},a.prototype.mulByVector=function(a,b){return a.mulByVector(b)},a.prototype.neg=function(a){return a.neg()},a.prototype.quaditude=function(a,b){return a.quaditude(b)},a.prototype.rev=function(a){return a.rev()},a.prototype.rotate=function(a,b){return a.rotate(b)},a.prototype.scalar=function(a,b){return c.Geometric2.scalar(a,b)},a.prototype.scp=function(a,b){return a.scp(b)},a.prototype.setUom=function(a,b){a.uom=b},a.prototype.sub=function(a,b){return a.sub(b)},a.prototype.subScalar=function(a,b){return a.subScalar(b)},a.prototype.subVector=function(a,b){return a.subVector(b)},a.prototype.unlock=function(a,b){a.unlock(b)},a.prototype.uom=function(a){return a.uom},a.prototype.ext=function(a,b){return a.ext(b)},a.prototype.write=function(a,b){a.write(b)},a.prototype.writeVector=function(a,b){a.writeVector(b)},a.prototype.zero=function(){return c.Geometric2.zero.clone()},a}(),a("Euclidean2",e)}}}),System.register("davinci-newton/engine2D/Physics2.js",["../core/State","./Dynamics2","./Euclidean2"],function(a,b){"use strict";var c,d,e,f,g=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(a){function b(){return a.call(this,new e.Euclidean2,new d.Dynamics2)||this}return g(b,a),b}(c.State),a("Physics2",f)}}}),System.register("davinci-newton/engine2D/Spring2.js",["../core/Spring"],function(a,b){"use strict";var c,d,e=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a}],execute:function(){d=function(a){function b(b,c){return a.call(this,b,c)||this}return e(b,a),b}(c.Spring),a("Spring2",d)}}}),System.register("davinci-newton/engine3D/Block3.js",["../math/Geometric3","../math/Matrix3","../math/Unit","../core/RigidBody","./Euclidean3"],function(a,b){"use strict";var c,d,e,f,g,h,i=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(a){function b(b,d,e){void 0===b&&(b=c.Geometric3.one),void 0===d&&(d=c.Geometric3.one),void 0===e&&(e=c.Geometric3.one);var f=a.call(this,new g.Euclidean3)||this;return f.width_=c.Geometric3.copy(b),f.widthLock_=f.width_.lock(),f.height_=c.Geometric3.copy(d),f.heightLock_=f.height_.lock(),f.depth_=c.Geometric3.copy(e),f.depthLock_=f.depth_.lock(),f.updateInertiaTensor(),f}return i(b,a),Object.defineProperty(b.prototype,"width",{get:function(){return this.width_},set:function(a){this.width_.unlock(this.widthLock_),this.width_.copy(a),this.widthLock_=this.width_.lock(),this.updateInertiaTensor()},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"height",{get:function(){return this.height_},set:function(a){this.height_.unlock(this.heightLock_),this.height_.copy(a),this.heightLock_=this.height_.lock(),this.updateInertiaTensor()},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"depth",{get:function(){return this.depth_},set:function(a){this.depth_.unlock(this.depthLock_),this.depth_.copy(a),this.depthLock_=this.depth_.lock(),this.updateInertiaTensor()},enumerable:!1,configurable:!0}),b.prototype.updateAngularVelocity=function(){var a=this.width_,b=this.height_,c=this.depth_,d=a.a*a.a,f=b.a*b.a,g=c.a*c.a,h=12/this.M.a;this.Ω.yz=h*this.L.yz/(f+g),this.Ω.zx=h*this.L.zx/(d+g),this.Ω.xy=h*this.L.xy/(d+f),this.Ω.uom=e.Unit.div(e.Unit.div(this.L.uom,this.M.uom),e.Unit.mul(a.uom,a.uom))},b.prototype.updateInertiaTensor=function(){var a=this.width_,b=this.height_,c=this.depth_,f=a.a*a.a,g=b.a*b.a,h=c.a*c.a,i=this.M.a/12,j=d.Matrix3.zero();j.setElement(0,0,i*(g+h)),j.setElement(1,1,i*(h+f)),j.setElement(2,2,i*(f+g)),j.uom=e.Unit.mul(this.M.uom,e.Unit.mul(a.uom,a.uom)),this.I=j},b}(f.RigidBody),a("Block3",h)}}}),System.register("davinci-newton/core/ConstantForceLaw.js",["../model/CoordType","../objects/AbstractSimObject","./Force"],function(a,b){"use strict";var c,d,e,f,g=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(a){function b(b,d,f){void 0===f&&(f=c.WORLD);var g=a.call(this)||this;g.$body=b,g.$forces=[];var h=g.$body.metric;return g.$force=new e.Force(g.$body,h),g.$force.locationCoordType=c.LOCAL,h.copyVector(d,g.$force.vector),g.$force.vectorCoordType=f,g.$forces=[g.$force],g.$potentialEnergy=h.zero(),g.$potentialEnergyLock=h.lock(g.$potentialEnergy),g}return g(b,a),Object.defineProperty(b.prototype,"location",{get:function(){return this.$force.location},set:function(a){var b=this.$body.metric;b.copyVector(a,this.$force.location)},enumerable:!1,configurable:!0}),b.prototype.updateForces=function(){return this.$forces},b.prototype.disconnect=function(){},b.prototype.potentialEnergy=function(){var a=this.$body.metric;return a.unlock(this.$potentialEnergy,this.$potentialEnergyLock),this.$potentialEnergyLock=a.lock(this.$potentialEnergy),this.$potentialEnergy},b}(d.AbstractSimObject),a("ConstantForceLaw",f)}}}),System.register("davinci-newton/engine3D/ConstantForceLaw3.js",["../core/ConstantForceLaw","../model/CoordType"],function(a,b){"use strict";var c,d,e,f=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function b(b,c,e){return void 0===e&&(e=d.WORLD),a.call(this,b,c,e)||this}return f(b,a),b}(c.ConstantForceLaw),a("ConstantForceLaw3",e)}}}),System.register("davinci-newton/engine3D/Cylinder3.js",["../core/RigidBody","../math/Geometric3","../math/Matrix3","../math/Unit","./Euclidean3"],function(a,b){"use strict";var c,d,e,f,g,h,i=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(a){function b(b,c){void 0===b&&(b=d.Geometric3.one),void 0===c&&(c=d.Geometric3.one);var e=a.call(this,new g.Euclidean3)||this;return e.radius_=d.Geometric3.copy(b),e.radiusLock_=e.radius_.lock(),e.height_=d.Geometric3.copy(c),e.heightLock_=e.height_.lock(),e.updateInertiaTensor(),e}return i(b,a),Object.defineProperty(b.prototype,"radius",{get:function(){return this.radius_},set:function(a){this.radius_.unlock(this.radiusLock_),this.radius_.copy(a),this.radiusLock_=this.radius_.lock(),this.updateInertiaTensor()},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"height",{get:function(){return this.height_},set:function(a){this.height.unlock(this.heightLock_),this.height_.copy(a),this.heightLock_=this.height_.lock(),this.updateInertiaTensor()},enumerable:!1,configurable:!0}),b.prototype.updateInertiaTensor=function(){var a=this.radius_,b=this.height_,c=a.a*a.a,d=b.a*b.a,g=this.M.a*(3*c+d)/12,h=this.M.a*c/2,i=e.Matrix3.zero();i.setElement(0,0,g),i.setElement(1,1,h),i.setElement(2,2,g),i.uom=f.Unit.mul(this.M.uom,f.Unit.mul(a.uom,b.uom)),this.I=i},b}(c.RigidBody),a("Cylinder3",h)}}}),System.register("davinci-newton/engine3D/Force3.js",["../core/Force"],function(a,b){"use strict";var c,d,e=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a}],execute:function(){d=function(a){function b(b){return a.call(this,b,b.metric)||this}return e(b,a),b}(c.Force),a("Force3",d)}}}),System.register("davinci-newton/core/GravitationLaw.js",["../model/CoordType","../objects/AbstractSimObject","./Force"],function(a,b){"use strict";var c,d,e,f,g=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(a){function b(b,d,f){var g=a.call(this)||this;g.body1_=b,g.body2_=d,g.forces=[],g.metric=b.metric;var h=g.metric;return g.F1=new e.Force(g.body1_,h),g.F1.locationCoordType=c.WORLD,g.F1.vectorCoordType=c.WORLD,g.F2=new e.Force(g.body2_,h),g.F2.locationCoordType=c.WORLD,g.F2.vectorCoordType=c.WORLD,g.G=f,g.forces=[g.F1,g.F2],g.potentialEnergy_=h.zero(),g.potentialEnergyLock_=h.lock(g.potentialEnergy_),g}return g(b,a),b.prototype.updateForces=function(){var a=this.F1.location,b=this.F2.location,c=this.metric;return c.copyVector(this.body2_.X,a),c.subVector(a,this.body1_.X),c.copyVector(a,b),c.quaditude(b,!0),c.direction(a,!0),c.mulByScalar(a,c.a(this.G),c.uom(this.G)),c.mulByScalar(a,c.a(this.body1_.M),c.uom(this.body1_.M)),c.mulByScalar(a,c.a(this.body2_.M),c.uom(this.body2_.M)),c.copyVector(a,this.F1.vector),c.divByScalar(this.F1.vector,c.a(b),c.uom(b)),c.copyVector(this.F1.vector,this.F2.vector),c.neg(this.F2.vector),c.copyVector(this.body1_.X,this.F1.location),c.copyVector(this.body2_.X,this.F2.location),this.forces},b.prototype.disconnect=function(){},b.prototype.potentialEnergy=function(){var a=this.metric;a.unlock(this.potentialEnergy_,this.potentialEnergyLock_);var b=this.F1.location,c=this.F2.location;return a.copyScalar(a.a(this.G),a.uom(this.G),b),a.mulByScalar(b,a.a(this.body1_.M),a.uom(this.body1_.M)),a.mulByScalar(b,a.a(this.body2_.M),a.uom(this.body2_.M)),a.neg(b),a.copyVector(this.body1_.X,c),a.subVector(c,this.body2_.X),a.magnitude(c,!0),a.copyScalar(a.a(b),a.uom(b),this.potentialEnergy_),a.divByScalar(this.potentialEnergy_,a.a(c),a.uom(c)),a.copyVector(this.body1_.X,this.F1.location),a.copyVector(this.body2_.X,this.F2.location),this.potentialEnergyLock_=a.lock(this.potentialEnergy_),this.potentialEnergy_},b}(d.AbstractSimObject),a("GravitationLaw",f)}}}),System.register("davinci-newton/engine3D/GravitationForceLaw3.js",["../core/GravitationLaw","../math/Geometric3"],function(a,b){"use strict";var c,d,e,f=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function b(b,c){return a.call(this,b,c,d.Geometric3.one)||this}return f(b,a),b}(c.GravitationLaw),a("GravitationForceLaw3",e)}}}),System.register("davinci-newton/core/SimList.js",["../checks/mustBeNonNullObject","../util/AbstractSubject","../util/contains","../util/GenericEvent","../util/remove"],function(a,b){"use strict";var c,d,e,f,g,h,i=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(a){function b(){var b=a.call(this)||this;return b.elements_=[],b}return i(b,a),b.prototype.add=function(a){for(var d=0;d<arguments.length;d++){var g=arguments[d];c["default"]("element",g),e["default"](this.elements_,g)||(this.elements_.push(g),this.broadcast(new f["default"](this,b.OBJECT_ADDED,g)))}},b.prototype.forEach=function(a){return this.elements_.forEach(a)},b.prototype.remove=function(a){g["default"](this.elements_,a)&&this.broadcast(new f["default"](this,b.OBJECT_REMOVED,a))},b.prototype.removeTemporary=function(a){for(var c=this.elements_.length-1;c>=0;c--){var d=this.elements_[c];d.expireTime<a&&(this.elements_.splice(c,1),this.broadcast(new f["default"](this,b.OBJECT_REMOVED,d)))}},b.OBJECT_ADDED="OBJECT_ADDED",b.OBJECT_REMOVED="OBJECT_REMOVED",b}(d["default"]),a("SimList",h),a("default",h)}}}),System.register("davinci-newton/core/State.js",["./SimList","./VarsList","../math/Unit","../util/AbstractSubject","../util/contains","../util/remove"],function(a,b){"use strict";var c,d,e,f,g,h,i,j=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i=function(a){function b(b,e){var f=a.call(this)||this;return f.metric=b,f.dynamics=e,f.simList_=new c["default"],f.bodies_=[],f.forceLaws_=[],f.showForces_=!1,f.varsList_=new d.VarsList(e.getVarNames()),f.potentialOffset_=b.zero(),f.force_=b.zero(),f.torque_=b.zero(),f.totalEnergy_=b.zero(),f.totalEnergyLock_=b.lock(f.totalEnergy_),f.numVariablesPerBody=e.numVariablesPerBody(),f}return j(b,a),Object.defineProperty(b.prototype,"showForces",{get:function(){return this.showForces_},set:function(a){this.showForces_=a},enumerable:!1,configurable:!0}),b.prototype.addBody=function(a){if(!g["default"](this.bodies_,a)){for(var b=this.dynamics,c=[],d=0;d<this.numVariablesPerBody;d++)c.push(b.getOffsetName(d));a.varsIndex=this.varsList_.addVariables(c),this.bodies_.push(a),this.simList_.add(a)}this.updateFromBody(a),this.discontinuosChangeToEnergy()},b.prototype.removeBody=function(a){g["default"](this.bodies_,a)&&(this.varsList_.deleteVariables(a.varsIndex,this.numVariablesPerBody),h["default"](this.bodies_,a),a.varsIndex=-1),this.simList_.remove(a),this.discontinuosChangeToEnergy()},b.prototype.addForceLaw=function(a){g["default"](this.forceLaws_,a)||this.forceLaws_.push(a),this.discontinuosChangeToEnergy()},b.prototype.removeForceLaw=function(a){a.disconnect(),this.discontinuosChangeToEnergy(),h["default"](this.forceLaws_,a)},b.prototype.discontinuosChangeToEnergy=function(){var a,b=this.dynamics;(a=this.varsList_).incrSequence.apply(a,b.discontinuousEnergyVariables())},b.prototype.updateBodies=function(a){for(var b=this.dynamics,c=this.bodies_,d=c.length,e=0;e<d;e++){var f=c[e],g=f.varsIndex;if(g<0)return;b.updateBody(a,g,f)}},b.prototype.prolog=function(){this.simList.removeTemporary(this.varsList.getTime())},b.prototype.getState=function(){return this.varsList_.getValues()},b.prototype.setState=function(a){this.varsList.setValues(a,!0)},b.prototype.evaluate=function(a,b,c,d){var e=this.metric,f=this.dynamics;this.updateBodies(a);for(var g=this.bodies_,h=g.length,i=0;i<h;i++){var j=g[i],k=j.varsIndex;if(k<0)return;var l=e.a(j.M);if(l===Number.POSITIVE_INFINITY)for(var m=0;m<this.numVariablesPerBody;m++)b[k+m]=0;else f.setPositionRateOfChange(b,k,j),f.setAttitudeRateOfChange(b,k,j),f.zeroLinearMomentum(b,k),f.zeroAngularMomentum(b,k)}for(var n=this.forceLaws_,o=n.length,p=0;p<o;p++)for(var q=n[p],r=q.updateForces(),s=r.length,t=0;t<s;t++)this.applyForce(b,r[t],c,d);return b[this.varsList_.timeIndex()]=1,null},b.prototype.applyForce=function(a,b,c,d){var f=b.getBody();if(g["default"](this.bodies_,f)){var h=f.varsIndex;if(!(h<0)){var i=this.metric,j=this.dynamics;b.computeForce(this.force_);var k=this.force_;e.Unit.isOne(i.uom(f.P))&&i.isZero(f.P)&&i.setUom(f.P,e.Unit.mul(i.uom(k),d)),j.addForce(a,h,k),b.computeTorque(this.torque_);var l=this.torque_;e.Unit.isOne(i.uom(f.L))&&i.isZero(f.L)&&i.setUom(f.L,e.Unit.mul(i.uom(l),d)),j.addTorque(a,h,l),
this.showForces_&&(b.expireTime=this.varsList_.getTime(),this.simList_.add(b))}}},Object.defineProperty(b.prototype,"time",{get:function(){return this.varsList_.getTime()},enumerable:!1,configurable:!0}),b.prototype.updateFromBodies=function(){for(var a=this.bodies_,b=a.length,c=0;c<b;c++)this.updateFromBody(a[c]);this.discontinuosChangeToEnergy()},b.prototype.updateFromBody=function(a){var b=a.varsIndex;b>-1&&this.dynamics.updateVarsFromBody(a,b,this.varsList_)},b.prototype.epilog=function(){var a=(this.metric,this.varsList_),b=a.getValues();this.updateBodies(b);var c=this.dynamics;c.epilog(this.bodies_,this.forceLaws_,this.potentialOffset_,a)},Object.defineProperty(b.prototype,"bodies",{get:function(){return this.bodies_},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"simList",{get:function(){return this.simList_},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"varsList",{get:function(){return this.varsList_},enumerable:!1,configurable:!0}),b.prototype.totalEnergy=function(){var a=this.metric;a.unlock(this.totalEnergy_,this.totalEnergyLock_),a.write(a.zero(),this.totalEnergy_),a.add(this.totalEnergy_,this.potentialOffset_);for(var b=this.bodies_,c=b.length,d=0;d<c;d++){var e=b[d];isFinite(a.a(e.M))&&(a.add(this.totalEnergy_,e.rotationalEnergy()),a.add(this.totalEnergy_,e.translationalEnergy()))}for(var f=this.forceLaws_,g=f.length,d=0;d<g;d++)a.add(this.totalEnergy_,f[d].potentialEnergy());return this.totalEnergyLock_=a.lock(this.totalEnergy_),this.totalEnergy_},b}(f["default"]),a("State",i)}}}),System.register("davinci-newton/model/ConcreteVariable.js",["../util/toName","../util/validName"],function(a,b){"use strict";var c,d,e;b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(){function a(a,b){this.varsList_=a,this.value_=0,this.seq_=0,this.isComputed_=!1,this.doesBroadcast_=!1,this.name_=d["default"](c["default"](b))}return a.prototype.getBroadcast=function(){return this.doesBroadcast_},Object.defineProperty(a.prototype,"name",{get:function(){return this.name_},enumerable:!1,configurable:!0}),a.prototype.getSequence=function(){return this.seq_},a.prototype.getSubject=function(){return this.varsList_},a.prototype.getValue=function(){return this.value_},a.prototype.nameEquals=function(a){return this.name_===c["default"](a)},a.prototype.setBroadcast=function(a){this.doesBroadcast_=a},a.prototype.setComputed=function(a){this.isComputed_=a},a.prototype.setValue=function(a){this.value_!==a&&(this.value_=a,this.seq_++,this.doesBroadcast_&&this.varsList_.broadcast(this))},a.prototype.setValueSmooth=function(a){this.value_=a},a.prototype.incrSequence=function(){this.seq_++},a}(),a("ConcreteVariable",e)}}}),System.register("davinci-newton/util/extendArray.js",["../checks/isArray"],function(a,b){"use strict";function c(a,b,c){if(0!==b){if(b<0)throw new Error;var e=a.length;if(a.length=e+b,d["default"](c)){var f=c;if(f.length!==b)throw new Error;for(var g=e,h=a.length;g<h;g++)a[g]=c[g-e]}else for(var g=e,h=a.length;g<h;g++)a[g]=c}}var d;b&&b.id;return a("default",c),{setters:[function(a){d=a}],execute:function(){}}}),System.register("davinci-newton/core/VarsList.js",["../checks/isNumber","../checks/isString","../model/ConcreteVariable","../util/AbstractSubject","../util/clone","../util/extendArray","../util/find","../util/findIndex","../util/GenericEvent","../util/toName","../util/validName"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a}],execute:function(){n=function(a){function b(b){var c=a.call(this)||this;c.timeIdx_=-1,c.varList_=[],c.history_=!0,c.histArray_=[];var d=b.length;return 0!==d&&c.addVariables(b),c}return o(b,a),b.prototype.findOpenSlot_=function(a){for(var c=0,d=-1,f=0,g=this.varList_.length;f<g;f++)if(this.varList_[f].name===b.DELETED){if(d===-1&&(d=f),c++,c>=a)return d}else d=-1,c=0;var i;c>0?i=a-c:(d=this.varList_.length,i=a);for(var j=[],f=0;f<i;f++)j.push(new e.ConcreteVariable(this,b.DELETED));return h["default"](this.varList_,i,j),d},b.prototype.addVariables=function(a){var c=a.length;if(0===c)throw new Error;for(var d=this.findOpenSlot_(c),f=0;f<c;f++){var g=m["default"](l["default"](a[f]));if(g===b.DELETED)throw new Error("variable cannot be named '"+b.DELETED+"'");var h=d+f;this.varList_[h]=new e.ConcreteVariable(this,g),g===b.TIME&&(this.timeIdx_=h)}return this.broadcast(new k["default"](this,b.VARS_MODIFIED)),d},b.prototype.deleteVariables=function(a,c){if(0!==c){if(c<0||a<0||a+c>this.varList_.length)throw new Error("deleteVariables");for(var d=a;d<a+c;d++)this.varList_[d]=new e.ConcreteVariable(this,b.DELETED);this.broadcast(new k["default"](this,b.VARS_MODIFIED))}},b.prototype.incrSequence=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(0===arguments.length)for(var c=0,d=this.varList_.length;c<d;c++)this.varList_[c].incrSequence();else for(var c=0,d=arguments.length;c<d;c++){var e=arguments[c];this.checkIndex_(e),this.varList_[e].incrSequence()}},b.prototype.getValue=function(a){return this.checkIndex_(a),this.varList_[a].getValue()},b.prototype.getName=function(a){return this.checkIndex_(a),this.varList_[a].name},b.prototype.getSequence=function(a){return this.checkIndex_(a),this.varList_[a].getSequence()},b.prototype.getValues=function(){return this.varList_.map(function(a){return a.getValue()})},b.prototype.setValues=function(a,b){void 0===b&&(b=!1);var c=this.varList_.length,d=a.length;if(d>c)throw new Error("setValues bad length n = "+d+" > N = "+c);for(var e=0;e<c;e++)e<d&&this.setValue(e,a[e],b)},b.prototype.setValue=function(a,b,c){void 0===c&&(c=!1),this.checkIndex_(a);var d=this.varList_[a];if(isNaN(b))throw new Error("cannot set variable "+d.name+" to NaN");c?d.setValueSmooth(b):d.setValue(b)},b.prototype.checkIndex_=function(a){if(a<0||a>=this.varList_.length)throw new Error("bad variable index="+a+"; numVars="+this.varList_.length)},b.prototype.addVariable=function(a){var c=a.name;if(c===b.DELETED)throw new Error("variable cannot be named '"+b.DELETED+"'");var d=this.findOpenSlot_(1);return this.varList_[d]=a,c===b.TIME&&(this.timeIdx_=d),this.broadcast(new k["default"](this,b.VARS_MODIFIED)),d},b.prototype.getHistory=function(){return this.history_},b.prototype.getParameter=function(a){a=l["default"](a);var b=i["default"](this.varList_,function(b){return b.name===a});if(null!=b)return b;throw new Error("Parameter not found "+a)},b.prototype.getParameters=function(){return g["default"](this.varList_)},b.prototype.getTime=function(){if(this.timeIdx_<0)throw new Error("no time variable");return this.getValue(this.timeIdx_)},b.prototype.getVariable=function(a){var b;if(c["default"](a))b=a;else{if(!d["default"](a))throw new Error;if(a=l["default"](a),b=j["default"](this.varList_,function(b){return b.name===a}),b<0)throw new Error("unknown variable name "+a)}return this.checkIndex_(b),this.varList_[b]},b.prototype.numVariables=function(){return this.varList_.length},b.prototype.saveHistory=function(){if(this.history_){var a=this.getValues();a.push(this.getTime()),this.histArray_.push(a),this.histArray_.length>20&&this.histArray_.shift()}},b.prototype.setComputed=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];for(var c=0,d=arguments.length;c<d;c++){var e=arguments[c];this.checkIndex_(e),this.varList_[e].setComputed(!0)}},b.prototype.setHistory=function(a){this.history_=a},b.prototype.setTime=function(a){this.setValue(this.timeIdx_,a)},b.prototype.timeIndex=function(){return this.timeIdx_},b.prototype.toArray=function(){return g["default"](this.varList_)},b.DELETED="DELETED",b.TIME="TIME",b.VARS_MODIFIED="VARS_MODIFIED",b}(f["default"]),a("VarsList",n)}}}),System.register("davinci-newton/math/wedge3.js",[],function(a,b){"use strict";function c(a,b){return a.y*b.z-a.z*b.y}function d(a,b){return a.z*b.x-a.x*b.z}function e(a,b){return a.x*b.y-a.y*b.x}b&&b.id;return a("wedgeYZ",c),a("wedgeZX",d),a("wedgeXY",e),{setters:[],execute:function(){}}}),System.register("davinci-newton/engine3D/Dynamics3.js",["../core/Dynamics","../core/VarsList","../math/wedge3"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){a("INDEX_TOTAL_LINEAR_MOMENTUM_X",f=c.INDEX_RESERVED_LAST+1),a("INDEX_TOTAL_LINEAR_MOMENTUM_Y",g=c.INDEX_RESERVED_LAST+2),a("INDEX_TOTAL_LINEAR_MOMENTUM_Z",h=c.INDEX_RESERVED_LAST+3),a("INDEX_TOTAL_ANGULAR_MOMENTUM_YZ",i=c.INDEX_RESERVED_LAST+4),a("INDEX_TOTAL_ANGULAR_MOMENTUM_ZX",j=c.INDEX_RESERVED_LAST+5),a("INDEX_TOTAL_ANGULAR_MOMENTUM_XY",k=c.INDEX_RESERVED_LAST+6),a("OFFSET_POSITION_X",l=0),a("OFFSET_POSITION_Y",m=1),a("OFFSET_POSITION_Z",n=2),a("OFFSET_ATTITUDE_A",o=3),a("OFFSET_ATTITUDE_YZ",p=4),a("OFFSET_ATTITUDE_ZX",q=5),a("OFFSET_ATTITUDE_XY",r=6),a("OFFSET_LINEAR_MOMENTUM_X",s=7),a("OFFSET_LINEAR_MOMENTUM_Y",t=8),a("OFFSET_LINEAR_MOMENTUM_Z",u=9),a("OFFSET_ANGULAR_MOMENTUM_YZ",v=10),a("OFFSET_ANGULAR_MOMENTUM_ZX",w=11),a("OFFSET_ANGULAR_MOMENTUM_XY",x=12),y=[d.VarsList.TIME,"translational kinetic energy","rotational kinetic energy","potential energy","total energy","total linear momentum - x","total linear momentum - y","total linear momentum - z","total angular momentum - yz","total angular momentum - zx","total angular momentum - xy"],z=[c.INDEX_TRANSLATIONAL_KINETIC_ENERGY,c.INDEX_ROTATIONAL_KINETIC_ENERGY,c.INDEX_POTENTIAL_ENERGY,c.INDEX_TOTAL_ENERGY,f,g,h,i,j,k],A=function(){function a(){}return a.prototype.numVariablesPerBody=function(){return 13},a.prototype.getVarNames=function(){return y},a.prototype.getOffsetName=function(a){switch(a){case l:return"position x";case m:return"position y";case n:return"position z";case o:return"attitude a";case p:return"attitude yz";case q:return"attitude zx";case r:return"attitude xy";case s:return"linear momentum x";case t:return"linear momentum y";case u:return"linear momentum z";case v:return"angular momentum yz";case w:return"angular momentum zx";case x:return"angular momentum xy"}throw new Error("getVarName("+a+")")},a.prototype.discontinuousEnergyVariables=function(){return z},a.prototype.epilog=function(a,b,d,l){for(var m=d.a,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=a,w=v.length,x=0;x<w;x++){var y=v[x];isFinite(y.M.a)&&(n+=y.rotationalEnergy().a,o+=y.translationalEnergy().a,p+=y.P.x,q+=y.P.y,r+=y.P.z,s+=e.wedgeYZ(y.X,y.P),t+=e.wedgeZX(y.X,y.P),u+=e.wedgeXY(y.X,y.P),s+=y.L.yz,t+=y.L.zx,u+=y.L.xy)}for(var z=b,A=z.length,x=0;x<A;x++)m+=z[x].potentialEnergy().a;l.setValue(c.INDEX_TRANSLATIONAL_KINETIC_ENERGY,o,!0),l.setValue(c.INDEX_ROTATIONAL_KINETIC_ENERGY,n,!0),l.setValue(c.INDEX_POTENTIAL_ENERGY,m,!0),l.setValue(c.INDEX_TOTAL_ENERGY,o+n+m,!0),l.setValue(f,p,!0),l.setValue(g,q,!0),l.setValue(h,r,!0),l.setValue(i,s,!0),l.setValue(j,t,!0),l.setValue(k,u,!0)},a.prototype.updateVarsFromBody=function(a,b,c){c.setValue(l+b,a.X.x),c.setValue(m+b,a.X.y),c.setValue(n+b,a.X.z),c.setValue(o+b,a.R.a),c.setValue(r+b,a.R.xy),c.setValue(p+b,a.R.yz),c.setValue(q+b,a.R.zx),c.setValue(s+b,a.P.x),c.setValue(t+b,a.P.y),c.setValue(u+b,a.P.z),c.setValue(x+b,a.L.xy),c.setValue(v+b,a.L.yz),c.setValue(w+b,a.L.zx)},a.prototype.addForce=function(a,b,c){a[b+s]+=c.x,a[b+t]+=c.y,a[b+u]+=c.z},a.prototype.addTorque=function(a,b,c){a[b+v]+=c.yz,a[b+w]+=c.zx,a[b+x]+=c.xy},a.prototype.updateBody=function(a,b,c){c.X.x=a[b+l],c.X.y=a[b+m],c.X.z=a[b+n],c.R.a=a[b+o],c.R.xy=a[b+r],c.R.yz=a[b+p],c.R.zx=a[b+q];var d=c.R,e=Math.sqrt(d.a*d.a+d.xy*d.xy+d.yz*d.yz+d.zx*d.zx);c.R.a=c.R.a/e,c.R.xy=c.R.xy/e,c.R.yz=c.R.yz/e,c.R.zx=c.R.zx/e,c.P.x=a[b+s],c.P.y=a[b+t],c.P.z=a[b+u],c.L.xy=a[b+x],c.L.yz=a[b+v],c.L.zx=a[b+w],c.updateAngularVelocity()},a.prototype.setPositionRateOfChange=function(a,b,c){var d=c.P,e=c.M.a;a[b+l]=d.x/e,a[b+m]=d.y/e,a[b+n]=d.z/e},a.prototype.setAttitudeRateOfChange=function(a,b,c){var d=c.R,e=c.Ω;a[b+o]=.5*(e.xy*d.xy+e.yz*d.yz+e.zx*d.zx),a[b+p]=-.5*(e.yz*d.a+e.xy*d.zx-e.zx*d.xy),a[b+q]=-.5*(e.zx*d.a+e.yz*d.xy-e.xy*d.yz),a[b+r]=-.5*(e.xy*d.a+e.zx*d.yz-e.yz*d.zx)},a.prototype.zeroLinearMomentum=function(a,b){a[b+s]=0,a[b+t]=0,a[b+u]=0},a.prototype.zeroAngularMomentum=function(a,b){a[b+x]=0,a[b+v]=0,a[b+w]=0},a}(),a("Dynamics3",A)}}}),System.register("davinci-newton/engine3D/Physics3.js",["../core/State","./Dynamics3","./Euclidean3"],function(a,b){"use strict";var c,d,e,f,g=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(a){function b(){return a.call(this,new e.Euclidean3,new d.Dynamics3)||this}return g(b,a),b}(c.State),a("Physics3",f)}}}),System.register("davinci-newton/checks/mustBeFunction.js",["../checks/mustSatisfy","../checks/isFunction"],function(a,b){"use strict";function c(){return"be a function"}function d(a,b,d){return e["default"](a,f["default"](b),c,d),b}var e,f;b&&b.id;return a("default",d),{setters:[function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-newton/core/RigidBody.js",["../checks/mustBeFunction","../checks/mustBeNonNullObject","../checks/mustBeNumber","../math/Unit","../objects/AbstractSimObject","./assertConsistentUnits","./mustBeDimensionlessOrCorrectUnits"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){j=function(a){function b(b){var c=a.call(this)||this;return c.metric=b,c.varsIndex_=-1,c.mass_=b.scalar(1),c.massLock_=b.lock(c.mass_),c.charge_=b.zero(),c.chargeLock_=b.lock(c.charge_),c.position_=b.zero(),c.attitude_=b.scalar(1),c.linearMomentum_=b.zero(),c.angularMomentum_=b.zero(),c.angularVelocity_=b.zero(),c.rotationalEnergy_=b.zero(),c.rotationalEnergyLock_=b.lock(c.rotationalEnergy_),c.translationalEnergy_=b.zero(),c.translationalEnergyLock_=b.lock(c.translationalEnergy_),c.worldPoint_=b.zero(),c.Ω_scratch=b.zero(),c.centerOfMassLocal_=b.zero(),c.centerOfMassLocalLock_=b.lock(c.centerOfMassLocal_),c.inertiaTensorInverse_=b.identityMatrix(),c}return k(b,a),Object.defineProperty(b.prototype,"centerOfMassLocal",{get:function(){return this.centerOfMassLocal_},set:function(a){this.metric.unlock(this.centerOfMassLocal_,this.centerOfMassLocalLock_),this.metric.copyVector(a,this.centerOfMassLocal_),this.centerOfMassLocalLock_=this.metric.lock(this.centerOfMassLocal_)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"M",{get:function(){return this.mass_},set:function(a){i.mustBeDimensionlessOrCorrectUnits("M",a,f.Unit.KILOGRAM,this.metric),this.metric.unlock(this.mass_,this.massLock_),this.metric.copy(a,this.mass_),this.massLock_=this.metric.lock(this.mass_),this.updateInertiaTensor()},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"Q",{get:function(){return this.charge_},set:function(a){i.mustBeDimensionlessOrCorrectUnits("Q",a,f.Unit.COULOMB,this.metric),this.metric.unlock(this.charge_,this.chargeLock_),this.metric.copy(a,this.charge_),this.chargeLock_=this.metric.lock(this.charge_)},enumerable:!1,configurable:!0}),b.prototype.updateAngularVelocity=function(){this.metric.copy(this.L,this.Ω),this.metric.rev(this.R),this.metric.rotate(this.Ω,this.R),this.metric.copy(this.Ω,this.Ω_scratch),this.metric.applyMatrix(this.Ω_scratch,this.Iinv),this.metric.copyBivector(this.Ω_scratch,this.Ω),this.metric.rev(this.R),this.metric.rotate(this.Ω,this.R)},b.prototype.updateInertiaTensor=function(){},Object.defineProperty(b.prototype,"I",{get:function(){return this.metric.invertMatrix(this.inertiaTensorInverse_)},set:function(a){this.inertiaTensorInverse_=this.metric.invertMatrix(a)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"Iinv",{get:function(){return this.inertiaTensorInverse_},set:function(a){d["default"]("Iinv",a),e["default"]("dimensions",a.dimensions),c["default"]("getElement",a.getElement),this.inertiaTensorInverse_=this.metric.copyMatrix(a)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"X",{get:function(){return this.position_},set:function(a){i.mustBeDimensionlessOrCorrectUnits("position",a,f.Unit.METER,this.metric),this.metric.copy(a,this.position_)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"R",{get:function(){return this.attitude_},set:function(a){i.mustBeDimensionlessOrCorrectUnits("attitude",a,f.Unit.ONE,this.metric),this.metric.copy(a,this.attitude_)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"P",{get:function(){return this.linearMomentum_},set:function(a){i.mustBeDimensionlessOrCorrectUnits("momentum",a,f.Unit.KILOGRAM_METER_PER_SECOND,this.metric),this.metric.copy(a,this.linearMomentum_)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"L",{get:function(){return this.angularMomentum_},set:function(a){i.mustBeDimensionlessOrCorrectUnits("angularMomentum",a,f.Unit.JOULE_SECOND,this.metric),this.metric.copy(a,this.angularMomentum_)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"Ω",{get:function(){return this.angularVelocity_},set:function(a){i.mustBeDimensionlessOrCorrectUnits("angularVelocity",a,f.Unit.INV_SECOND,this.metric),this.metric.copy(a,this.angularVelocity_)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"expireTime",{get:function(){return Number.POSITIVE_INFINITY},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"varsIndex",{get:function(){return this.varsIndex_},set:function(a){this.varsIndex_=a},enumerable:!1,configurable:!0}),b.prototype.rotationalEnergy=function(){return h.assertConsistentUnits("Ω",this.Ω,"L",this.L,this.metric),this.metric.unlock(this.rotationalEnergy_,this.rotationalEnergyLock_),this.metric.copyBivector(this.Ω,this.rotationalEnergy_),this.metric.rev(this.rotationalEnergy_),this.metric.scp(this.rotationalEnergy_,this.L),this.metric.mulByNumber(this.rotationalEnergy_,.5),this.rotationalEnergyLock_=this.metric.lock(this.rotationalEnergy_),this.rotationalEnergy_},b.prototype.translationalEnergy=function(){return h.assertConsistentUnits("M",this.M,"P",this.P,this.metric),this.metric.unlock(this.translationalEnergy_,this.translationalEnergyLock_),this.metric.copyVector(this.P,this.translationalEnergy_),this.metric.mulByVector(this.translationalEnergy_,this.P),this.metric.divByScalar(this.translationalEnergy_,this.metric.a(this.M),this.metric.uom(this.M)),this.metric.mulByNumber(this.translationalEnergy_,.5),this.translationalEnergyLock_=this.metric.lock(this.translationalEnergy_),this.translationalEnergy_},b.prototype.localPointToWorldPoint=function(a,b){this.metric.copyVector(a,this.worldPoint_),this.metric.subVector(this.worldPoint_,this.centerOfMassLocal_),this.metric.rotate(this.worldPoint_,this.attitude_),this.metric.addVector(this.worldPoint_,this.position_),this.metric.writeVector(this.worldPoint_,b)},b}(g.AbstractSimObject),a("RigidBody",j)}}}),System.register("davinci-newton/math/Mat3.js",["./Matrix3","./Unit"],function(a,b){"use strict";var c,d,e;b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(){function a(a){this.data=c.Matrix3.one();var b=a.getElement(0,0),e=a.getElement(0,1),f=a.getElement(0,2),g=a.getElement(1,0),h=a.getElement(1,1),i=a.getElement(1,2),j=a.getElement(2,0),k=a.getElement(2,1),l=a.getElement(2,2);this.data.set(b,e,f,g,h,i,j,k,l),this.uom=d.Unit.mustBeUnit("uom",a.uom)}return Object.defineProperty(a.prototype,"dimensions",{get:function(){return 3},enumerable:!1,configurable:!0}),a.prototype.getElement=function(a,b){return this.data.getElement(a,b)},a.prototype.row=function(a){return this.data.row(a)},a.prototype.toString=function(a){return this.data.toString(a)},a}(),a("Mat3",e)}}}),System.register("davinci-newton/engine3D/Euclidean3.js",["../math/Geometric3","../math/Mat3","../math/Matrix3"],function(a,b){"use strict";var c,d,e,f;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(){function a(){}return a.prototype.a=function(a){return a.a},a.prototype.add=function(a,b){return a.add(b)},a.prototype.addVector=function(a,b){return a.addVector(b)},a.prototype.applyMatrix=function(a,b){throw new Error("applyMatrix(mv, matrix) method not implemented.")},a.prototype.copy=function(a,b){return b.copy(a)},a.prototype.copyBivector=function(a,b){return b.copyBivector(a)},a.prototype.copyMatrix=function(a){return new d.Mat3(a)},a.prototype.copyVector=function(a,b){return b.copyVector(a)},a.prototype.copyScalar=function(a,b,c){return c.copyScalar(a,b)},a.prototype.direction=function(a,b){return a.direction(b)},a.prototype.divByScalar=function(a,b,c){return a.divByScalar(b,c)},a.prototype.identityMatrix=function(){return new d.Mat3(e.Matrix3.one())},a.prototype.invertMatrix=function(a){var b=e.Matrix3.zero().copy(a).inv();return new d.Mat3(b)},a.prototype.isZero=function(a){return a.isZero()},a.prototype.lock=function(a){return a.lock()},a.prototype.magnitude=function(a,b){return a.magnitude(b)},a.prototype.mulByNumber=function(a,b){return a.mulByNumber(b)},a.prototype.mulByScalar=function(a,b,c){return a.mulByScalar(b,c)},a.prototype.mulByVector=function(a,b){return a.mulByVector(b)},a.prototype.neg=function(a){return a.neg()},a.prototype.quaditude=function(a,b){return a.quaditude(b)},a.prototype.rev=function(a){return a.rev()},a.prototype.rotate=function(a,b){return a.rotate(b)},a.prototype.scalar=function(a,b){return c.Geometric3.scalar(a,b)},a.prototype.scp=function(a,b){return a.scp(b)},a.prototype.setUom=function(a,b){a.uom=b},a.prototype.sub=function(a,b){return a.sub(b)},a.prototype.subScalar=function(a,b){return a.subScalar(b)},a.prototype.subVector=function(a,b){return a.subVector(b)},a.prototype.unlock=function(a,b){a.unlock(b)},a.prototype.uom=function(a){return a.uom},a.prototype.ext=function(a,b){return a.ext(b)},a.prototype.write=function(a,b){a.write(b)},a.prototype.writeVector=function(a,b){a.writeVector(b)},a.prototype.zero=function(){return c.Geometric3.zero.clone()},a}(),a("Euclidean3",f)}}}),System.register("davinci-newton/engine3D/Sphere3.js",["../core/RigidBody","../math/Geometric3","../math/Matrix3","../math/Unit","./Euclidean3"],function(a,b){"use strict";var c,d,e,f,g,h,i=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(a){function b(b){void 0===b&&(b=d.Geometric3.one);var c=a.call(this,new g.Euclidean3)||this;return c.radius_=d.Geometric3.fromScalar(b),c.radiusLock_=c.radius_.lock(),c.updateInertiaTensor(),c}return i(b,a),Object.defineProperty(b.prototype,"radius",{get:function(){return this.radius_},set:function(a){this.radius_.unlock(this.radiusLock_),this.radius_.copyScalar(a.a,a.uom),this.radiusLock_=this.radius_.lock(),this.updateInertiaTensor()},enumerable:!1,configurable:!0}),b.prototype.updateAngularVelocity=function(){this.Ω.copyScalar(this.radius_.a,this.radius_.uom),this.Ω.quaditude(!0),this.Ω.mulByScalar(this.M.a,this.M.uom),this.Ω.mulByNumber(.4),this.Ω.inv(),this.Ω.mulByBivector(this.L)},b.prototype.updateInertiaTensor=function(){var a=this.radius_,b=2*this.M.a*a.a*a.a/5,c=e.Matrix3.zero();c.setElement(0,0,b),c.setElement(1,1,b),c.setElement(2,2,b),c.uom=f.Unit.mul(this.M.uom,f.Unit.mul(a.uom,a.uom)),this.I=c},b}(c.RigidBody),a("Sphere3",h)}}}),System.register("davinci-newton/core/assertConsistentUnits.js",["../math/Unit"],function(a,b){"use strict";function c(a,b,c,e,f){if(!f.isZero(b)&&!f.isZero(e))if(d.Unit.isOne(f.uom(b))){if(!d.Unit.isOne(f.uom(e)))throw new Error(a+" => "+b+" must have dimensions if "+c+" => "+e+" has dimensions.")}else if(d.Unit.isOne(f.uom(e)))throw new Error(c+" => "+e+" must have dimensions if "+a+" => "+b+" has dimensions.")}var d;b&&b.id;return a("assertConsistentUnits",c),{setters:[function(a){d=a}],execute:function(){}}}),System.register("davinci-newton/objects/AbstractSimObject.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){c=function(){function a(){this.expireTime_=Number.POSITIVE_INFINITY}return Object.defineProperty(a.prototype,"expireTime",{get:function(){return this.expireTime_},set:function(a){this.expireTime_=a},enumerable:!1,configurable:!0}),a}(),a("AbstractSimObject",c)}}}),System.register("davinci-newton/core/Force.js",["../model/CoordType","../objects/AbstractSimObject"],function(a,b){"use strict";var c,d,e,f=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function b(b,c){var d=a.call(this)||this;return d.body_=b,d.metric=c,d.location=c.zero(),d.vector=c.zero(),d.position_=c.zero(),d.force_=c.zero(),d.torque_=c.zero(),d}return f(b,a),b.prototype.getBody=function(){return this.body_},b.prototype.computeForce=function(a){switch(this.vectorCoordType){case c.LOCAL:this.metric.copyVector(this.vector,this.force_),this.metric.rotate(this.force_,this.body_.R),this.metric.writeVector(this.force_,a);break;case c.WORLD:this.metric.copyVector(this.vector,this.force_),this.metric.writeVector(this.force_,a)}},Object.defineProperty(b.prototype,"F",{get:function(){return this.computeForce(this.force_),this.force_},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"x",{get:function(){return this.computePosition(this.position_),this.position_},enumerable:!1,configurable:!0}),b.prototype.computePosition=function(a){switch(this.locationCoordType){case c.LOCAL:this.metric.copyVector(this.location,this.position_),this.metric.rotate(this.position_,this.body_.R),this.metric.addVector(this.position_,this.body_.X),this.metric.writeVector(this.position_,a);break;case c.WORLD:this.metric.copyVector(this.location,this.position_),this.metric.writeVector(this.position_,a)}},b.prototype.computeTorque=function(a){this.computePosition(this.position_),this.computeForce(this.force_),this.metric.subVector(this.position_,this.body_.X),this.metric.ext(this.position_,this.force_),this.metric.write(this.position_,a)},b}(d.AbstractSimObject),a("Force",e)}}}),System.register("davinci-newton/core/mustBeDimensionlessOrCorrectUnits.js",["../math/Unit"],function(a,b){"use strict";function c(a,b,c,e){if(d.Unit.isOne(e.uom(b))||d.Unit.isCompatible(e.uom(b),c))return b;throw new Error(a+" unit of measure, "+e.uom(b)+", must be compatible with "+c)}var d;b&&b.id;return a("mustBeDimensionlessOrCorrectUnits",c),{setters:[function(a){d=a}],execute:function(){}}}),System.register("davinci-newton/core/Spring.js",["../math/Unit","../model/CoordType","../objects/AbstractSimObject","./assertConsistentUnits","./Force","./mustBeDimensionlessOrCorrectUnits"],function(a,b){"use strict";var c,d,e,f,g,h,i,j=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i=function(a){function b(b,c){var e=a.call(this)||this;e.body1_=b,e.body2_=c,e.forces=[],e.metric=b.metric;var f=e.metric;return e.$restLength=f.scalar(1),e.$restLengthLock=f.lock(e.$restLength),e.$stiffness=f.scalar(1),e.$stiffnessLock=f.lock(e.$stiffness),e.attach1_=f.zero(),e.attach1Lock=f.lock(e.attach1_),e.attach2_=f.zero(),e.attach2Lock=f.lock(e.attach2_),e.end1_=f.zero(),e.end1Lock_=f.lock(e.end1_),e.end2_=f.zero(),e.end2Lock_=f.lock(e.end2_),e.F1=new g.Force(e.body1_,f),e.F1.locationCoordType=d.WORLD,e.F1.vectorCoordType=d.WORLD,e.F2=new g.Force(e.body2_,f),e.F2.locationCoordType=d.WORLD,e.F2.vectorCoordType=d.WORLD,e.potentialEnergy_=f.zero(),e.potentialEnergyLock_=f.lock(e.potentialEnergy_),e.forces=[e.F1,e.F2],e}return j(b,a),Object.defineProperty(b.prototype,"restLength",{get:function(){return this.$restLength},set:function(a){h.mustBeDimensionlessOrCorrectUnits("restLength",a,c.Unit.METER,this.metric),this.metric.unlock(this.$restLength,this.$restLengthLock),this.metric.copy(a,this.$restLength),this.$restLengthLock=this.metric.lock(this.$restLength)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"stiffness",{get:function(){return this.$stiffness},set:function(a){h.mustBeDimensionlessOrCorrectUnits("stiffness",a,c.Unit.STIFFNESS,this.metric),this.metric.unlock(this.$stiffness,this.$stiffnessLock),this.metric.copy(a,this.$stiffness),this.$stiffnessLock=this.metric.lock(this.$stiffness)},enumerable:!1,configurable:!0}),b.prototype.computeBody1AttachPointInWorldCoords=function(a){if(null==this.attach1_||null==this.body1_)throw new Error;this.body1_.localPointToWorldPoint(this.attach1_,a)},b.prototype.computeBody2AttachPointInWorldCoords=function(a){if(null==this.attach2_||null==this.body2_)throw new Error;this.body2_.localPointToWorldPoint(this.attach2_,a)},Object.defineProperty(b.prototype,"attach1",{get:function(){return this.attach1_},set:function(a){this.metric.unlock(this.attach1_,this.attach1Lock),this.metric.copyVector(a,this.attach1_),this.attach1Lock=this.metric.lock(this.attach1_)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"attach2",{get:function(){return this.attach2_},set:function(a){this.metric.unlock(this.attach2_,this.attach2Lock),this.metric.copyVector(a,this.attach2_),this.attach2Lock=this.metric.lock(this.attach2_)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"end1",{get:function(){return this.metric.unlock(this.end1_,this.end1Lock_),this.computeBody1AttachPointInWorldCoords(this.end1_),this.end1Lock_=this.metric.lock(this.end1_),this.end1_},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"end2",{get:function(){return this.metric.unlock(this.end2_,this.end2Lock_),this.computeBody2AttachPointInWorldCoords(this.end2_),this.end2Lock_=this.metric.lock(this.end2_),this.end2_},enumerable:!1,configurable:!0}),b.prototype.updateForces=function(){this.computeBody1AttachPointInWorldCoords(this.F1.location),this.computeBody2AttachPointInWorldCoords(this.F2.location);
var a=this.metric;return a.copyVector(this.F2.location,this.F2.vector),a.subVector(this.F2.vector,this.F1.location),a.direction(this.F2.vector,!0),a.copyVector(this.F1.location,this.F1.vector),a.subVector(this.F1.vector,this.F2.location),a.magnitude(this.F1.vector,!0),a.subScalar(this.F1.vector,this.restLength),a.mulByScalar(this.F1.vector,a.a(this.stiffness),a.uom(this.stiffness)),a.mulByVector(this.F1.vector,this.F2.vector),this.metric.copyVector(this.F1.vector,this.F2.vector),this.metric.neg(this.F2.vector),this.forces},b.prototype.disconnect=function(){},b.prototype.potentialEnergy=function(){this.computeBody1AttachPointInWorldCoords(this.F1.location),this.computeBody2AttachPointInWorldCoords(this.F2.location);var a=this.metric;return this.metric.unlock(this.potentialEnergy_,this.potentialEnergyLock_),this.potentialEnergyLock_=-1,f.assertConsistentUnits("F1.location",this.F1.location,"F2.location",this.F2.location,this.metric),a.copyVector(this.F2.location,this.potentialEnergy_),a.subVector(this.potentialEnergy_,this.F1.location),a.magnitude(this.potentialEnergy_,!0),f.assertConsistentUnits("length",this.potentialEnergy_,"restLength",this.restLength,this.metric),a.sub(this.potentialEnergy_,this.restLength),a.quaditude(this.potentialEnergy_,!0),a.mulByScalar(this.potentialEnergy_,a.a(this.stiffness),a.uom(this.stiffness)),a.mulByNumber(this.potentialEnergy_,.5),this.potentialEnergyLock_=a.lock(this.potentialEnergy_),this.potentialEnergy_},b}(e.AbstractSimObject),a("Spring",i)}}}),System.register("davinci-newton/engine3D/Spring3.js",["../core/Spring"],function(a,b){"use strict";var c,d,e=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a}],execute:function(){d=function(a){function b(b,c){return a.call(this,b,c)||this}return e(b,a),b}(c.Spring),a("Spring3",d)}}}),System.register("davinci-newton/core/Dynamics.js",[],function(a,b){"use strict";var c,d,e,f,g,h;b&&b.id;return{setters:[],execute:function(){a("INDEX_TIME",c=0),a("INDEX_TRANSLATIONAL_KINETIC_ENERGY",d=1),a("INDEX_ROTATIONAL_KINETIC_ENERGY",e=2),a("INDEX_POTENTIAL_ENERGY",f=3),a("INDEX_TOTAL_ENERGY",g=4),a("INDEX_RESERVED_LAST",h=4)}}}),System.register("davinci-newton/graph/EnergyTimeGraph.js",["../core/Dynamics","../view/AlignH","../view/AlignV","./Graph"],function(a,b){"use strict";var c,d,e,f,g,h=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(a){function b(b,f){var g=a.call(this,b,f)||this;return g.translationalEnergyGraphLine=g.addGraphLine(c.INDEX_TIME,c.INDEX_TRANSLATIONAL_KINETIC_ENERGY,"red"),g.rotationalEnergyGraphLine=g.addGraphLine(c.INDEX_TIME,c.INDEX_ROTATIONAL_KINETIC_ENERGY,"yellow"),g.potentialEnergyGraphLine=g.addGraphLine(c.INDEX_TIME,c.INDEX_POTENTIAL_ENERGY,"blue"),g.totalEnergyGraphLine=g.addGraphLine(c.INDEX_TIME,c.INDEX_TOTAL_ENERGY,"white"),g.autoScale.timeWindow=5,g.autoScale.addGraphLine(g.translationalEnergyGraphLine),g.autoScale.addGraphLine(g.rotationalEnergyGraphLine),g.autoScale.addGraphLine(g.potentialEnergyGraphLine),g.autoScale.addGraphLine(g.totalEnergyGraphLine),g.axes.hAxisAlign=e.AlignV.BOTTOM,g.axes.vAxisAlign=d.AlignH.LEFT,g.axes.hAxisLabel="time",g.axes.vAxisLabel="energy",g}return h(b,a),b}(f.Graph),a("EnergyTimeGraph",g)}}}),System.register("davinci-newton/util/GenericObserver.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){c=function(){function a(a,b){this.subject_=a,a.addObserver(this),this.observeFn_=b}return a.prototype.disconnect=function(){this.subject_.removeObserver(this)},a.prototype.observe=function(a){this.observeFn_(a)},a}(),a("GenericObserver",c),a("default",c)}}}),System.register("davinci-newton/graph/AxisChoice.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){!function(a){a[a.HORIZONTAL=1]="HORIZONTAL",a[a.VERTICAL=2]="VERTICAL",a[a.BOTH=3]="BOTH"}(c||(c={})),a("AxisChoice",c)}}}),System.register("davinci-newton/graph/AutoScale.js",["../util/AbstractSubject","../util/contains","../util/GenericEvent","../util/ParameterNumber","../util/removeAt","../util/repeat","../util/veryDifferent","../view/DoubleRect","../view/SimView","./AxisChoice","./GraphLine"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a}],execute:function(){n=function(a){function b(c){var d=a.call(this)||this;d.graphLines_=[],d.enabled_=!0,d.isActive_=!0,d.ownEvent_=!1,d.rangeSetX_=!1,d.rangeSetY_=!1,d.rangeXHi_=0,d.rangeXLo_=0,d.rangeYHi_=0,d.rangeYLo_=0,d.timeWindow_=10,d.extraMargin=.01,d.minSize=1e-14,d.axisChoice_=l.AxisChoice.BOTH,d.simView_=c,c.addMemo(d),c.addObserver(d),d.lastIndex_=h["default"](-1,d.graphLines_.length),d.addParameter(new f["default"](d,b.TIME_WINDOW,function(){return d.timeWindow},function(a){return d.timeWindow=a}).setSignifDigits(3));var e=["VERTICAL","HORIZONTAL","BOTH"],g=[l.AxisChoice.VERTICAL,l.AxisChoice.HORIZONTAL,l.AxisChoice.BOTH];return d.addParameter(new f["default"](d,b.AXIS,function(){return d.axisChoice},function(a){return d.axisChoice=a},e,g)),d.setComputed(d.isActive_),d}return o(b,a),b.prototype.addGraphLine=function(a){if(!m.GraphLine.isDuckType(a))throw new Error("not a GraphLine "+a);d["default"](this.graphLines_,a)||(this.graphLines_.push(a),a.addObserver(this),this.lastIndex_.push(-1))},b.prototype.clearRange=function(){this.rangeXLo_=0,this.rangeXHi_=0,this.rangeSetX_=!1,this.rangeYLo_=0,this.rangeYHi_=0,this.rangeSetY_=!1},Object.defineProperty(b.prototype,"active",{get:function(){return this.isActive_},set:function(a){this.isActive_!==a&&(a?this.enabled_&&(this.reset(),this.simView_.addMemo(this),this.setComputed(!0),this.isActive_=!0,this.broadcast(new e["default"](this,b.ACTIVE,this.isActive_))):(this.simView_.removeMemo(this),this.setComputed(!1),this.isActive_=!1,this.broadcast(new e["default"](this,b.ACTIVE,this.isActive_))))},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"axisChoice",{get:function(){return this.axisChoice_},set:function(a){if(a!==l.AxisChoice.VERTICAL&&a!==l.AxisChoice.HORIZONTAL&&a!==l.AxisChoice.BOTH)throw new Error("unknown "+a);this.axisChoice_=a,this.broadcastParameter(b.AXIS)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"enabled",{get:function(){return this.enabled_},set:function(a){this.enabled_!==a&&(this.enabled_=a,this.active=a,this.broadcast(new e["default"](this,b.ENABLED,this.enabled_)))},enumerable:!1,configurable:!0}),b.prototype.getRangeRect=function(){return new j["default"](this.rangeXLo_,this.rangeYLo_,this.rangeXHi_,this.rangeYHi_)},Object.defineProperty(b.prototype,"timeWindow",{get:function(){return this.timeWindow_},set:function(a){i["default"](a,this.timeWindow_)&&(this.timeWindow_=a,this.reset(),this.active=!0,this.broadcastParameter(b.TIME_WINDOW))},enumerable:!1,configurable:!0}),b.prototype.memorize=function(){for(var a=0,b=this.graphLines_.length;a<b;a++){var c=this.graphLines_[a].getGraphPoints();this.lastIndex_[a]>c.getEndIndex()&&this.reset()}for(var a=0,b=this.graphLines_.length;a<b;a++)for(var c=this.graphLines_[a].getGraphPoints(),d=c.getIterator(this.lastIndex_[a]);d.hasNext();){var e=d.nextValue();this.updateRange_(this.graphLines_[a],e.x,e.y),this.lastIndex_[a]=d.getIndex()}this.rangeCheck_()},b.prototype.observe=function(a){a.getSubject()===this.simView_?a.nameEquals(k.SimView.SIM_RECT_CHANGED)&&(this.ownEvent_||(this.active=!1)):d["default"](this.graphLines_,a.getSubject())&&(a.nameEquals(m.GraphLine.PARAM_NAME_X_VARIABLE)||a.nameEquals(m.GraphLine.PARAM_NAME_Y_VARIABLE)?this.reset():a.nameEquals(m.GraphLine.RESET)&&(this.active=!0))},b.prototype.rangeCheck_=function(){var a=this.minSize;if(this.rangeXHi_-this.rangeXLo_<a){var c=(this.rangeXHi_+this.rangeXLo_)/2,d=Math.max(c*a,a);this.rangeXHi_=c+d,this.rangeXLo_=c-d}if(this.rangeYHi_-this.rangeYLo_<a){var c=(this.rangeYHi_+this.rangeYLo_)/2,d=Math.max(c*a,a);this.rangeYHi_=c+d,this.rangeYLo_=c-d}var f=this.getRangeRect(),g=this.simView_.getSimRect();this.axisChoice_===l.AxisChoice.VERTICAL?f=new j["default"](g.getLeft(),f.getBottom(),g.getRight(),f.getTop()):this.axisChoice_===l.AxisChoice.HORIZONTAL&&(f=new j["default"](f.getLeft(),g.getBottom(),f.getRight(),g.getTop())),this.isActive_&&!f.nearEqual(g)&&(this.ownEvent_=!0,this.simView_.setSimRect(f),this.ownEvent_=!1,this.broadcast(new e["default"](this,b.AUTO_SCALE,f)))},b.prototype.removeGraphLine=function(a){if(!m.GraphLine.isDuckType(a))throw new Error("not a GraphLine "+a);var b=this.graphLines_.indexOf(a);g["default"](this.graphLines_,b),g["default"](this.lastIndex_,b),this.reset()},b.prototype.reset=function(){this.clearRange();for(var a=0,b=this.lastIndex_.length;a<b;a++)this.lastIndex_[a]=-1},b.prototype.setComputed=function(a){var b=this,c=[k.SimView.PARAM_NAME_WIDTH,k.SimView.PARAM_NAME_HEIGHT,k.SimView.PARAM_NAME_CENTER_X,k.SimView.PARAM_NAME_CENTER_Y];c.forEach(function(c){var d=b.simView_.getParameter(c);d.setComputed(a)})},b.prototype.updateRange_=function(a,b,c){isFinite(b)||(b===Number.POSITIVE_INFINITY?b=1e308:b===Number.NEGATIVE_INFINITY&&(b=-1e308)),isFinite(c)||(c===Number.POSITIVE_INFINITY?c=1e308:c===Number.NEGATIVE_INFINITY&&(c=-1e308));var d=a.varsList.timeIndex(),e=a.hCoordIndex===d,f=a.vCoordIndex===d;this.rangeSetX_?(b<this.rangeXLo_&&(e?(this.rangeXLo_=b,this.rangeXHi_=b+this.timeWindow_):this.rangeXLo_=b-this.extraMargin*(this.rangeXHi_-this.rangeXLo_)),e?b>this.rangeXHi_-this.extraMargin*this.timeWindow_&&(this.rangeXHi_=b+this.extraMargin*this.timeWindow_,this.rangeXLo_=this.rangeXHi_-this.timeWindow_):b>this.rangeXHi_&&(this.rangeXHi_=b+this.extraMargin*(this.rangeXHi_-this.rangeXLo_))):(this.rangeXLo_=b,this.rangeXHi_=b+(e?this.timeWindow_:0),this.rangeSetX_=!0),this.rangeSetY_?(c<this.rangeYLo_&&(f?(this.rangeYLo_=c,this.rangeYHi_=c+this.timeWindow_):this.rangeYLo_=c-this.extraMargin*(this.rangeYHi_-this.rangeYLo_)),f?c>this.rangeYHi_-this.extraMargin*this.timeWindow_&&(this.rangeYHi_=c+this.extraMargin*this.timeWindow_,this.rangeYLo_=this.rangeYHi_-this.timeWindow_):c>this.rangeYHi_&&(this.rangeYHi_=c+this.extraMargin*(this.rangeYHi_-this.rangeYLo_))):(this.rangeYLo_=c,this.rangeYHi_=c+(f?this.timeWindow_:0),this.rangeSetY_=!0)},b.AXIS="AXIS",b.TIME_WINDOW="TIME_WINDOW",b.ACTIVE="ACTIVE",b.AUTO_SCALE="AUTO_SCALE",b.ENABLED="ENABLED",b}(c["default"]),a("default",n)}}}),System.register("davinci-newton/graph/DisplayAxes.js",["../checks/isDefined","../math/Unit","../view/AlignH","../view/AlignV","../view/DoubleRect"],function(a,b){"use strict";function c(a,b){return e.Unit.isOne(b)?a:a+" / ("+b+")"}var d,e,f,g,h,i;b&&b.id;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i=function(){function a(a,b,d){void 0===a&&(a=h["default"].EMPTY_RECT),void 0===b&&(b="14pt sans-serif"),void 0===d&&(d="gray"),this.simRect_=a,this.numFont_=b,this.drawColor_=d,this.fontDescent=8,this.fontAscent=12,this.hAxisAlign_=g.AlignV.BOTTOM,this.vAxisAlign_=f.AlignH.LEFT,this.numDecimal_=0,this.needRedraw_=!0,this.hLabel_="x",this.hLabelScaleCache_=c(this.hLabel_,this.hScale_),this.vLabel_="y",this.vLabelScaleCache_=c(this.vLabel_,this.vScale_),this.zIndex_=100}return a.prototype.draw=function(a,b){a.save(),a.strokeStyle=this.drawColor_,a.fillStyle=this.drawColor_,a.font=this.numFont_,a.textAlign="start",a.textBaseline="alphabetic";var c,d,e=this.simRect_,h=e.getLeft(),i=e.getRight(),j=e.getBottom(),k=e.getTop();switch(this.vAxisAlign_){case f.AlignH.RIGHT:c=b.simToScreenX(i-.05*(i-h));break;case f.AlignH.LEFT:c=b.simToScreenX(h+.05*(i-h));break;default:c=b.simToScreenX(e.getCenterX())}switch(this.hAxisAlign_){case g.AlignV.TOP:d=b.simToScreenY(k)+(10+this.fontDescent+this.fontAscent);break;case g.AlignV.BOTTOM:d=b.simToScreenY(j)-(10+this.fontDescent+this.fontAscent);break;default:d=b.simToScreenY(e.getCenterY())}a.beginPath(),a.moveTo(b.simToScreenX(h),d),a.lineTo(b.simToScreenX(i),d),a.stroke(),this.drawHorizTicks(d,a,b,this.simRect_),a.beginPath(),a.moveTo(c,b.simToScreenY(j)),a.lineTo(c,b.simToScreenY(k)),a.stroke(),this.drawVertTicks(c,a,b,this.simRect_),a.restore(),this.needRedraw_=!1},a.prototype.drawHorizTicks=function(b,c,d,e){for(var f=b-4,g=f+8,h=e.getLeft(),i=e.getRight(),j=this.getNiceIncrement(i-h),k=a.getNiceStart(h,j);k<i;){var l=d.simToScreenX(k);c.beginPath(),c.moveTo(l,f),c.lineTo(l,g),c.stroke();var m=k+j;if(!(m>k)){c.fillText("scale is too small",l,g+this.fontAscent);break}var n=k.toFixed(this.numDecimal_),o=c.measureText(n).width;c.fillText(n,l-o/2,g+this.fontAscent),k=m}var p=this.hLabelScaleCache_,q=c.measureText(p).width;c.fillText(p,d.simToScreenX(i)-q-5,b-8)},a.prototype.drawVertTicks=function(b,c,d,e){for(var g=b-4,h=g+8,i=e.getBottom(),j=e.getTop(),k=this.getNiceIncrement(j-i),l=a.getNiceStart(i,k);l<j;){var m=d.simToScreenY(l);c.beginPath(),c.moveTo(g,m),c.lineTo(h,m),c.stroke();var n=l+k;if(!(n>l)){c.fillText("scale is too small",h,m);break}var o=l.toFixed(this.numDecimal_),p=c.measureText(o).width;this.vAxisAlign_===f.AlignH.RIGHT?c.fillText(o,h-(p+10),m+this.fontAscent/2):c.fillText(o,h+5,m+this.fontAscent/2),l=n}var q=this.vLabelScaleCache_,r=c.measureText(q).width;this.vAxisAlign_===f.AlignH.RIGHT?c.fillText(q,b-(r+6),d.simToScreenY(j)+13):c.fillText(q,b+6,d.simToScreenY(j)+13)},Object.defineProperty(a.prototype,"color",{get:function(){return this.drawColor_},set:function(a){this.drawColor_=a,this.needRedraw_=!0},enumerable:!1,configurable:!0}),a.prototype.getFont=function(){return this.numFont_},Object.defineProperty(a.prototype,"hAxisLabel",{get:function(){return this.hLabel_},set:function(a){this.hLabel_=a,this.hLabelScaleCache_=c(this.hLabel_,this.hScale_),this.needRedraw_=!0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"hAxisScale",{get:function(){return this.hScale_},set:function(a){this.hScale_=a,this.hLabelScaleCache_=c(this.hLabel_,this.hScale_),this.needRedraw_=!0},enumerable:!1,configurable:!0}),a.prototype.getNiceIncrement=function(a){var b,c=Math.pow(10,Math.floor(Math.log(a)/Math.LN10)),d=a/c;b=d>=8?2:d>=5?1:d>=3?.5:d>=2?.4:.2,b*=c;var e=Math.log(b)/Math.LN10;return this.numDecimal_=e<0?Math.ceil(-e):0,b},a.getNiceStart=function(a,b){return Math.ceil(a/b)*b},a.prototype.getSimRect=function(){return this.simRect_},Object.defineProperty(a.prototype,"vAxisLabel",{get:function(){return this.vLabel_},set:function(a){this.vLabel_=a,this.vLabelScaleCache_=c(this.vLabel_,this.vScale_),this.needRedraw_=!0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"vAxisScale",{get:function(){return this.vScale_},set:function(a){this.vScale_=a,this.vLabelScaleCache_=c(this.vLabel_,this.vScale_),this.needRedraw_=!0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"hAxisAlign",{get:function(){return this.hAxisAlign_},set:function(a){this.hAxisAlign_=a,this.needRedraw_=!0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"vAxisAlign",{get:function(){return this.vAxisAlign_},set:function(a){this.vAxisAlign_=a,this.needRedraw_=!0},enumerable:!1,configurable:!0}),a.prototype.getZIndex=function(){return this.zIndex_},a.prototype.isDragable=function(){return!1},a.prototype.needsRedraw=function(){return this.needRedraw_},a.prototype.setDragable=function(a){},a.prototype.setFont=function(a){this.numFont_=a,this.needRedraw_=!0},a.prototype.setSimRect=function(a){this.simRect_=a,this.needRedraw_=!0},a.prototype.setZIndex=function(a){d["default"](a)&&(this.zIndex_=a)},a}(),a("default",i)}}}),System.register("davinci-newton/util/repeat.js",[],function(a,b){"use strict";function c(a,b){for(var c=[],d=0;d<b;d++)c[d]=a;return c}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/graph/DisplayGraph.js",["../checks/isDefined","../util/contains","../util/removeAt","../util/repeat","../view/DrawingMode","../view/ScreenRect","./GraphLine"],function(a,b){"use strict";var c,d,e,f,g,h,i,j;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){j=function(){function a(){this.graphLines_=[],this.memDraw_=f["default"](-1,this.graphLines_.length),this.offScreen_=null,this.lastMap_=null,this.screenRect_=h["default"].EMPTY_RECT,this.needRedraw_=!1,this.useBuffer_=!1,this.zIndex=0}return a.prototype.draw=function(a,b){if(!this.screenRect_.isEmpty()){var c=this.graphLines_,d=c.length;a.save(),null!=this.lastMap_&&this.lastMap_===b||(this.lastMap_=b,this.needRedraw_=!0);for(var e=0;e<d;e++)if(this.memDraw_[e]>c[e].getGraphPoints().getEndIndex()){this.reset();break}if(this.useBuffer_){var f=this.screenRect_.getWidth(),g=this.screenRect_.getHeight();null==this.offScreen_&&(this.offScreen_=document.createElement("canvas"),this.offScreen_.width=f,this.offScreen_.height=g,this.needRedraw_=!0);var h=this.offScreen_.getContext("2d");this.needRedraw_?(h.clearRect(0,0,f,g),this.fullDraw(h,b),this.needRedraw_=!1):this.incrementalDraw(h,b),a.drawImage(this.offScreen_,0,0,f,g)}else this.needRedraw_=!0,this.needRedraw_?(this.fullDraw(a,b),this.needRedraw_=!1):this.incrementalDraw(a,b);for(var e=0;e<d;e++)this.drawHotSpot(a,b,c[e]);a.restore()}},a.prototype.drawHotSpot=function(a,b,c){var d=c.getGraphPoints().getEndValue();if(null!=d){var e=b.simToScreenX(d.x),f=b.simToScreenY(d.y),g=c.hotspotColor;g&&(a.fillStyle=g,a.fillRect(e-2,f-2,5,5))}},a.prototype.drawPoints=function(a,b,c,d){var e=b.screenToSimRect(this.screenRect_),f=d.getGraphPoints().getIterator(c);if(!f.hasNext())return c;var h=f.nextValue(),i=d.getGraphStyle(f.getIndex());if(i.drawingMode===g.DrawingMode.DOTS){var j=b.simToScreenX(h.x),k=b.simToScreenY(h.y),l=i.lineWidth;a.fillStyle=i.color_,a.fillRect(j,k,l,l)}for(;f.hasNext();){var m=h;if(h=f.nextValue(),h.x!==m.x||h.y!==m.y){var n=d.getGraphStyle(f.getIndex()),o=h.seqX===m.seqX&&h.seqY===m.seqY;if(n.drawingMode!==g.DrawingMode.DOTS&&o){if(!e.maybeVisible(m,h))continue;var p=b.simToScreenX(m.x),q=b.simToScreenY(m.y),r=b.simToScreenX(h.x),s=b.simToScreenY(h.y);a.strokeStyle=n.color_,a.lineWidth=n.lineWidth,a.beginPath(),a.moveTo(p,q),a.lineTo(r,s),a.stroke()}else{if(!e.contains(h))continue;var j=b.simToScreenX(h.x),k=b.simToScreenY(h.y),l=n.lineWidth;a.fillStyle=n.color_,a.fillRect(j,k,l,l)}}}return f.getIndex()},a.prototype.fullDraw=function(a,b){this.memDraw_=f["default"](-1,this.graphLines_.length),this.incrementalDraw(a,b)},a.prototype.getZIndex=function(){return this.zIndex},a.prototype.setZIndex=function(a){this.zIndex=c["default"](a)?a:0},a.prototype.incrementalDraw=function(a,b){for(var c=0,d=this.graphLines_.length;c<d;c++)this.memDraw_[c]=this.drawPoints(a,b,this.memDraw_[c],this.graphLines_[c])},a.prototype.isDragable=function(){return!1},a.prototype.addGraphLine=function(a){if(!i.GraphLine.isDuckType(a))throw new Error("not a GraphLine "+a);d["default"](this.graphLines_,a)||(this.graphLines_.push(a),this.memDraw_.push(-1))},a.prototype.removeGraphLine=function(a){if(!i.GraphLine.isDuckType(a))throw new Error("not a GraphLine "+a);var b=this.graphLines_.indexOf(a);e["default"](this.graphLines_,b),e["default"](this.memDraw_,b),this.needRedraw_=!0},a.prototype.setDragable=function(a){},a.prototype.setScreenRect=function(a){this.screenRect_=a,this.offScreen_=null},a.prototype.setUseBuffer=function(a){this.useBuffer_=a,this.useBuffer_||(this.offScreen_=null)},a.prototype.reset=function(){var a=this.graphLines_,b=a.length;this.memDraw_=f["default"](-1,b);for(var c=0;c<b;c++)a[c].reset();this.needRedraw_=!0},a}(),a("DisplayGraph",j)}}}),System.register("davinci-newton/graph/Graph.js",["../checks/mustBeNumber","../checks/mustBeString","../util/AbstractSubject","../util/GenericObserver","../view/AlignH","../view/AlignV","../view/DoubleRect","../view/LabCanvas","../view/SimView","./AutoScale","./DisplayAxes","./DisplayGraph","./GraphLine"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a}],execute:function(){p=function(a){function b(b,c){var d=a.call(this)||this;d.varsList=c,d.view=new k.SimView(new i["default"](0,0,1,1)),d.autoScale=new l["default"](d.view);var e=document.getElementById(b);return d.labCanvas=new j.LabCanvas(e),d.view.hAxisAlign=g.AlignH.FULL,d.view.vAxisAlign=h.AlignV.FULL,d.labCanvas.addView(d.view),d.displayGraph=new n.DisplayGraph,d.displayGraph.setScreenRect(d.view.getScreenRect()),d.view.getDisplayList().prepend(d.displayGraph),d.timeIdx_=c.timeIndex(),d.axes=new m["default"](d.view.getSimRect()),d.subscription=new f["default"](d.view,function(a){if(a.nameEquals(k.SimView.COORD_MAP_CHANGED)){var b=d.view.getCoordMap().screenToSimRect(d.view.getScreenRect());d.axes.setSimRect(b)}}),d.view.getDisplayList().add(d.axes),d.autoScale.extraMargin=.05,d}return q(b,a),b.prototype.destructor=function(){this.subscription&&(this.subscription.disconnect(),this.subscription=void 0)},b.prototype.addGraphLine=function(a,b,e){void 0===e&&(e="black"),c["default"]("hCoordIndex",a),c["default"]("vCoordIndex",b),d["default"]("color",e);var f=new o.GraphLine(this.varsList);return this.view.addMemo(f),f.hCoordIndex=a,f.vCoordIndex=b,f.color=e,f.hotspotColor=e,this.displayGraph.addGraphLine(f),this.displayGraph.setUseBuffer(f.hCoordIndex!==this.timeIdx_),f},b.prototype.removeGraphLine=function(a){this.displayGraph.removeGraphLine(a)},b.prototype.memorize=function(){this.labCanvas.memorize()},b.prototype.render=function(){this.labCanvas.paint()},b.prototype.reset=function(){this.autoScale.reset(),this.displayGraph.reset()},b}(e["default"]),a("Graph",p)}}}),System.register("davinci-newton/graph/GraphPoint.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){c=function(){function a(a,b,c,d){this.x=a,this.y=b,this.seqX=c,this.seqY=d}return a.prototype.equals=function(a){return this.x===a.x&&this.y===a.y&&this.seqX===a.seqX&&this.seqY===a.seqY},a}(),a("default",c)}}}),System.register("davinci-newton/graph/GraphStyle.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){c=function(){function a(a,b,c,d){this.index_=a,this.drawingMode=b,this.color_=c,this.lineWidth=d}return a}(),a("GraphStyle",c)}}}),System.register("davinci-newton/graph/GraphLine.js",["../checks/isObject","../util/AbstractSubject","../util/CircularList","../util/GenericEvent","../util/ParameterNumber","../util/ParameterString","../util/veryDifferent","../view/DrawingMode","./GraphPoint","./GraphStyle"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a}],execute:function(){m=function(a){function b(c,d){var f=a.call(this)||this;return f.lineWidth_=1,f.hotspotColor_="red",f.styles_=[],f.varsList_=c,c.addObserver(f),f.xVar_=-1,f.yVar_=-1,f.xVarParam_=new g["default"](f,b.PARAM_NAME_X_VARIABLE,function(){return f.hCoordIndex},function(a){return f.hCoordIndex=a}),f.xVarParam_.setLowerLimit(-1),f.addParameter(f.xVarParam_),f.yVarParam_=new g["default"](f,b.PARAM_NAME_Y_VARIABLE,function(){return f.vCoordIndex},function(a){return f.vCoordIndex=a}),f.yVarParam_.setLowerLimit(-1),f.addParameter(f.yVarParam_),f.dataPoints_=new e.CircularList(d||1e5),f.drawColor_="lime",f.drawingMode_=j.DrawingMode.LINES,f.addGraphStyle(),f.xTransform=function(a,b){return a},f.yTransform=function(a,b){return b},f.addParameter(new g["default"](f,b.PARAM_NAME_LINE_WIDTH,function(){return f.lineWidth},function(a){return f.lineWidth=a})),f.addParameter(new g["default"](f,b.PARAM_NAME_DRAWING_MODE,function(){return f.drawingMode},function(a){return f.drawingMode=a})),f.addParameter(new h["default"](f,b.PARAM_NAME_COLOR,function(){return f.color},function(a){return f.color=a})),f}return n(b,a),b.prototype.addGraphStyle=function(){this.styles_.push(new l.GraphStyle(this.dataPoints_.getEndIndex()+1,this.drawingMode_,this.drawColor_,this.lineWidth_))},b.isDuckType=function(a){return a instanceof b||c["default"](a)&&void 0!==a.setXVariable&&void 0!==a.setYVariable&&void 0!==a.color&&void 0!==a.lineWidth&&void 0!==a.setAxes&&void 0!==a.varsList&&void 0!==a.reset&&void 0!==a.getGraphStyle},Object.defineProperty(b.prototype,"color",{get:function(){return this.drawColor_},set:function(a){this.drawColor_!==a&&(this.drawColor_=a,this.addGraphStyle(),this.broadcastParameter(b.PARAM_NAME_COLOR))},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"drawingMode",{get:function(){return this.drawingMode_},set:function(a){this.drawingMode_!==a&&(this.drawingMode_=a,this.addGraphStyle()),this.broadcastParameter(b.PARAM_NAME_DRAWING_MODE)},enumerable:!1,configurable:!0}),b.prototype.getGraphPoints=function(){return this.dataPoints_},b.prototype.getGraphStyle=function(a){var b=this.styles_;if(0===b.length)throw new Error("graph styles list is empty");for(var c=b[0],d=1,e=b.length;d<e;d++){var f=b[d];if(f.index_>a)break;c=f}return c},Object.defineProperty(b.prototype,"hotspotColor",{get:function(){return this.hotspotColor_},set:function(a){this.hotspotColor_=a},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"lineWidth",{get:function(){return this.lineWidth_},set:function(a){i["default"](a,this.lineWidth_)&&(this.lineWidth_=a,this.addGraphStyle(),this.broadcastParameter(b.PARAM_NAME_LINE_WIDTH))},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"varsList",{get:function(){return this.varsList_},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"hCoordIndex",{get:function(){return this.xVar_},set:function(a){this.checkVarIndex(b.PARAM_NAME_X_VARIABLE,a),a!==this.xVar_&&(this.xVar_=a,this.reset(),this.broadcastParameter(b.PARAM_NAME_X_VARIABLE))},enumerable:!1,configurable:!0}),b.prototype.getXVarName=function(){return this.xVar_>-1?this.varsList_.getName(this.xVar_):""},Object.defineProperty(b.prototype,"vCoordIndex",{get:function(){return this.yVar_},set:function(a){this.checkVarIndex(b.PARAM_NAME_Y_VARIABLE,a),a!==this.yVar_&&(this.yVar_=a,this.reset(),this.broadcastParameter(b.PARAM_NAME_Y_VARIABLE))},enumerable:!1,configurable:!0}),b.prototype.getYVarName=function(){return this.yVar_>-1?this.varsList_.getName(this.yVar_):""},b.prototype.memorize=function(){if(this.xVar_>-1&&this.yVar_>-1){var a=this.varsList_,b=a.getValue(this.xVar_),c=a.getValue(this.yVar_),d=this.xTransform(b,c),e=this.yTransform(b,c),f=a.getSequence(this.xVar_),g=a.getSequence(this.xVar_),h=new k["default"](d,e,f,g),i=this.dataPoints_.getEndValue();null!=i&&i.equals(h)||this.dataPoints_.store(h)}},b.prototype.observe=function(a){},b.prototype.reset=function(){this.dataPoints_.reset(),this.resetStyle(),this.broadcast(new f["default"](this,b.RESET))},b.prototype.resetStyle=function(){this.styles_=[],this.addGraphStyle()},b.prototype.checkVarIndex=function(a,b){if(b<-1||b>this.varsList_.numVariables()-1)throw new Error(a+" bad index: "+b)},b.PARAM_NAME_X_VARIABLE="X variable",b.PARAM_NAME_Y_VARIABLE="Y variable",b.PARAM_NAME_LINE_WIDTH="line width",b.PARAM_NAME_COLOR="color",b.PARAM_NAME_DRAWING_MODE="drawing mode",b.RESET="RESET",b}(d["default"]),a("GraphLine",m)}}}),System.register("davinci-newton/i18n/notImplemented.js",["../checks/mustBeString"],function(a,b){"use strict";function c(a){d["default"]("name",a);var b={get message(){return"'"+a+"' method is not yet implemented."}};return b}var d;b&&b.id;return a("notImplemented",c),{setters:[function(a){d=a}],execute:function(){}}}),System.register("davinci-newton/math/isVectorE2.js",["../checks/isNull","../checks/isNumber","../checks/isObject"],function(a,b){"use strict";function c(a){return!(!f["default"](a)||d["default"](a))&&(e["default"](a.x)&&e["default"](a.y))}var d,e,f;b&&b.id;return a("isVectorE2",c),{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-newton/math/isZeroBivectorE2.js",[],function(a,b){"use strict";function c(a){return 0===a.xy}b&&b.id;return a("isZeroBivectorE2",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/math/isZeroGeometricE2.js",["./isZeroBivectorE2","./isZeroVectorE2"],function(a,b){"use strict";function c(a){return e.isZeroVectorE2(a)&&d.isZeroBivectorE2(a)&&0===a.a&&0===a.b}var d,e;b&&b.id;return a("isZeroGeometricE2",c),{setters:[function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-newton/math/isZeroVectorE2.js",[],function(a,b){"use strict";function c(a){return 0===a.x&&0===a.y}b&&b.id;return a("isZeroVectorE2",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/math/maskG2.js",["../checks/isNumber","../checks/isObject","./Unit"],function(a,b){"use strict";function c(a){var b=a;if(e["default"](a)&&"grades"in a){var c=a;return 1&b.grades?h.a=c.a:h.a=0,2&b.grades?(h.x=c.x,h.y=c.y):(h.x=0,h.y=0),4&b.grades?h.xy=c.xy:h.xy=0,h.uom=f.Unit.mustBeUnit("g.uom",c.uom),h}return d["default"](a)?(h.a=a,h.x=0,h.y=0,h.xy=0,h.b=0,h.uom=g,h):void 0}var d,e,f,g,h;b&&b.id;return a("maskG2",c),{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=void 0,h={a:0,x:0,y:0,xy:0,b:0,uom:g}}}}),System.register("davinci-newton/math/dotVectorE2.js",[],function(a,b){"use strict";function c(a,b){return a.x*b.x+a.y*b.y}b&&b.id;return a("dotVectorE2",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/math/quadVectorE2.js",["./dotVectorE2","../checks/isDefined","../checks/isNumber"],function(a,b){"use strict";function c(a){if(e["default"](a)){var b=a.x,c=a.y;return f["default"](b)&&f["default"](c)?d.dotVectorE2(a,a):void 0}}var d,e,f;b&&b.id;return a("quadVectorE2",c),{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-newton/math/rotorFromDirectionsE2.js",["./dotVectorE2","./quadVectorE2"],function(a,b){"use strict";function c(a,b,c){var g=e.quadVectorE2(a),h=f(g),i=e.quadVectorE2(b),j=f(i),k=j*h,l=d.dotVectorE2(b,a),m=f(2*(i*g+k*l));
0!==m&&(c=c.versor(b,a),c=c.addScalar(k),c=c.divByScalar(m))}var d,e,f;b&&b.id;return a("rotorFromDirectionsE2",c),{setters:[function(a){d=a},function(a){e=a}],execute:function(){f=Math.sqrt}}}),System.register("davinci-newton/math/Geometric2.js",["../i18n/notImplemented","../i18n/readOnly","./approx","./arraysEQ","./gauss","./isVectorE2","./isZeroGeometricE2","./isZeroVectorE2","./maskG2","./QQ","./rotorFromDirectionsE2","./stringFromCoordinates","./Unit"],function(a,b){"use strict";function c(a){return 0===a.x&&0===a.y&&0===a.b}function d(a){return a.lock(),a}var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E;b&&b.id;return{setters:[function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a}],execute:function(){r=0,s=1,t=2,u=3,v=["1","e1","e2","e12"],v[r]="1",v[s]="e1",v[t]="e2",v[u]="e12",w=function(){return[0,0,0,0]},x=function(a){var b=w();return b[r]=a,b},y=function(a,b){var c=w();return c[s]=a,c[t]=b,c},z=function(a){var b=w();return b[u]=a,b},A=function(a){var b=w();return b[u]=a,b},B=function(a,b){var c=w();return c[r]=a,c[u]=b,c},C=function(a){var b=w();return b[r]=a.a,b[s]=a.x,b[t]=a.y,b[u]=a.b,b},D=-1*Math.random(),E=function(){function a(a,b){if(void 0===a&&(a=w()),this.lock_=D,4!==a.length)throw new Error("coords.length must be 4");this.coords_=a,this.uom_=b,this.modified_=!1}return a.scalar=function(b,c){return new a(x(b),c)},a.bivector=function(b,c){return a.spinor(0,b,c)},a.spinor=function(b,c,d){return new a(B(b,c),d)},a.vector=function(b,c,d){return new a(y(b,c),d)},a.copy=function(b){return new a(C(b),b.uom)},a.fromBivector=function(b){return new a(z(b.xy),b.uom)},a.fromScalar=function(b){return new a(x(b.a),b.uom)},a.fromSpinor=function(b){return new a(B(b.a,b.xy),b.uom)},a.fromVector=function(b){return new a(y(b.x,b.y),b.uom)},a.prototype.adj=function(){throw new Error(e.notImplemented("adj").message)},a.prototype.isScalar=function(){return c(this)},a.prototype.quad=function(){return new a([this.squaredNormSansUnits(),0,0,0],q.Unit.mul(this.uom,this.uom))},a.prototype.scale=function(b){return new a([this.a*b,this.x*b,this.y*b,this.b*b],this.uom)},a.prototype.slerp=function(a,b){throw new Error(e.notImplemented("slerp").message)},a.prototype.stress=function(a){return this.lock_!==D?d(this.clone().stress(a)):(this.x*=a.x,this.y*=a.y,this.uom=q.Unit.mul(a.uom,this.uom),this)},a.prototype.__div__=function(b){if(b instanceof a)return d(this.clone().div(b));if("number"==typeof b)return d(this.clone().divByNumber(b));var c=m.maskG2(b);return c?d(this.clone().div(c)):void 0},a.prototype.__rdiv__=function(b){return b instanceof a?d(a.copy(b).div(this)):"number"==typeof b?d(a.scalar(b,void 0).div(this)):void 0},a.prototype.__vbar__=function(b){return b instanceof a?d(a.copy(this).scp(b)):"number"==typeof b?d(a.copy(this).scp(a.scalar(b))):void 0},a.prototype.__rvbar__=function(b){return b instanceof a?d(a.copy(b).scp(this)):"number"==typeof b?d(a.scalar(b).scp(this)):void 0},a.prototype.__wedge__=function(b){return b instanceof a?d(a.copy(this).ext(b)):"number"==typeof b?d(a.copy(this).mulByNumber(b)):void 0},a.prototype.__rwedge__=function(b){return b instanceof a?d(a.copy(b).ext(this)):"number"==typeof b?d(a.copy(this).mulByNumber(b)):void 0},a.prototype.__lshift__=function(b){return b instanceof a?d(a.copy(this).lco(b)):"number"==typeof b?d(a.copy(this).lco(a.scalar(b))):void 0},a.prototype.__rlshift__=function(b){return b instanceof a?d(a.copy(b).lco(this)):"number"==typeof b?d(a.scalar(b).lco(this)):void 0},a.prototype.__rshift__=function(b){return b instanceof a?d(a.copy(this).rco(b)):"number"==typeof b?d(a.copy(this).rco(a.scalar(b))):void 0},a.prototype.__rrshift__=function(b){return b instanceof a?d(a.copy(b).rco(this)):"number"==typeof b?d(a.scalar(b).rco(this)):void 0},a.prototype.__bang__=function(){return d(a.copy(this).inv())},a.prototype.__eq__=function(b){if(b instanceof a){var c=this.a,d=this.x,e=this.y,f=this.b,g=b.a,h=b.x,i=b.y,j=b.b;return c===g&&d===h&&e===i&&f===j&&q.Unit.isCompatible(this.uom,b.uom)}return!1},a.prototype.__ne__=function(a){throw new Error(e.notImplemented("__ne_").message)},a.prototype.__ge__=function(a){throw new Error(e.notImplemented("__ge_").message)},a.prototype.__gt__=function(a){throw new Error(e.notImplemented("__gt_").message)},a.prototype.__le__=function(a){throw new Error(e.notImplemented("__le_").message)},a.prototype.__lt__=function(a){throw new Error(e.notImplemented("__lt_").message)},a.prototype.__tilde__=function(){return d(a.copy(this).rev())},a.prototype.__add__=function(a){var b=m.maskG2(a);return b?d(this.clone().add(b)):j.isVectorE2(a)?d(this.clone().addVector(a)):void 0},a.prototype.__radd__=function(b){return b instanceof a?d(a.copy(b).add(this)):"number"==typeof b?d(a.scalar(b).add(this)):j.isVectorE2(b)?d(a.fromVector(b).add(this)):void 0},a.prototype.__sub__=function(a){var b=m.maskG2(a);return b?d(this.clone().sub(b)):void 0},a.prototype.__rsub__=function(b){return b instanceof a?d(a.copy(b).sub(this)):"number"==typeof b?d(a.scalar(b).sub(this)):void 0},a.prototype.__pos__=function(){return d(a.copy(this))},a.prototype.__neg__=function(){return d(a.copy(this).neg())},a.prototype.__mul__=function(a){var b=m.maskG2(a);return b?d(this.clone().mul(b)):void 0},a.prototype.__rmul__=function(b){return b instanceof a?d(a.copy(b).mul(this)):"number"==typeof b?d(a.copy(this).mulByNumber(b)):void 0},a.prototype.add2=function(a,b){return k.isZeroGeometricE2(a)?this.uom=b.uom:k.isZeroGeometricE2(b)?this.uom=a.uom:this.uom=q.Unit.compatible(a.uom,b.uom),this.a=a.a+b.a,this.x=a.x+b.x,this.y=a.y+b.y,this.b=a.b+b.b,this},a.prototype.addPseudo=function(a,b){if(this.lock_!==D)return d(this.clone().addPseudo(a,b));if(this.isZero())this.uom=b;else{if(0===a)return this;this.uom=q.Unit.compatible(this.uom,b)}return this.b+=a,this},a.prototype.addScalar=function(a,b){if(this.lock_!==D)return d(this.clone().addScalar(a,b));if(this.isZero())this.uom=b;else{if(0===a)return this;this.uom=q.Unit.compatible(this.uom,b)}return this.a+=a,this},a.prototype.angle=function(){return this.log().grade(2)},a.prototype.approx=function(a){return this.lock_!==D?d(this.clone().approx(a)):(g.approx(this.coords_,a),this)},a.prototype.conj=function(){return this.lock_!==D?d(this.clone().conj()):(this.x=-this.x,this.y=-this.y,this.b=-this.b,this)},a.prototype.copySpinor=function(a){var b=a.a,c=a.xy;return this.setCoordinate(r,b,"a"),this.setCoordinate(s,0,"x"),this.setCoordinate(t,0,"y"),this.setCoordinate(u,c,"b"),this.uom=a.uom,this},a.prototype.div=function(b){return this.lock_!==D?d(this.clone().div(b)):c(b)?this.divByScalar(b.a,b.uom):this.mul(a.copy(b).inv())},a.prototype.div2=function(a,b){throw new Error(e.notImplemented("div2").message)},a.prototype.divByNumber=function(a){return this.lock_!==D?d(this.clone().divByNumber(a)):(this.a/=a,this.x/=a,this.y/=a,this.b/=a,this)},a.prototype.divByVector=function(a){if(this.lock_!==D)return d(this.clone().divByVector(a));var b=a.x,c=a.y,e=q.Unit.pow(a.uom,n.QQ.valueOf(2,1)),f=b*b+c*c;return this.mulByVector(a).divByScalar(f,e)},a.prototype.dual=function(a){throw new Error(e.notImplemented("dual").message)},a.prototype.equals=function(b){return b instanceof a&&h.arraysEQ(this.coords_,b.coords_)},a.prototype.exp=function(){if(this.lock_!==D)return d(this.clone().exp());q.Unit.assertDimensionless(this.uom);var a=Math.exp(this.a),b=this.xy,c=Math.sqrt(b*b),e=0!==c?Math.sin(c)/c:1,f=Math.cos(c);return this.a=f,this.xy=b*e,this.mulByNumber(a)},a.prototype.ext2=function(a,b){var c=a.a,d=a.x,e=a.y,f=a.b,g=b.a,h=b.x,i=b.y,j=b.b;return this.a=c*g,this.x=c*h+d*g,this.y=c*i+e*g,this.b=c*j+d*i-e*h+f*g,this.uom=q.Unit.mul(this.uom,b.uom),this},a.prototype.grade=function(a){if(this.lock_!==D)return d(this.clone().grade(a));switch(a){case 0:this.x=0,this.y=0,this.b=0;break;case 1:this.a=0,this.b=0;break;case 2:this.a=0,this.x=0,this.y=0;break;default:this.a=0,this.x=0,this.y=0,this.b=0}return this},a.prototype.isOne=function(){return!!q.Unit.isOne(this.uom)&&(1===this.a&&0===this.x&&0===this.y&&0===this.b)},a.prototype.isSpinor=function(){return 0===this.x&&0===this.y},a.prototype.I=function(){return this.a=0,this.x=0,this.y=0,this.b=1,this.uom=void 0,this},a.prototype.lco=function(a){return this.lock_!==D?d(this.clone().lco(a)):this.lco2(this,a)},a.prototype.lco2=function(a,b){var c=a.a,d=a.x,e=a.y,f=a.b,g=b.a,h=b.x,i=b.y,j=b.b;return this.a=c*g+d*h+e*i-f*j,this.x=c*h-e*j,this.y=c*i+d*j,this.b=c*j,this.uom=q.Unit.mul(this.uom,b.uom),this},a.prototype.lerp=function(a,b){return this.lock_!==D?d(this.clone().lerp(a,b)):(this.isZero()?this.uom=a.uom:k.isZeroGeometricE2(a)||(this.uom=q.Unit.compatible(this.uom,a.uom)),this.a+=(a.a-this.a)*b,this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.b+=(a.b-this.b)*b,this)},a.prototype.lerp2=function(a,b,c){return this.copy(a).lerp(b,c),this},a.prototype.log=function(){if(this.lock_!==D)return d(this.clone().log());if(q.Unit.assertDimensionless(this.uom),this.isSpinor()){var a=this.a,b=this.b;return this.a=Math.log(Math.sqrt(a*a+b*b)),this.b=Math.atan2(b,a),this}throw new Error(e.notImplemented("log("+this.toString()+")").message)},a.prototype.norm=function(){return this.lock_!==D?d(this.clone().norm()):(this.a=this.magnitudeSansUnits(),this.x=0,this.y=0,this.b=0,this)},a.prototype.one=function(){return this.a=1,this.x=0,this.y=0,this.b=0,this.uom=void 0,this},a.prototype.rco=function(a){return this.lock_!==D?d(this.clone().rco(a)):this.rco2(this,a)},a.prototype.rco2=function(a,b){var c=a.a,d=a.x,e=a.y,f=a.b,g=b.a,h=b.x,i=b.y,j=b.b;return this.a=c*g+d*h+e*i-f*j,this.x=-d*g-f*i,this.y=-e*g+f*h,this.b=f*g,this.uom=q.Unit.mul(this.uom,b.uom),this},a.prototype.reflect=function(a){throw new Error(e.notImplemented("reflect").message)},a.prototype.rotorFromDirections=function(a,b){return o.rotorFromDirectionsE2(a,b,this),this},a.prototype.rotorFromFrameToFrame=function(a,b){throw new Error(e.notImplemented("rotorFromFrameToFrame").message)},a.prototype.rotorFromGeneratorAngle=function(a,b){throw new Error(e.notImplemented("rotorFromGeneratorAngle").message)},a.prototype.rotorFromVectorToVector=function(a,b,c){throw new Error(e.notImplemented("rotorFromVectorToVector").message)},a.prototype.sqrt=function(){return this.lock_!==D?d(this.clone().sqrt()):(this.a=Math.sqrt(this.a),this.x=0,this.y=0,this.b=0,this.uom=q.Unit.sqrt(this.uom),this)},a.prototype.squaredNorm=function(a){return this.quaditude(a)},a.prototype.sub2=function(a,b){return k.isZeroGeometricE2(a)?(this.a=-b.a,this.x=-b.x,this.y=-b.y,this.b=-b.b,this.uom=b.uom):k.isZeroGeometricE2(b)?(this.a=a.a,this.x=a.x,this.y=a.y,this.b=a.b,this.uom=a.uom):(this.a=a.a-b.a,this.x=a.x-b.x,this.y=a.y-b.y,this.b=a.b-b.b,this.uom=q.Unit.compatible(a.uom,b.uom)),this},a.prototype.versor=function(a,b){return this.a=a.x*b.x+a.y*b.y,this.x=0,this.y=0,this.b=a.x*b.y-a.y*b.x,this.uom=q.Unit.mul(a.uom,b.uom),this},a.prototype.isLocked=function(){return this.lock_!==D},a.prototype.lock=function(){if(this.lock_!==D)throw new Error("already locked");return this.lock_=Math.random(),this.lock_},a.prototype.unlock=function(a){if(this.lock_===D)throw new Error("not locked");if(this.lock_!==a)throw new Error("unlock denied");this.lock_=D},a.prototype.setCoordinate=function(a,b,c){if(this.lock_!==D)throw new Error(f.readOnly(c).message);var d=this.coords_,e=d[a];b!==e&&(d[a]=b,this.modified_=!0)},Object.defineProperty(a.prototype,"a",{get:function(){return this.coords_[r]},set:function(a){this.setCoordinate(r,a,"a")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"b",{get:function(){return this.coords_[u]},set:function(a){this.setCoordinate(u,a,"b")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"xy",{get:function(){return this.coords_[u]},set:function(a){this.setCoordinate(u,a,"xy")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"grades",{get:function(){var a=this.coords_,b=a[r],c=a[s],d=a[t],e=a[u],f=0;return 0!==b&&(f+=1),0===c&&0===d||(f+=2),0!==e&&(f+=4),f},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"uom",{get:function(){return this.uom_},set:function(a){if(this.lock_!==D)throw new Error(f.readOnly("uom").message);this.uom_=q.Unit.mustBeUnit("uom",a)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"x",{get:function(){return this.coords_[s]},set:function(a){this.setCoordinate(s,a,"x")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this.coords_[t]},set:function(a){this.setCoordinate(t,a,"y")},enumerable:!1,configurable:!0}),a.prototype.add=function(a,b){return void 0===b&&(b=1),this.lock_!==D?d(this.clone().add(a,b)):this.isZero()?(this.a=a.a*b,this.x=a.x*b,this.y=a.y*b,this.b=a.b*b,this.uom=a.uom,this):k.isZeroGeometricE2(a)?this:(this.a+=a.a*b,this.x+=a.x*b,this.y+=a.y*b,this.b+=a.b*b,this.uom=q.Unit.compatible(this.uom,a.uom),this)},a.prototype.addVector=function(a,b){if(void 0===b&&(b=1),this.lock_!==D)return d(this.clone().addVector(a,b));if(this.isZero())this.uom=a.uom;else{if(l.isZeroVectorE2(a))return this;this.uom=q.Unit.compatible(this.uom,a.uom)}return this.x+=a.x*b,this.y+=a.y*b,this},a.prototype.clone=function(){return a.copy(this)},a.prototype.copy=function(a){return this.a=a.a,this.x=a.x,this.y=a.y,this.b=a.b,this.uom=a.uom,this},a.prototype.copyBivector=function(a){var b=a.xy;return this.setCoordinate(r,0,"a"),this.setCoordinate(s,0,"x"),this.setCoordinate(t,0,"y"),this.setCoordinate(u,b,"b"),this.uom=a.uom,this},a.prototype.copyScalar=function(a,b){return this.setCoordinate(r,a,"a"),this.setCoordinate(s,0,"x"),this.setCoordinate(t,0,"y"),this.setCoordinate(u,0,"b"),this.uom=b,this},a.prototype.copyVector=function(a){var b=a.x,c=a.y;return this.setCoordinate(r,0,"a"),this.setCoordinate(s,b,"x"),this.setCoordinate(t,c,"y"),this.setCoordinate(u,0,"b"),this.uom=a.uom,this},a.prototype.direction=function(a){if(this.lock_!==D){if(a)throw new Error("Unable to mutate this locked Geometric2.");return d(this.clone().direction(!0))}if(a){var b=this.magnitudeSansUnits();return 0!==b&&(this.a=this.a/b,this.x=this.x/b,this.y=this.y/b,this.b=this.b/b),this.uom=void 0,this}return d(this.clone().direction(!0))},a.prototype.divByScalar=function(a,b){return this.lock_!==D?d(this.clone().divByScalar(a,b)):(this.uom=q.Unit.div(this.uom,b),this.a/=a,this.x/=a,this.y/=a,this.b/=a,this)},a.prototype.ext=function(a){if(this.lock_!==D)return d(this.clone().ext(a));var b=this.a,c=this.x,e=this.y,f=this.b,g=a.a,h=a.x,i=a.y,j=a.b;return this.a=b*g,this.x=b*h+c*g,this.y=b*i+e*g,this.b=b*j+c*i-e*h+f*g,this.uom=q.Unit.mul(this.uom,a.uom),this},a.prototype.inv=function(){if(this.lock_!==D)return d(this.clone().inv());var a=this.a,b=this.x,c=this.y,e=this.b,f=[[a,b,c,-e],[b,a,e,-c],[c,-e,a,b],[e,-c,b,a]],g=[1,0,0,0],h=i.gauss(f,g);return this.a=h[0],this.x=h[1],this.y=h[2],this.b=h[3],this.uom=q.Unit.inv(this.uom),this},a.prototype.isZero=function(){return 0===this.a&&0===this.x&&0===this.y&&0===this.b},a.prototype.magnitude=function(a){if(this.lock_!==D){if(a)throw new Error("Unable to mutate this locked Geometric3.");return d(this.clone().magnitude(!0))}return a?(this.a=Math.sqrt(this.squaredNormSansUnits()),this.x=0,this.y=0,this.b=0,this):d(this.clone().magnitude(!0))},a.prototype.magnitudeSansUnits=function(){return Math.sqrt(this.squaredNormSansUnits())},a.prototype.mul=function(a){return this.lock_!==D?d(this.clone().mul(a)):this.mul2(this,a)},a.prototype.mul2=function(a,b){var c=a.a,d=a.x,e=a.y,f=a.b,g=b.a,h=b.x,i=b.y,j=b.b;return this.a=c*g+d*h+e*i-f*j,this.x=c*h+d*g-e*j+f*i,this.y=c*i+d*j+e*g-f*h,this.b=c*j+d*i-e*h+f*g,this.uom=q.Unit.mul(this.uom,b.uom),this},a.prototype.mulByBivector=function(a){if(this.lock_!==D)return d(this.clone().mulByBivector(a));this.uom=q.Unit.mul(this.uom,a.uom);var b=this.a,c=this.x,e=this.y,f=this.b,g=a.xy;return this.a=-f*g,this.x=-e*g,this.y=+c*g,this.b=b*g,this},a.prototype.mulByNumber=function(a){return this.lock_!==D?d(this.clone().mulByNumber(a)):(this.a*=a,this.x*=a,this.y*=a,this.b*=a,this)},a.prototype.mulByScalar=function(a,b){return this.lock_!==D?d(this.clone().mulByScalar(a,b)):(this.a*=a,this.x*=a,this.y*=a,this.b*=a,this.uom=q.Unit.mul(this.uom,b),this)},a.prototype.mulByVector=function(a){if(this.lock_!==D)return d(this.clone().mulByVector(a));this.uom=q.Unit.mul(this.uom,a.uom);var b=this.a,c=this.x,e=this.y,f=this.xy,g=a.x,h=a.y;return this.a=c*g+e*h,this.x=b*g+f*h,this.y=b*h-f*g,this.b=c*h-e*g,this},a.prototype.neg=function(){return this.lock_!==D?d(this.clone().neg()):(this.a=-this.a,this.x=-this.x,this.y=-this.y,this.b=-this.b,this)},a.prototype.quaditude=function(a){if(this.lock_!==D){if(a)throw new Error("Unable to mutate this locked Geometric3.");return d(this.clone().quaditude(!0))}return a?(this.a=this.squaredNormSansUnits(),this.x=0,this.y=0,this.b=0,this.uom=q.Unit.mul(this.uom,this.uom),this):d(this.clone().quaditude(!0))},a.prototype.rev=function(){return this.lock_!==D?d(this.clone().rev()):(this.a=+this.a,this.x=+this.x,this.y=+this.y,this.b=-this.b,this)},a.prototype.rotate=function(a){if(this.lock_!==D)return d(this.clone().rotate(a));q.Unit.assertDimensionless(a.uom);var b=this.a,c=this.x,e=this.y,f=this.b,g=a.a,h=a.xy,i=g*g,j=h*h,k=i-j,l=2*g*h,m=i+j;return this.a=m*b,this.x=k*c+l*e,this.y=k*e-l*c,this.b=m*f,this},a.prototype.scp=function(a){return this.lock_!==D?d(this.clone().scp(a)):this.scp2(this,a)},a.prototype.scp2=function(a,b){var c=a.a,d=a.x,e=a.y,f=a.b,g=b.a,h=b.x,i=b.y,j=b.b,k=c*g+d*h+e*i+f*j;return this.a=k,this.x=0,this.y=0,this.b=0,this.uom=q.Unit.mul(a.uom,b.uom),this},a.prototype.squaredNormSansUnits=function(){return this.a*this.a+this.x*this.x+this.y*this.y+this.b*this.b},a.prototype.sub=function(a,b){if(void 0===b&&(b=1),this.lock_!==D)return d(this.clone().sub(a,b));if(this.isZero())this.uom=a.uom;else{if(k.isZeroGeometricE2(a))return this;this.uom=q.Unit.compatible(this.uom,a.uom)}return this.a-=a.a*b,this.x-=a.x*b,this.y-=a.y*b,this.b-=a.b*b,this},a.prototype.subScalar=function(a,b){return void 0===b&&(b=1),this.lock_!==D?d(this.clone().subScalar(a,b)):(this.isZero()?this.uom=a.uom:this.uom=q.Unit.compatible(this.uom,a.uom),this.a-=a.a*b,this)},a.prototype.subVector=function(a,b){if(void 0===b&&(b=1),this.lock_!==D)return d(this.clone().subVector(a,b));if(this.isZero())this.uom=a.uom;else{if(l.isZeroVectorE2(a))return this;this.uom=q.Unit.compatible(this.uom,a.uom)}return this.x-=a.x*b,this.y-=a.y*b,this},a.prototype.toExponential=function(a){var b=function(b){return b.toExponential(a)};return p.stringFromCoordinates(C(this),b,v,this.uom)},a.prototype.toFixed=function(a){var b=function(b){return b.toFixed(a)};return p.stringFromCoordinates(C(this),b,v,this.uom)},a.prototype.toPrecision=function(a){var b=function(b){return b.toPrecision(a)};return p.stringFromCoordinates(C(this),b,v,this.uom)},a.prototype.toString=function(a){var b=function(b){return b.toString(a)};return p.stringFromCoordinates(C(this),b,v,this.uom)},a.prototype.write=function(a){a.a=this.a,a.x=this.x,a.y=this.y,a.b=this.b,a.uom=this.uom},a.prototype.writeVector=function(a){a.x=this.x,a.y=this.y,a.uom=this.uom},a.prototype.zero=function(){return this.a=0,this.x=0,this.y=0,this.b=0,this.uom=void 0,this},a.zero=d(new a(w(),(void 0))),a.one=d(new a(x(1),(void 0))),a.e1=d(new a(y(1,0),(void 0))),a.e2=d(new a(y(0,1),(void 0))),a.I=d(new a(A(1),(void 0))),a.meter=d(new a(x(1),q.Unit.METER)),a.kilogram=d(new a(x(1),q.Unit.KILOGRAM)),a.second=d(new a(x(1),q.Unit.SECOND)),a.ampere=d(new a(x(1),q.Unit.AMPERE)),a.kelvin=d(new a(x(1),q.Unit.KELVIN)),a.mole=d(new a(x(1),q.Unit.MOLE)),a.candela=d(new a(x(1),q.Unit.CANDELA)),a.coulomb=d(new a(x(1),q.Unit.COULOMB)),a.newton=d(new a(x(1),q.Unit.NEWTON)),a.joule=d(new a(x(1),q.Unit.JOULE)),a}(),a("Geometric2",E)}}}),System.register("davinci-newton/checks/isString.js",[],function(a,b){"use strict";function c(a){return"string"==typeof a}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/checks/mustBeString.js",["../checks/mustSatisfy","../checks/isString"],function(a,b){"use strict";function c(){return"be a string"}function d(a,b,d){return e["default"](a,f["default"](b),c,d),b}var e,f;b&&b.id;return a("default",d),{setters:[function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-newton/i18n/readOnly.js",["../checks/mustBeString"],function(a,b){"use strict";function c(a){d["default"]("name",a);var b={get message(){return"Property `"+a+"` is readonly."}};return b}var d;b&&b.id;return a("readOnly",c),{setters:[function(a){d=a}],execute:function(){}}}),System.register("davinci-newton/math/approx.js",[],function(a,b){"use strict";function c(a,b){for(var c=0,d=a.length,e=0;e<d;e++)c=Math.max(c,Math.abs(a[e]));for(var f=c*Math.pow(10,-b),e=0;e<d;e++)Math.abs(a[e])<f&&(a[e]=0)}b&&b.id;return a("approx",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/math/arraysEQ.js",["../checks/isDefined","../checks/isNull","../checks/isUndefined"],function(a,b){"use strict";function c(a,b){if(d["default"](a)){if(d["default"](b)){if(e["default"](a))return e["default"](b);if(e["default"](b))return!1;var c=a.length,g=b.length;if(c===g){for(var h=0;h<c;h++)if(a[h]!==b[h])return!1;return!0}return!1}return!1}return f["default"](b)}var d,e,f;b&&b.id;return a("arraysEQ",c),{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-newton/math/extE3.js",[],function(a,b){"use strict";function c(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=+i,j=+j,k=+k,l=+l,m=+m,n=+n,o=+o,p=+p,q=0|q;var r=0;switch(~~q){case 0:r=+(a*i);break;case 1:r=+(a*j+b*i);break;case 2:r=+(a*k+c*i);break;case 3:r=+(a*l+d*i);break;case 4:r=+(a*m+b*k-c*j+e*i);break;case 5:r=+(a*n+c*l-d*k+f*i);break;case 6:r=+(a*o-b*l+d*j+g*i);break;case 7:r=+(a*p+b*n+c*o+d*m+e*l+f*j+g*k+h*i);break;default:throw new Error("index must be in the range [0..7]")}return+r}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/math/extG3.js",["./compG3Get","./compG3Set","./extE3","./Unit"],function(a,b){"use strict";function c(a,b,c){c.uom=g.Unit.mul(a.uom,b.uom);for(var h=d["default"](a,0),i=d["default"](a,1),j=d["default"](a,2),k=d["default"](a,3),l=d["default"](a,4),m=d["default"](a,5),n=d["default"](a,6),o=d["default"](a,7),p=d["default"](b,0),q=d["default"](b,1),r=d["default"](b,2),s=d["default"](b,3),t=d["default"](b,4),u=d["default"](b,5),v=d["default"](b,6),w=d["default"](b,7),x=0;x<8;x++)e["default"](c,x,f["default"](h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x));return c}var d,e,f,g;b&&b.id;return a("default",c),{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){}}}),System.register("davinci-newton/math/gauss.js",[],function(a,b){"use strict";function c(a,b){for(var c=[],d=0;d<a;d++)c.push(b);return c}function d(a,b,c){for(var d=i(a[b][b]),e=b,f=b+1;f<c;f++)i(a[f][b])>d&&(d=i(a[f][b]),e=f);return e}function e(a,b,c,d){for(var e=d+1,f=b;f<e;f++){var g=a[c][f];a[c][f]=a[b][f],a[b][f]=g}}function f(a,b,c){for(var d=b+1;d<c;d++)for(var e=-a[d][b]/a[b][b],f=b;f<c+1;f++)b===f?a[d][f]=0:a[d][f]+=e*a[b][f]}function g(a,b){for(var d=c(b,0),e=b-1;e>-1;e--){d[e]=a[e][b]/a[e][e];for(var f=e-1;f>-1;f--)a[f][b]-=a[f][e]*d[e]}return d}function h(a,b){for(var c=a.length,h=0;h<c;h++){var i=a[h],j=b[h];i.push(j)}for(var k=0;k<c;k++)e(a,k,d(a,k,c),c),f(a,k,c);return g(a,c)}var i;b&&b.id;return a("gauss",h),{setters:[],execute:function(){i=Math.abs}}}),System.register("davinci-newton/math/isScalarG3.js",[],function(a,b){"use strict";function c(a){return 0===a.x&&0===a.y&&0===a.z&&0===a.xy&&0===a.yz&&0===a.zx&&0===a.b}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/math/isVectorE3.js",["../checks/isNull","../checks/isNumber","../checks/isObject"],function(a,b){"use strict";function c(a){return!(!f["default"](a)||d["default"](a))&&(e["default"](a.x)&&e["default"](a.y)&&e["default"](a.z))}var d,e,f;b&&b.id;return a("default",c),{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-newton/math/isVectorG3.js",[],function(a,b){"use strict";function c(a){return 0===a.a&&0===a.xy&&0===a.yz&&0===a.zx&&0===a.b}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/math/isZeroBivectorE3.js",[],function(a,b){"use strict";function c(a){return 0===a.yz&&0===a.zx&&0===a.xy}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/math/isZeroGeometricE3.js",["./isZeroBivectorE3","./isZeroVectorE3"],function(a,b){"use strict";function c(a){return e["default"](a)&&d["default"](a)&&0===a.a&&0===a.b}var d,e;b&&b.id;return a("default",c),{setters:[function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-newton/math/isZeroVectorE3.js",[],function(a,b){"use strict";function c(a){return 0===a.x&&0===a.y&&0===a.z}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/math/lcoE3.js",[],function(a,b){"use strict";function c(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=+i,j=+j,k=+k,l=+l,m=+m,n=+n,o=+o,p=+p,q=0|q;var r=0;switch(~~q){case 0:r=+(a*i+b*j+c*k+d*l-e*m-f*n-g*o-h*p);break;case 1:r=+(a*j-c*m+d*o-f*p);break;case 2:r=+(a*k+b*m-d*n-g*p);break;case 3:r=+(a*l-b*o+c*n-e*p);break;case 4:r=+(a*m+d*p);break;case 5:r=+(a*n+b*p);break;case 6:r=+(a*o+c*p);break;case 7:r=+(a*p);break;default:throw new Error("index must be in the range [0..7]")}return+r}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/math/lcoG3.js",["./compG3Get","./compG3Set","./lcoE3","./Unit"],function(a,b){"use strict";function c(a,b,c){c.uom=g.Unit.mul(a.uom,b.uom);for(var h=d["default"](a,0),i=d["default"](a,1),j=d["default"](a,2),k=d["default"](a,3),l=d["default"](a,4),m=d["default"](a,5),n=d["default"](a,6),o=d["default"](a,7),p=d["default"](b,0),q=d["default"](b,1),r=d["default"](b,2),s=d["default"](b,3),t=d["default"](b,4),u=d["default"](b,5),v=d["default"](b,6),w=d["default"](b,7),x=0;x<8;x++)e["default"](c,x,f["default"](h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x));return c}var d,e,f,g;b&&b.id;return a("default",c),{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){}}}),System.register("davinci-newton/math/maskG3.js",["../checks/isNumber","../checks/isObject","./Unit"],function(a,b){"use strict";function c(a){var b=a;if(e["default"](a)&&"grades"in a){var c=a;return 1&b.grades?h.a=c.a:h.a=0,2&b.grades?(h.x=c.x,h.y=c.y,h.z=c.z):(h.x=0,h.y=0,h.z=0),4&b.grades?(h.yz=c.yz,h.zx=c.zx,h.xy=c.xy):(h.yz=0,h.zx=0,h.xy=0),8&b.grades?h.b=c.b:h.b=0,h.uom=f.Unit.mustBeUnit("g.uom",c.uom),h}return d["default"](a)?(h.a=a,h.x=0,h.y=0,h.z=0,h.yz=0,h.zx=0,h.xy=0,h.b=0,h.uom=g,h):void 0}var d,e,f,g,h;b&&b.id;return a("maskG3",c),{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=void 0,h={a:0,x:0,y:0,z:0,yz:0,zx:0,xy:0,b:0,uom:g}}}}),System.register("davinci-newton/math/randomRange.js",[],function(a,b){"use strict";function c(a,b){return(b-a)*Math.random()+a}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/math/rcoE3.js",[],function(a,b){"use strict";function c(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=+i,j=+j,k=+k,l=+l,m=+m,n=+n,o=+o,p=+p,q=0|q;var r=0;switch(~~q){case 0:r=+(a*i+b*j+c*k+d*l-e*m-f*n-g*o-h*p);break;case 1:r=+(+b*i+e*k-g*l-h*n);break;case 2:r=+(+c*i-e*j+f*l-h*o);break;case 3:r=+(+d*i-f*k+g*j-h*m);break;case 4:r=+(+e*i+h*l);break;case 5:r=+(+f*i+h*j);break;case 6:r=+(+g*i+h*k);break;case 7:r=+(+h*i);break;default:throw new Error("index must be in the range [0..7]")}return+r}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/math/rcoG3.js",["./compG3Get","./compG3Set","./rcoE3","./Unit"],function(a,b){"use strict";function c(a,b,c){c.uom=g.Unit.mul(a.uom,b.uom);for(var h=d["default"](a,0),i=d["default"](a,1),j=d["default"](a,2),k=d["default"](a,3),l=d["default"](a,4),m=d["default"](a,5),n=d["default"](a,6),o=d["default"](a,7),p=d["default"](b,0),q=d["default"](b,1),r=d["default"](b,2),s=d["default"](b,3),t=d["default"](b,4),u=d["default"](b,5),v=d["default"](b,6),w=d["default"](b,7),x=0;x<8;x++)e["default"](c,x,f["default"](h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x));return c}var d,e,f,g;b&&b.id;return a("default",c),{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){}}}),System.register("davinci-newton/math/dotVectorE3.js",[],function(a,b){"use strict";function c(a,b){return a.x*b.x+a.y*b.y+a.z*b.z}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/math/quadVectorE3.js",[],function(a,b){"use strict";function c(a){var b=a.x,c=a.y,d=a.z;return b*b+c*c+d*d}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/math/rotorFromDirectionsE3.js",["./dotVectorE3","./quadVectorE3","./wedgeXY","./wedgeYZ","./wedgeZX"],function(a,b){"use strict";function c(a,b,c,l){if(a.x===b.x&&a.y===b.y&&a.z===b.z)return void l.one();if(1===a.x&&0===a.y&&0===a.z&&0===b.x&&1===b.y&&0===b.z)return l.zero(),l.a=j,void(l.xy=-k);if(1===a.x&&0===a.y&&0===a.z&&0===b.x&&0===b.y&&1===b.z)return l.zero(),l.a=j,void(l.zx=k);if(0===a.x&&1===a.y&&0===a.z&&1===b.x&&0===b.y&&0===b.z)return l.zero(),l.a=j,void(l.xy=k);if(0===a.x&&1===a.y&&0===a.z&&0===b.x&&0===b.y&&1===b.z)return l.zero(),l.a=j,void(l.yz=-k);if(0===a.x&&0===a.y&&1===a.z&&1===b.x&&0===b.y&&0===b.z)return l.zero(),l.a=j,void(l.zx=-k);if(0===a.x&&0===a.y&&1===a.z&&0===b.x&&1===b.y&&0===b.z)return l.zero(),l.a=j,void(l.yz=k);if(1===a.x&&0===a.y&&0===a.z&&0===b.x&&b.y===-1&&0===b.z)return l.zero(),l.a=j,void(l.xy=k);if(1===a.x&&0===a.y&&0===a.z&&0===b.x&&0===b.y&&b.z===-1)return l.zero(),l.a=j,void(l.zx=-k);if(0===a.x&&1===a.y&&0===a.z&&b.x===-1&&0===b.y&&0===b.z)return l.zero(),l.a=j,void(l.xy=-k);if(0===a.x&&1===a.y&&0===a.z&&0===b.x&&0===b.y&&b.z===-1)return l.zero(),l.a=j,void(l.yz=k);if(0===a.x&&0===a.y&&1===a.z&&b.x===-1&&0===b.y&&0===b.z)return l.zero(),l.a=j,void(l.zx=k);if(0===a.x&&0===a.y&&1===a.z&&0===b.x&&b.y===-1&&0===b.z)return l.zero(),l.a=j,void(l.yz=-k);if(a.x===-1&&0===a.y&&0===a.z&&0===b.x&&1===b.y&&0===b.z)return l.zero(),l.a=j,void(l.xy=k);if(a.x===-1&&0===a.y&&0===a.z&&0===b.x&&0===b.y&&1===b.z)return l.zero(),l.a=j,void(l.zx=-k);if("undefined"==typeof c){if(1===a.x&&0===a.y&&0===a.z&&b.x===-1&&0===b.y&&0===b.z)return l.zero(),void(l.xy=-1);if(a.x===-1&&0===a.y&&0===a.z&&1===b.x&&0===b.y&&0===b.z)return l.zero(),void(l.xy=-1);if(0===a.x&&1===a.y&&0===a.z&&0===b.x&&b.y===-1&&0===b.z)return l.zero(),void(l.xy=-1);if(0===a.x&&a.y===-1&&0===a.z&&0===b.x&&1===b.y&&0===b.z)return l.zero(),void(l.xy=-1);if(0===a.x&&0===a.y&&1===a.z&&0===b.x&&0===b.y&&b.z===-1)return l.zero(),void(l.zx=-1);if(0===a.x&&0===a.y&&a.z===-1&&0===b.x&&0===b.y&&1===b.z)return l.zero(),void(l.zx=-1)}var m=e["default"](a),n=i(m),o=e["default"](b),p=i(o),q=p*n,r=d["default"](b,a),s=i(2*(o*m+q*r));if(0!==s)l=l.versor(b,a),l=l.addScalar(q),l=l.divByScalar(s);else if(c)l.rotorFromGeneratorAngle(c,Math.PI);else{var t=Math.random(),u=Math.random(),v=Math.random();l.zero(),l.yz=g["default"](t,u,v,a.x,a.y,a.z),l.zx=h["default"](t,u,v,a.x,a.y,a.z),l.xy=f["default"](t,u,v,a.x,a.y,a.z),l.direction(!0),l.rotorFromGeneratorAngle(l,Math.PI)}}var d,e,f,g,h,i,j,k;b&&b.id;return a("default",c),{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i=Math.sqrt,j=Math.cos(Math.PI/4),k=Math.sin(Math.PI/4)}}}),System.register("davinci-newton/math/compG3Get.js",[],function(a,b){
"use strict";function c(a,b){switch(b){case d:return a.a;case e:return a.x;case f:return a.y;case g:return a.z;case h:return a.xy;case i:return a.yz;case j:return a.zx;case k:return a.b;default:throw new Error("index => "+b)}}var d,e,f,g,h,i,j,k;b&&b.id;return a("default",c),{setters:[],execute:function(){d=0,e=1,f=2,g=3,h=4,i=5,j=6,k=7}}}),System.register("davinci-newton/math/compG3Set.js",[],function(a,b){"use strict";function c(a,b,c){switch(b){case d:a.a=c;break;case e:a.x=c;break;case f:a.y=c;break;case g:a.z=c;break;case h:a.xy=c;break;case i:a.yz=c;break;case j:a.zx=c;break;case k:a.b=c;break;default:throw new Error("index => "+b)}}var d,e,f,g,h,i,j,k;b&&b.id;return a("default",c),{setters:[],execute:function(){d=0,e=1,f=2,g=3,h=4,i=5,j=6,k=7}}}),System.register("davinci-newton/math/mulE3.js",[],function(a,b){"use strict";function c(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){switch(q){case 0:return a*i+b*j+c*k+d*l-e*m-f*n-g*o-h*p;case 1:return a*j+b*i-c*m+d*o+e*k-f*p-g*l-h*n;case 2:return a*k+b*m+c*i-d*n-e*j+f*l-g*p-h*o;case 3:return a*l-b*o+c*n+d*i-e*p-f*k+g*j-h*m;case 4:return a*m+b*k-c*j+d*p+e*i-f*o+g*n+h*l;case 5:return a*n+b*p+c*l-d*k+e*o+f*i-g*m+h*j;case 6:return a*o-b*l+c*p+d*j-e*n+f*m+g*i+h*k;case 7:return a*p+b*n+c*o+d*m+e*l+f*j+g*k+h*i;default:throw new Error("index must be in the range [0..7]")}}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/math/scpG3.js",["../math/compG3Get","../math/compG3Set","../math/mulE3","../math/Unit"],function(a,b){"use strict";function c(a,b,c){var h=d["default"](a,0),i=d["default"](a,1),j=d["default"](a,2),k=d["default"](a,3),l=d["default"](a,4),m=d["default"](a,5),n=d["default"](a,6),o=d["default"](a,7),p=d["default"](b,0),q=d["default"](b,1),r=d["default"](b,2),s=d["default"](b,3),t=d["default"](b,4),u=d["default"](b,5),v=d["default"](b,6),w=d["default"](b,7);return e["default"](c,0,f["default"](h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,0)),e["default"](c,1,0),e["default"](c,2,0),e["default"](c,3,0),e["default"](c,4,0),e["default"](c,5,0),e["default"](c,6,0),e["default"](c,7,0),c.uom=g.Unit.mul(a.uom,b.uom),c}var d,e,f,g;b&&b.id;return a("default",c),{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){}}}),System.register("davinci-newton/math/squaredNormG3.js",[],function(a,b){"use strict";function c(a){var b=a.a,c=a.x,d=a.y,e=a.z,f=a.yz,g=a.zx,h=a.xy,i=a.b;return b*b+c*c+d*d+e*e+f*f+g*g+h*h+i*i}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/checks/isArray.js",[],function(a,b){"use strict";function c(a){return"[object Array]"===Object.prototype.toString.call(a)}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/checks/mustBeArray.js",["../checks/mustSatisfy","../checks/isArray"],function(a,b){"use strict";function c(){return"be an array"}function d(a,b,d){return e["default"](a,f["default"](b),c,d),b}var e,f;b&&b.id;return a("default",d),{setters:[function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-newton/math/stringFromCoordinates.js",["../checks/isDefined","../checks/mustBeArray","./Unit"],function(a,b){"use strict";function c(a){if("string"==typeof a)return"1"===a;var b=h["default"]("label",a);return 2===b.length?c(b[0])&&c(b[1]):1===b.length&&c(b[0])}function d(a,b,c){if("string"==typeof b)c.push(b);else{var d=h["default"]("label",b);if(2===d.length)c.push(a>0?d[1]:d[0]);else if(1===d.length)c.push(d[0]);else if(0!==d.length)throw new Error("Unexpected basis label array length: "+d.length)}}function e(a,b,e,f){if(0!==a){if(a>=0)f.length>0&&f.push("+");else if("string"==typeof e)f.push("-");else{var g=h["default"]("label",e);2===g.length?g[0]!==g[1]?f.length>0&&f.push("+"):f.push("-"):1===g.length?f.push("-"):f.push("-")}var i=Math.abs(a);1===i?d(a,e,f):(f.push(b(i)),c(e)||(f.push("*"),d(a,e,f)))}}function f(a,b,c,d){for(var f=[],h=0,j=a.length;h<j;h++){var k=a[h];if(!g["default"](k))return;e(k,b,c[h],f)}return i.Unit.isOne(d)?f.length>0?f.join(""):"0":f.length>0?f.join("")+" "+d.toString(10,!0):"0"}var g,h,i;b&&b.id;return a("stringFromCoordinates",f),{setters:[function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){}}}),System.register("davinci-newton/math/wedgeXY.js",[],function(a,b){"use strict";function c(a,b,c,d,e,f){return a*e-b*d}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/math/wedgeYZ.js",[],function(a,b){"use strict";function c(a,b,c,d,e,f){return b*f-c*e}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/math/wedgeZX.js",[],function(a,b){"use strict";function c(a,b,c,d,e,f){return c*d-a*f}b&&b.id;return{setters:[],execute:function(){a("default",c)}}}),System.register("davinci-newton/math/Geometric3.js",["../checks/isDefined","../i18n/readOnly","./approx","./arraysEQ","./dotVectorE3","./extG3","./gauss","./isScalarG3","./isVectorE3","./isVectorG3","./isZeroGeometricE3","./isZeroVectorE3","./lcoG3","./maskG3","./mulE3","./QQ","./randomRange","./rcoG3","./rotorFromDirectionsE3","./scpG3","./squaredNormG3","./stringFromCoordinates","./Unit","./wedgeXY","./wedgeYZ","./wedgeZX"],function(a,b){"use strict";function c(a,b){function c(a,b){return a.x*b.x+a.y*b.y+a.z*b.z}function d(a){return Math.sqrt(c(a,a))}return c(a,b)/(d(a)*d(b))}function d(a){return a.lock(),a}var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X;b&&b.id;return{setters:[function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a},function(a){t=a},function(a){u=a},function(a){v=a},function(a){w=a},function(a){x=a},function(a){y=a},function(a){z=a},function(a){A=a},function(a){B=a},function(a){C=a},function(a){D=a}],execute:function(){E=0,F=1,G=2,H=3,I=4,J=5,K=6,L=7,M=["1","e1","e2","e3","e12","e23","e31","e123"],M[E]="1",M[F]="e1",M[G]="e2",M[H]="e3",N=function(){return[0,0,0,0,0,0,0,0]},O=function(a){var b=N();return b[E]=a,b},P=function(a,b,c){var d=N();return d[F]=a,d[G]=b,d[H]=c,d},Q=function(a,b,c){var d=N();return d[J]=a,d[K]=b,d[I]=c,d},R=function(a,b,c,d){var e=N();return e[E]=a,e[J]=b,e[K]=c,e[I]=d,e},S=function(a,b,c,d,e,f,g,h){var i=N();return i[E]=a,i[F]=b,i[G]=c,i[H]=d,i[J]=e,i[K]=f,i[I]=g,i[L]=h,i},T=function(a){var b=N();return b[L]=a,b},U=function(a){var b=N();return b[E]=a.a,b[F]=a.x,b[G]=a.y,b[H]=a.z,b[J]=a.yz,b[K]=a.zx,b[I]=a.xy,b[L]=a.b,b},V=[],W=-1*Math.random(),X=function(){function a(a,b){if(void 0===a&&(a=N()),this.lock_=W,8!==a.length)throw new Error("coords.length must be 8");this.coords_=a,this.uom_=b,this.modified_=!1}return a.prototype.isLocked=function(){return this.lock_!==W},a.prototype.lock=function(){if(this.lock_!==W)throw new Error("already locked");return this.lock_=Math.random(),this.lock_},a.prototype.unlock=function(a){if(this.lock_===W)throw new Error("not locked");if(this.lock_!==a)throw new Error("unlock denied");this.lock_=W},a.prototype.setCoordinate=function(a,b,c){if(this.lock_!==W)throw new Error(f.readOnly(c).message);var d=this.coords_,e=d[a];b!==e&&(d[a]=b,this.modified_=!0)},Object.defineProperty(a.prototype,"a",{get:function(){return this.coords_[E]},set:function(a){this.setCoordinate(E,a,"a")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"b",{get:function(){return this.coords_[L]},set:function(a){this.setCoordinate(L,a,"b")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"grades",{get:function(){var a=this.coords_,b=a[E],c=a[F],d=a[G],e=a[H],f=a[J],g=a[K],h=a[I],i=a[L],j=0;return 0!==b&&(j+=1),0===c&&0===d&&0===e||(j+=2),0===f&&0===g&&0===h||(j+=4),0!==i&&(j+=8),j},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"uom",{get:function(){return this.uom_},set:function(a){if(this.lock_!==W)throw new Error(f.readOnly("uom").message);this.uom_=A.Unit.mustBeUnit("uom",a)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"x",{get:function(){return this.coords_[F]},set:function(a){this.setCoordinate(F,a,"x")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this.coords_[G]},set:function(a){this.setCoordinate(G,a,"y")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"z",{get:function(){return this.coords_[H]},set:function(a){this.setCoordinate(H,a,"z")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"yz",{get:function(){return this.coords_[J]},set:function(a){this.setCoordinate(J,a,"yz")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"zx",{get:function(){return this.coords_[K]},set:function(a){this.setCoordinate(K,a,"zx")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"xy",{get:function(){return this.coords_[I]},set:function(a){this.setCoordinate(I,a,"xy")},enumerable:!1,configurable:!0}),a.prototype.add=function(a,b){return void 0===b&&(b=1),this.lock_!==W?d(this.clone().add(a,b)):this.isZero()?(this.a=a.a*b,this.x=a.x*b,this.y=a.y*b,this.z=a.z*b,this.yz=a.yz*b,this.zx=a.zx*b,this.xy=a.xy*b,this.b=a.b*b,this.uom=a.uom,this):o["default"](a)?this:(this.a+=a.a*b,this.x+=a.x*b,this.y+=a.y*b,this.z+=a.z*b,this.yz+=a.yz*b,this.zx+=a.zx*b,this.xy+=a.xy*b,this.b+=a.b*b,this.uom=A.Unit.compatible(this.uom,a.uom),this)},a.prototype.add2=function(a,b){return o["default"](a)?this.uom=b.uom:o["default"](b)?this.uom=a.uom:this.uom=A.Unit.compatible(a.uom,b.uom),this.a=a.a+b.a,this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this.yz=a.yz+b.yz,this.zx=a.zx+b.zx,this.xy=a.xy+b.xy,this.b=a.b+b.b,this},a.prototype.addPseudo=function(a,b){if(this.lock_!==W)return d(this.clone().addPseudo(a,b));if(this.isZero())this.uom=b;else{if(0===a)return this;this.uom=A.Unit.compatible(this.uom,b)}return this.b+=a,this},a.prototype.addScalar=function(a,b){if(this.lock_!==W)return d(this.clone().addScalar(a,b));if(this.isZero())this.uom=b;else{if(0===a)return this;this.uom=A.Unit.compatible(this.uom,b)}return this.a+=a,this},a.prototype.addVector=function(a,b){if(void 0===b&&(b=1),this.lock_!==W)return d(this.clone().addVector(a,b));if(this.isZero())this.uom=a.uom;else{if(p["default"](a))return this;this.uom=A.Unit.compatible(this.uom,a.uom)}return this.x+=a.x*b,this.y+=a.y*b,this.z+=a.z*b,this},a.prototype.angle=function(){return this.log().grade(2)},a.prototype.approx=function(a){return this.lock_!==W?d(this.clone().approx(a)):(g.approx(this.coords_,a),this)},a.prototype.clone=function(){return a.copy(this)},a.prototype.conj=function(){return this.lock_!==W?d(this.clone().conj()):(this.x=-this.x,this.y=-this.y,this.z=-this.z,this.yz=-this.yz,this.zx=-this.zx,this.xy=-this.xy,this)},a.prototype.copyCoordinates=function(a){return this.a=a[E],this.x=a[F],this.y=a[G],this.z=a[H],this.yz=a[J],this.zx=a[K],this.xy=a[I],this.b=a[L],this},a.prototype.copy=function(a){return this.a=a.a,this.x=a.x,this.y=a.y,this.z=a.z,this.yz=a.yz,this.zx=a.zx,this.xy=a.xy,this.b=a.b,this.uom=a.uom,this},a.prototype.copyBivector=function(a){return this.setCoordinate(E,0,"a"),this.setCoordinate(F,0,"x"),this.setCoordinate(G,0,"y"),this.setCoordinate(H,0,"z"),this.setCoordinate(J,a.yz,"yz"),this.setCoordinate(K,a.zx,"zx"),this.setCoordinate(I,a.xy,"xy"),this.setCoordinate(L,0,"b"),this.uom=a.uom,this},a.prototype.copyScalar=function(a,b){return this.setCoordinate(E,a,"a"),this.setCoordinate(F,0,"x"),this.setCoordinate(G,0,"y"),this.setCoordinate(H,0,"z"),this.setCoordinate(J,0,"yz"),this.setCoordinate(K,0,"zx"),this.setCoordinate(I,0,"xy"),this.setCoordinate(L,0,"b"),this.uom=b,this},a.prototype.copySpinor=function(a){return this.setCoordinate(E,a.a,"a"),this.setCoordinate(F,0,"x"),this.setCoordinate(G,0,"y"),this.setCoordinate(H,0,"z"),this.setCoordinate(J,a.yz,"yz"),this.setCoordinate(K,a.zx,"zx"),this.setCoordinate(I,a.xy,"xy"),this.setCoordinate(L,0,"b"),this.uom=a.uom,this},a.prototype.copyVector=function(a){return this.setCoordinate(E,0,"a"),this.setCoordinate(F,a.x,"x"),this.setCoordinate(G,a.y,"y"),this.setCoordinate(H,a.z,"z"),this.setCoordinate(J,0,"yz"),this.setCoordinate(K,0,"zx"),this.setCoordinate(I,0,"xy"),this.setCoordinate(L,0,"b"),this.uom=a.uom,this},a.prototype.cross=function(a){return this.lock_!==W?d(this.clone().cross(a)):(this.ext(a),this.dual(this).neg(),this)},a.prototype.direction=function(a){if(this.lock_!==W){if(a)throw new Error("Unable to mutate this locked Geometric3.");return d(this.clone().direction(!0))}if(a){var b=this.magnitudeSansUnits();return 0!==b&&(this.a=this.a/b,this.x=this.x/b,this.y=this.y/b,this.z=this.z/b,this.yz=this.yz/b,this.zx=this.zx/b,this.xy=this.xy/b,this.b=this.b/b),this.uom=void 0,this}return d(this.clone().direction(!0))},a.prototype.div=function(a){if(this.lock_!==W)return d(this.clone().div(a));if(l["default"](a))return this.divByScalar(a.a,a.uom),this;if(n["default"](a))return this.divByVector(a);this.uom=A.Unit.div(this.uom,a.uom);var b=a.a,c=a.x,e=a.y,f=a.z,g=a.xy,h=a.yz,i=a.zx,j=a.b,m=[[b,c,e,f,-g,-h,-i,-j],[c,b,g,-i,-e,-j,f,-h],[e,-g,b,h,c,-f,-j,-i],[f,i,-h,b,-j,e,-c,-g],[g,-e,c,j,b,i,-h,f],[h,j,-f,e,-i,b,g,c],[i,f,j,-c,h,-g,b,e],[j,h,i,g,f,c,e,b]],o=[1,0,0,0,0,0,0,0],p=k.gauss(m,o),q=this.a,r=this.x,t=this.y,u=this.z,v=this.xy,w=this.yz,x=this.zx,y=this.b,z=p[0],B=p[1],C=p[2],D=p[3],E=p[4],F=p[5],G=p[6],H=p[7],I=s["default"](q,r,t,u,v,w,x,y,z,B,C,D,E,F,G,H,0),J=s["default"](q,r,t,u,v,w,x,y,z,B,C,D,E,F,G,H,1),K=s["default"](q,r,t,u,v,w,x,y,z,B,C,D,E,F,G,H,2),L=s["default"](q,r,t,u,v,w,x,y,z,B,C,D,E,F,G,H,3),M=s["default"](q,r,t,u,v,w,x,y,z,B,C,D,E,F,G,H,4),N=s["default"](q,r,t,u,v,w,x,y,z,B,C,D,E,F,G,H,5),O=s["default"](q,r,t,u,v,w,x,y,z,B,C,D,E,F,G,H,6),P=s["default"](q,r,t,u,v,w,x,y,z,B,C,D,E,F,G,H,7);return this.a=I,this.x=J,this.y=K,this.z=L,this.xy=M,this.yz=N,this.zx=O,this.b=P,this},a.prototype.divByNumber=function(a){return this.lock_!==W?d(this.clone().divByNumber(a)):(this.a/=a,this.x/=a,this.y/=a,this.z/=a,this.yz/=a,this.zx/=a,this.xy/=a,this.b/=a,this)},a.prototype.divByScalar=function(a,b){return this.lock_!==W?d(this.clone().divByScalar(a,b)):(this.uom=A.Unit.div(this.uom,b),this.a/=a,this.x/=a,this.y/=a,this.z/=a,this.yz/=a,this.zx/=a,this.xy/=a,this.b/=a,this)},a.prototype.divByVector=function(a){if(this.lock_!==W)return d(this.clone().divByVector(a));var b=a.x,c=a.y,e=a.z,f=A.Unit.pow(a.uom,t.QQ.valueOf(2,1)),g=b*b+c*c+e*e;return this.mulByVector(a).divByScalar(g,f)},a.prototype.div2=function(a,b){this.uom=A.Unit.div(a.uom,b.uom);var c=a.a,d=a.yz,e=a.zx,f=a.xy,g=b.a,h=b.yz,i=b.zx,j=b.xy;return this.a=c*g-d*h-e*i-f*j,this.yz=c*h+d*g-e*j+f*i,this.zx=c*i+d*j+e*g-f*h,this.xy=c*j-d*i+e*h+f*g,this},a.prototype.dual=function(a){if(this.lock_!==W)return d(this.clone().dual(a));if(e["default"](a)){var b=-a.b,c=-a.yz,f=-a.zx,g=-a.xy,h=a.x,i=a.y,j=a.z,k=a.a;return this.a=b,this.x=c,this.y=f,this.z=g,this.yz=h,this.zx=i,this.xy=j,this.b=k,this.uom=a.uom,this}return this.dual(this)},a.prototype.equals=function(b){return b instanceof a&&h.arraysEQ(this.coords_,b.coords_)},a.prototype.exp=function(){if(this.lock_!==W)return d(this.clone().exp());A.Unit.assertDimensionless(this.uom);var a=Math.exp(this.a),b=this.yz,c=this.zx,e=this.xy,f=Math.sqrt(b*b+c*c+e*e),g=0!==f?Math.sin(f)/f:1,h=Math.cos(f);return this.a=h,this.yz=b*g,this.zx=c*g,this.xy=e*g,this.mulByNumber(a)},a.prototype.inv=function(){if(this.lock_!==W)return d(this.clone().inv());var a=this.a,b=this.x,c=this.y,e=this.z,f=this.xy,g=this.yz,h=this.zx,i=this.b,j=[[a,b,c,e,-f,-g,-h,-i],[b,a,f,-h,-c,-i,e,-g],[c,-f,a,g,b,-e,-i,-h],[e,h,-g,a,-i,c,-b,-f],[f,-c,b,i,a,h,-g,e],[g,i,-e,c,-h,a,f,b],[h,e,i,-b,g,-f,a,c],[i,g,h,f,e,b,c,a]],l=[1,0,0,0,0,0,0,0],m=k.gauss(j,l);return this.a=m[0],this.x=m[1],this.y=m[2],this.z=m[3],this.xy=m[4],this.yz=m[5],this.zx=m[6],this.b=m[7],this.uom=A.Unit.inv(this.uom),this},a.prototype.isOne=function(){return!!A.Unit.isOne(this.uom)&&(1===this.a&&0===this.x&&0===this.y&&0===this.z&&0===this.yz&&0===this.zx&&0===this.xy&&0===this.b)},a.prototype.isZero=function(){return 0===this.a&&0===this.x&&0===this.y&&0===this.z&&0===this.yz&&0===this.zx&&0===this.xy&&0===this.b},a.prototype.lco=function(a){return this.lock_!==W?d(this.clone().lco(a)):this.lco2(this,a)},a.prototype.lco2=function(a,b){return q["default"](a,b,this)},a.prototype.lerp=function(a,b){return this.lock_!==W?d(this.clone().lerp(a,b)):(this.isZero()?this.uom=a.uom:o["default"](a)||(this.uom=A.Unit.compatible(this.uom,a.uom)),this.a+=(a.a-this.a)*b,this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.z+=(a.z-this.z)*b,this.yz+=(a.yz-this.yz)*b,this.zx+=(a.zx-this.zx)*b,this.xy+=(a.xy-this.xy)*b,this.b+=(a.b-this.b)*b,this)},a.prototype.lerp2=function(a,b,c){return this.copy(a).lerp(b,c),this},a.prototype.log=function(){if(this.lock_!==W)return d(this.clone().log());A.Unit.assertDimensionless(this.uom);var a=this.a,b=this.yz,c=this.zx,e=this.xy,f=b*b+c*c+e*e,g=Math.sqrt(f),h=Math.atan2(g,a)/g;return this.a=Math.log(Math.sqrt(a*a+f)),this.yz=b*h,this.zx=c*h,this.xy=e*h,this},a.prototype.magnitude=function(a){if(this.lock_!==W){if(a)throw new Error("Unable to mutate this locked Geometric3.");return d(this.clone().magnitude(!0))}return a?(this.a=Math.sqrt(this.squaredNormSansUnits()),this.x=0,this.y=0,this.z=0,this.xy=0,this.yz=0,this.zx=0,this.b=0,this):d(this.clone().magnitude(!0))},a.prototype.magnitudeSansUnits=function(){return Math.sqrt(this.squaredNormSansUnits())},a.prototype.mul=function(a){return this.lock_!==W?d(this.clone().mul(a)):this.mul2(this,a)},a.prototype.mulByBivector=function(a){if(this.lock_!==W)return d(this.clone().mulByBivector(a));this.uom=A.Unit.mul(this.uom,a.uom);var b=this.a,c=this.x,e=this.y,f=this.z,g=this.xy,h=this.yz,i=this.zx,j=this.b,k=a.xy,l=a.yz,m=a.zx;return this.a=-g*k-h*l-i*m,this.x=-e*k+f*m-j*l,this.y=+c*k-f*l-j*m,this.z=-c*m+e*l-j*k,this.xy=b*k-h*m+i*l,this.yz=b*l+g*m-i*k,this.zx=b*m-g*l+h*k,this.b=+c*l+e*m+f*k,this},a.prototype.mulByVector=function(a){if(this.lock_!==W)return d(this.clone().mulByVector(a));this.uom=A.Unit.mul(this.uom,a.uom);var b=this.a,c=this.x,e=this.y,f=this.z,g=this.xy,h=this.yz,i=this.zx,j=this.b,k=a.x,l=a.y,m=a.z;return this.a=c*k+e*l+f*m,this.x=b*k+g*l-i*m,this.y=b*l-g*k+h*m,this.z=b*m-h*l+i*k,this.xy=c*l-e*k+j*m,this.yz=e*m-f*l+j*k,this.zx=-c*m+f*k+j*l,this.b=g*m+h*k+i*l,this},a.prototype.mul2=function(a,b){if(this.lock_!==W)throw new Error("TODO");var c=a.a,d=a.x,e=a.y,f=a.z,g=a.xy,h=a.yz,i=a.zx,j=a.b,k=b.a,l=b.x,m=b.y,n=b.z,o=b.xy,p=b.yz,q=b.zx,r=b.b;return this.a=s["default"](c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,0),this.x=s["default"](c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,1),this.y=s["default"](c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,2),this.z=s["default"](c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,3),this.xy=s["default"](c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,4),this.yz=s["default"](c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,5),this.zx=s["default"](c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,6),this.b=s["default"](c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,7),this.uom=A.Unit.mul(a.uom,b.uom),this},a.prototype.neg=function(){return this.lock_!==W?d(this.clone().neg()):(this.a=-this.a,this.x=-this.x,this.y=-this.y,this.z=-this.z,this.yz=-this.yz,this.zx=-this.zx,this.xy=-this.xy,this.b=-this.b,this)},a.prototype.norm=function(){return this.lock_!==W?d(this.clone().norm()):(this.a=this.magnitudeSansUnits(),this.x=0,this.y=0,this.z=0,this.yz=0,this.zx=0,this.xy=0,this.b=0,this)},a.prototype.one=function(){return this.a=1,this.x=0,this.y=0,this.z=0,this.yz=0,this.zx=0,this.xy=0,this.b=0,this.uom=void 0,this},a.prototype.quaditude=function(a){if(this.lock_!==W){if(a)throw new Error("Unable to mutate this locked Geometric3.");return d(this.clone().quaditude(!0))}return a?(this.a=this.squaredNormSansUnits(),this.x=0,this.y=0,this.z=0,this.yz=0,this.zx=0,this.xy=0,this.b=0,this.uom=A.Unit.mul(this.uom,this.uom),this):d(this.clone().quaditude(!0))},a.prototype.rco=function(a){return this.lock_!==W?d(this.clone().rco(a)):this.rco2(this,a)},a.prototype.rco2=function(a,b){return v["default"](a,b,this)},a.prototype.squaredNorm=function(a){return this.quaditude(a)},a.prototype.squaredNormSansUnits=function(){return y["default"](this)},a.prototype.reflect=function(a){if(this.lock_!==W)return d(this.clone().reflect(a));A.Unit.assertDimensionless(a.uom);var b=a.x,c=a.y,e=a.z,f=b*b,g=c*c,h=e*e,i=f+g+h,j=2*c*e,k=2*e*b,l=2*b*c,m=g+h-f,n=h+f-g,o=f+g-h,p=this.coords_,q=p[E],r=p[F],s=p[G],t=p[H],u=p[I],v=p[J],w=p[K],x=p[L];return this.setCoordinate(E,-i*q,"a"),this.setCoordinate(F,r*m-s*l-t*k,"x"),this.setCoordinate(G,s*n-t*j-r*l,"y"),this.setCoordinate(H,t*o-r*k-s*j,"z"),this.setCoordinate(I,u*o-v*k-w*j,"xy"),this.setCoordinate(J,v*m-w*l-u*k,"yz"),this.setCoordinate(K,w*n-u*j-v*l,"zx"),this.setCoordinate(L,-i*x,"b"),this},a.prototype.rev=function(){return this.lock_!==W?d(this.clone().rev()):(this.a=+this.a,this.x=+this.x,this.y=+this.y,this.z=+this.z,this.yz=-this.yz,this.zx=-this.zx,this.xy=-this.xy,this.b=-this.b,this)},a.prototype.rotate=function(a){if(this.lock_!==W)return d(this.clone().rotate(a));A.Unit.assertDimensionless(a.uom);var b=this.x,c=this.y,e=this.z,f=a.xy,g=a.yz,h=a.zx,i=a.a,j=i*b-h*e+f*c,k=i*c-f*b+g*e,l=i*e-g*c+h*b,m=g*b+h*c+f*e;return this.x=j*i+m*g+k*f-l*h,this.y=k*i+m*h+l*g-j*f,this.z=l*i+m*f+j*h-k*g,this},a.prototype.rotorFromAxisAngle=function(a,b){A.Unit.assertDimensionless(a.uom);var c=a.x,d=a.y,e=a.z,f=c*c+d*d+e*e;if(1===f)return this.rotorFromGeneratorAngle({yz:c,zx:d,xy:e,uom:void 0},b);var g=Math.sqrt(f),h=c/g,i=d/g,j=e/g;return this.rotorFromGeneratorAngle({yz:h,zx:i,xy:j,uom:void 0},b)},a.prototype.rotorFromDirections=function(a,b){var c=void 0;return this.rotorFromVectorToVector(a,b,c)},a.prototype.rotorFromTwoVectors=function(b,c,d,e){var f=a.rotorFromDirections(b,c),g=a.fromVector(d).rotate(f),h=a.dualOfVector(c),i=a.rotorFromVectorToVector(g,e,h);return this.mul2(i,f)},a.prototype.rotorFromFrameToFrame=function(a,b){for(var d,e=-1,f=0;f<3;f++)V[f]=c(a[f],b[f]),V[f]>e&&(d=f,e=V[f]);var g=(d+1)%3;return this.rotorFromTwoVectors(a[d],b[d],a[g],b[g])},a.prototype.rotorFromGeneratorAngle=function(a,b){A.Unit.assertDimensionless(a.uom);var c=b/2,d=a.yz,e=a.zx,f=a.xy,g=Math.sqrt(d*d+e*e+f*f),h=g*c,i=Math.sin(h)/g;return this.a=Math.cos(h),this.x=0,this.y=0,this.z=0,this.yz=-d*i,this.zx=-e*i,this.xy=-f*i,this.b=0,this},a.prototype.rotorFromVectorToVector=function(a,b,c){return w["default"](a,b,c,this),this},a.prototype.scp=function(a){return this.lock_!==W?d(this.clone().scp(a)):this.scp2(this,a)},a.prototype.scp2=function(a,b){return x["default"](a,b,this)},a.prototype.sqrt=function(){return this.lock_!==W?d(this.clone().sqrt()):(this.a=Math.sqrt(this.a),this.x=0,this.y=0,this.z=0,this.yz=0,this.zx=0,this.xy=0,this.b=0,this.uom=A.Unit.sqrt(this.uom),this)},a.prototype.mulByNumber=function(a){return this.lock_!==W?d(this.clone().mulByNumber(a)):(this.a*=a,this.x*=a,this.y*=a,this.z*=a,this.yz*=a,this.zx*=a,this.xy*=a,this.b*=a,this)},a.prototype.mulByScalar=function(a,b){return this.lock_!==W?d(this.clone().mulByScalar(a,b)):(this.a*=a,this.x*=a,this.y*=a,this.z*=a,this.yz*=a,this.zx*=a,this.xy*=a,this.b*=a,this.uom=A.Unit.mul(this.uom,b),this)},a.prototype.stress=function(a){return this.lock_!==W?d(this.clone().stress(a)):(this.x*=a.x,this.y*=a.y,this.z*=a.z,this.uom=A.Unit.mul(a.uom,this.uom),this)},a.prototype.versor=function(a,b){this.uom=A.Unit.mul(a.uom,b.uom);var c=a.x,d=a.y,e=a.z,f=b.x,g=b.y,h=b.z;return this.zero(),this.a=i["default"](a,b),this.yz=C["default"](c,d,e,f,g,h),this.zx=D["default"](c,d,e,f,g,h),this.xy=B["default"](c,d,e,f,g,h),this},a.prototype.write=function(a){a.a=this.a,a.x=this.x,a.y=this.y,a.z=this.z,a.xy=this.xy,a.yz=this.yz,a.zx=this.zx,a.b=this.b,a.uom=this.uom},a.prototype.writeVector=function(a){a.x=this.x,a.y=this.y,a.z=this.z,a.uom=this.uom},a.prototype.sub=function(a,b){if(void 0===b&&(b=1),this.lock_!==W)return d(this.clone().sub(a,b));if(this.isZero())this.uom=a.uom;else{if(o["default"](a))return this;this.uom=A.Unit.compatible(this.uom,a.uom)}return this.a-=a.a*b,this.x-=a.x*b,this.y-=a.y*b,this.z-=a.z*b,this.yz-=a.yz*b,this.zx-=a.zx*b,this.xy-=a.xy*b,this.b-=a.b*b,this},a.prototype.subScalar=function(a,b){return void 0===b&&(b=1),this.lock_!==W?d(this.clone().subScalar(a,b)):(this.isZero()?this.uom=a.uom:this.uom=A.Unit.compatible(this.uom,a.uom),this.a-=a.a*b,this)},a.prototype.subVector=function(a,b){if(void 0===b&&(b=1),this.lock_!==W)return d(this.clone().subVector(a,b));if(this.isZero())this.uom=a.uom;else{if(p["default"](a))return this;this.uom=A.Unit.compatible(this.uom,a.uom)}return this.x-=a.x*b,this.y-=a.y*b,this.z-=a.z*b,this},a.prototype.sub2=function(a,b){return o["default"](a)?(this.a=-b.a,this.x=-b.x,this.y=-b.y,this.z=-b.z,this.yz=-b.yz,this.zx=-b.zx,this.xy=-b.xy,this.b=-b.b,this.uom=b.uom):o["default"](b)?(this.a=a.a,this.x=a.x,this.y=a.y,this.z=a.z,this.yz=a.yz,this.zx=a.zx,this.xy=a.xy,this.b=a.b,this.uom=a.uom):(this.a=a.a-b.a,this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this.yz=a.yz-b.yz,this.zx=a.zx-b.zx,this.xy=a.xy-b.xy,this.b=a.b-b.b,this.uom=A.Unit.compatible(a.uom,b.uom)),this},a.prototype.toExponential=function(a){var b=function(b){return b.toExponential(a)};return z.stringFromCoordinates(U(this),b,M,this.uom)},a.prototype.toFixed=function(a){var b=function(b){return b.toFixed(a)};return z.stringFromCoordinates(U(this),b,M,this.uom)},a.prototype.toPrecision=function(a){var b=function(b){return b.toPrecision(a)};return z.stringFromCoordinates(U(this),b,M,this.uom)},a.prototype.toString=function(a){var b=function(b){return b.toString(a)};return z.stringFromCoordinates(U(this),b,M,this.uom)},a.prototype.grade=function(a){if(this.lock_!==W)return d(this.clone().grade(a));switch(a){case 0:this.x=0,this.y=0,this.z=0,this.yz=0,this.zx=0,this.xy=0,this.b=0;break;case 1:this.a=0,this.yz=0,this.zx=0,this.xy=0,this.b=0;break;case 2:this.a=0,this.x=0,this.y=0,this.z=0,this.b=0;break;case 3:this.a=0,this.x=0,this.y=0,this.z=0,this.yz=0,this.zx=0,this.xy=0;break;default:this.a=0,this.x=0,this.y=0,this.z=0,this.yz=0,this.zx=0,this.xy=0,this.b=0}return this},a.prototype.ext=function(a){return this.lock_!==W?d(this.clone().ext(a)):this.ext2(this,a)},a.prototype.ext2=function(a,b){return j["default"](a,b,this)},a.prototype.zero=function(){return this.a=0,this.x=0,this.y=0,this.z=0,this.yz=0,this.zx=0,this.xy=0,this.b=0,this},a.prototype.__add__=function(a){var b=r.maskG3(a);return b?d(this.clone().add(b)):m["default"](a)?d(this.clone().addVector(a)):void 0},a.prototype.__div__=function(a){var b=r.maskG3(a);return b?d(this.clone().div(b)):void 0},a.prototype.__rdiv__=function(b){return b instanceof a?d(a.copy(b).div(this)):"number"==typeof b?d(a.scalar(b,void 0).div(this)):void 0},a.prototype.__mul__=function(a){var b=r.maskG3(a);return b?d(this.clone().mul(b)):void 0},a.prototype.__rmul__=function(b){return b instanceof a?d(a.copy(b).mul(this)):"number"==typeof b?d(a.copy(this).mulByNumber(b)):void 0},a.prototype.__radd__=function(b){return b instanceof a?d(a.copy(b).add(this)):"number"==typeof b?d(a.scalar(b).add(this)):m["default"](b)?d(a.fromVector(b).add(this)):void 0},a.prototype.__sub__=function(a){var b=r.maskG3(a);return b?d(this.clone().sub(b)):void 0},a.prototype.__rsub__=function(b){return b instanceof a?d(a.copy(b).sub(this)):"number"==typeof b?d(a.scalar(b).sub(this)):void 0},a.prototype.__tilde__=function(){return d(a.copy(this).rev())},a.prototype.__wedge__=function(b){return b instanceof a?d(a.copy(this).ext(b)):"number"==typeof b?d(a.copy(this).mulByNumber(b)):void 0},a.prototype.__rwedge__=function(b){return b instanceof a?d(a.copy(b).ext(this)):"number"==typeof b?d(a.copy(this).mulByNumber(b)):void 0},a.prototype.__lshift__=function(b){return b instanceof a?d(a.copy(this).lco(b)):"number"==typeof b?d(a.copy(this).lco(a.scalar(b))):void 0},a.prototype.__rlshift__=function(b){return b instanceof a?d(a.copy(b).lco(this)):"number"==typeof b?d(a.scalar(b).lco(this)):void 0},a.prototype.__rshift__=function(b){return b instanceof a?d(a.copy(this).rco(b)):"number"==typeof b?d(a.copy(this).rco(a.scalar(b))):void 0},a.prototype.__rrshift__=function(b){return b instanceof a?d(a.copy(b).rco(this)):"number"==typeof b?d(a.scalar(b).rco(this)):void 0},a.prototype.__vbar__=function(b){return b instanceof a?d(a.copy(this).scp(b)):"number"==typeof b?d(a.copy(this).scp(a.scalar(b))):void 0},a.prototype.__rvbar__=function(b){return b instanceof a?d(a.copy(b).scp(this)):"number"==typeof b?d(a.scalar(b).scp(this)):void 0},a.prototype.__bang__=function(){return d(a.copy(this).inv())},a.prototype.__pos__=function(){return d(a.copy(this))},a.prototype.__neg__=function(){return d(a.copy(this).neg())},a.bivector=function(b,c,d,e){return a.spinor(0,b,c,d,e)},a.copy=function(b){return new a(U(b),b.uom)},a.dual=function(b){return new a(N(),b.uom).dual(b)},a.dualOfBivector=function(b){return new a(P(-b.yz,-b.zx,-b.xy),b.uom)},a.dualOfVector=function(b){return new a(Q(b.x,b.y,b.z),b.uom)},a.fromBivector=function(b){return new a(Q(b.yz,b.zx,b.xy),b.uom)},a.fromScalar=function(b){return new a(O(b.a),b.uom)},a.fromSpinor=function(b){return new a(R(b.a,b.yz,b.zx,b.xy),b.uom)},a.fromVector=function(b){return new a(P(b.x,b.y,b.z),b.uom)},a.lerp=function(b,c,d){return a.copy(b).lerp(c,d)},a.pseudo=function(b,c){return new a(T(b),c)},a.random=function(){var b=-1,c=1,d=u["default"](b,c),e=u["default"](b,c),f=u["default"](b,c),g=u["default"](b,c),h=u["default"](b,c),i=u["default"](b,c),j=u["default"](b,c),k=u["default"](b,c);return new a(S(d,e,f,g,h,i,j,k),(void 0))},a.rotorFromDirections=function(b,c){return new a(N(),(void 0)).rotorFromDirections(b,c)},a.rotorFromFrameToFrame=function(b,c){return new a(N(),(void 0)).rotorFromFrameToFrame(b,c)},a.rotorFromVectorToVector=function(b,c,d){return new a(N(),(void 0)).rotorFromVectorToVector(b,c,d)},a.scalar=function(b,c){return new a(O(b),c)},a.spinor=function(b,c,d,e,f){return new a(R(b,c,d,e),f)},a.vector=function(b,c,d,e){return new a(P(b,c,d),e)},a.wedge=function(b,c){var d=b.x,e=b.y,f=b.z,g=c.x,h=c.y,i=c.z,j=C["default"](d,e,f,g,h,i),k=D["default"](d,e,f,g,h,i),l=B["default"](d,e,f,g,h,i);return a.spinor(0,j,k,l,A.Unit.mul(b.uom,c.uom))},a.zero=d(new a(N(),(void 0))),a.one=d(new a(O(1),(void 0))),a.e1=d(new a(P(1,0,0),(void 0))),a.e2=d(new a(P(0,1,0),(void 0))),a.e3=d(new a(P(0,0,1),(void 0))),a.I=d(new a(T(1),(void 0))),a.meter=d(new a(O(1),A.Unit.METER)),a.kilogram=d(new a(O(1),A.Unit.KILOGRAM)),a.second=d(new a(O(1),A.Unit.SECOND)),a.ampere=d(new a(O(1),A.Unit.AMPERE)),a.kelvin=d(new a(O(1),A.Unit.KELVIN)),a.mole=d(new a(O(1),A.Unit.MOLE)),a.candela=d(new a(O(1),A.Unit.CANDELA)),a.coulomb=d(new a(O(1),A.Unit.COULOMB)),a.newton=d(new a(O(1),A.Unit.NEWTON)),a.joule=d(new a(O(1),A.Unit.JOULE)),a}(),a("Geometric3",X)}}}),System.register("davinci-newton/checks/isDefined.js",[],function(a,b){"use strict";function c(a){return"undefined"!=typeof a}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/checks/mustBeDefined.js",["../checks/mustSatisfy","../checks/isDefined"],function(a,b){"use strict";function c(){return"not be 'undefined'"}function d(a,b,d){return e["default"](a,f["default"](b),c,d),b}var e,f;b&&b.id;return a("default",d),{setters:[function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-newton/checks/isInteger.js",["../checks/isNumber"],function(a,b){"use strict";function c(a){return d["default"](a)&&a%1===0}var d;b&&b.id;return a("default",c),{setters:[function(a){d=a}],execute:function(){}}}),System.register("davinci-newton/checks/mustBeInteger.js",["../checks/mustSatisfy","../checks/isInteger"],function(a,b){"use strict";function c(){return"be an integer"}function d(a,b,d){return e["default"](a,f["default"](b),c,d),b}var e,f;b&&b.id;return a("default",d),{setters:[function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-newton/math/AbstractMatrix.js",["../checks/mustBeDefined","../checks/mustBeInteger","./Unit"],function(a,b){
"use strict";function c(a,b){if(a.length!==b)throw new Error("elements must have length "+b)}var d,e,f,g;b&&b.id;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(){function a(a,b,g){this._elements=d["default"]("elements",a),this._dimensions=e["default"]("dimensions",b),this._length=b*b,c(a,this._length),this.modified=!1,this.uom=f.Unit.mustBeUnit("uom",g)}return Object.defineProperty(a.prototype,"dimensions",{get:function(){return this._dimensions},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"elements",{get:function(){return this._elements},set:function(a){c(a,this._length),this._elements=a},enumerable:!1,configurable:!0}),a.prototype.copy=function(a){for(var b=this.dimensions,c=0;c<b;c++)for(var d=0;d<b;d++){var e=a.getElement(c,d);this.setElement(c,d,e)}return this.uom=a.uom,this},a.prototype.getElement=function(a,b){return this.elements[a+b*this._dimensions]},a.prototype.isOne=function(){for(var a=0;a<this._dimensions;a++)for(var b=0;b<this._dimensions;b++){var c=this.getElement(a,b);if(a===b){if(1!==c)return!1}else if(0!==c)return!1}return!0},a.prototype.setElement=function(a,b,c){this.elements[a+b*this._dimensions]=c},a}(),a("default",g)}}}),System.register("davinci-newton/math/det3x3.js",[],function(a,b){"use strict";function c(a){var b=a[0],c=a[3],d=a[6],e=a[1],f=a[4],g=a[7],h=a[2],i=a[5],j=a[8];return b*f*j+c*g*h+d*e*i-b*g*i-c*e*j-d*f*h}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/math/inv3x3.js",["../math/det3x3"],function(a,b){"use strict";function c(a,b){var c=d["default"](a),e=a[0],f=a[3],g=a[6],h=a[1],i=a[4],j=a[7],k=a[2],l=a[5],m=a[8],n=i*m-j*l,o=g*l-f*m,p=f*j-g*i,q=j*k-h*m,r=e*m-g*k,s=g*h-e*j,t=h*l-i*k,u=f*k-e*l,v=e*i-f*h,w=1/c;b[0]=n*w,b[3]=o*w,b[6]=p*w,b[1]=q*w,b[4]=r*w,b[7]=s*w,b[2]=t*w,b[5]=u*w,b[8]=v*w}var d;b&&b.id;return a("default",c),{setters:[function(a){d=a}],execute:function(){}}}),System.register("davinci-newton/math/mul3x3.js",[],function(a,b){"use strict";function c(a,b,c){var d=a[0],e=a[3],f=a[6],g=a[1],h=a[4],i=a[7],j=a[2],k=a[5],l=a[8],m=b[0],n=b[3],o=b[6],p=b[1],q=b[4],r=b[7],s=b[2],t=b[5],u=b[8];return c[0]=d*m+e*p+f*s,c[3]=d*n+e*q+f*t,c[6]=d*o+e*r+f*u,c[1]=g*m+h*p+i*s,c[4]=g*n+h*q+i*t,c[7]=g*o+h*r+i*u,c[2]=j*m+k*p+l*s,c[5]=j*n+k*q+l*t,c[8]=j*o+k*r+l*u,c}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/math/Matrix3.js",["./AbstractMatrix","./inv3x3","./mul3x3"],function(a,b){"use strict";var c,d,e,f,g=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(a){function b(b,c){return a.call(this,b,3,c)||this}return g(b,a),b.prototype.inv=function(){return d["default"](this.elements,this.elements),this},b.prototype.mul=function(a){return this.mul2(this,a)},b.prototype.rmul=function(a){return e["default"](a.elements,this.elements,this.elements),this},b.prototype.mul2=function(a,b){return e["default"](a.elements,b.elements,this.elements),this},b.prototype.rotation=function(a){var b=-a.yz,c=-a.zx,d=-a.xy,e=a.a,f=b+b,g=c+c,h=d+d,i=b*f,j=b*g,k=b*h,l=c*g,m=c*h,n=d*h,o=e*f,p=e*g,q=e*h;return this.set(1-l-n,j-q,k+p,j+q,1-i-n,m-o,k-p,m+o,1-i-l),this},b.prototype.row=function(a){var b=this.elements;return[b[0+a],b[3+a],b[6+a]]},b.prototype.set=function(a,b,c,d,e,f,g,h,i){var j=this.elements;return j[0]=a,j[3]=b,j[6]=c,j[1]=d,j[4]=e,j[7]=f,j[2]=g,j[5]=h,j[8]=i,this},b.prototype.toString=function(a){for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b,c){return b.toString(a)}).join(" "));return b.join("\n")},b.prototype.transpose=function(){var a,b=this.elements;return a=b[1],b[1]=b[3],b[3]=a,a=b[2],b[2]=b[6],b[6]=a,a=b[5],b[5]=b[7],b[7]=a,this},b.one=function(){return new b(new Float32Array([1,0,0,0,1,0,0,0,1]))},b.zero=function(){return new b(new Float32Array([0,0,0,0,0,0,0,0,0]))},b}(c["default"]),a("Matrix3",f)}}}),System.register("davinci-newton/checks/mustBeNumber.js",["../checks/mustSatisfy","../checks/isNumber"],function(a,b){"use strict";function c(){return"be a `number`"}function d(a,b,d){return e["default"](a,f["default"](b),c,d),b}var e,f;b&&b.id;return a("default",d),{setters:[function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-newton/math/Scalar3.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){c=function(){function a(a,b){this.a_=a,this.uom_=b}return Object.defineProperty(a.prototype,"a",{get:function(){return this.a_},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"uom",{get:function(){return this.uom_},enumerable:!1,configurable:!0}),a.prototype.mulByNumber=function(b){return new a(b*this.a,this.uom)},a}(),a("Scalar3",c),a("default",c)}}}),System.register("davinci-newton/checks/isUndefined.js",[],function(a,b){"use strict";function c(a){return"undefined"==typeof a}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/math/QQ.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){c=function(){function a(a,b){var c,d=function(a,b){var c;for(a<0&&(a=-a),b<0&&(b=-b),b>a&&(c=a,a=b,b=c);;){if(a%=b,0===a)return b;if(b%=a,0===b)return a}};if(0===b)throw new Error("denominator must not be zero");c=0===a?1:d(Math.abs(a),Math.abs(b)),b<0&&(a=-a,b=-b),this.numer_=a/c,this.denom_=b/c}return Object.defineProperty(a.prototype,"numer",{get:function(){return this.numer_},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"denom",{get:function(){return this.denom_},enumerable:!1,configurable:!0}),a.prototype.add=function(b){return a.valueOf(this.numer_*b.denom_+this.denom_*b.numer_,this.denom_*b.denom_)},a.prototype.sub=function(b){return a.valueOf(this.numer_*b.denom_-this.denom_*b.numer_,this.denom_*b.denom_)},a.prototype.mul=function(b){return a.valueOf(this.numer_*b.numer_,this.denom_*b.denom_)},a.prototype.div=function(b){var c=this.numer_*b.denom_,d=this.denom_*b.numer_;return 0===c?0===d?a.valueOf(c,d):a.ZERO:0===d?a.valueOf(c,d):a.valueOf(c,d)},a.prototype.isOne=function(){return 1===this.numer_&&1===this.denom_},a.prototype.isZero=function(){return 0===this.numer_&&1===this.denom_},a.prototype.hashCode=function(){return 37*this.numer_+13*this.denom_},a.prototype.inv=function(){return a.valueOf(this.denom_,this.numer_)},a.prototype.neg=function(){return a.valueOf(-this.numer_,this.denom_)},a.prototype.equals=function(b){return this===b||b instanceof a&&this.numer_*b.denom_===this.denom_*b.numer_},a.prototype.toString=function(a){return""+this.numer_.toString(a)+"/"+this.denom_.toString(a)},a.prototype.__add__=function(b){return b instanceof a?this.add(b):void 0},a.prototype.__radd__=function(b){return b instanceof a?b.add(this):void 0},a.prototype.__sub__=function(b){return b instanceof a?this.sub(b):void 0},a.prototype.__rsub__=function(b){return b instanceof a?b.sub(this):void 0},a.prototype.__mul__=function(b){return b instanceof a?this.mul(b):void 0},a.prototype.__rmul__=function(b){return b instanceof a?b.mul(this):void 0},a.prototype.__div__=function(b){return b instanceof a?this.div(b):void 0},a.prototype.__rdiv__=function(b){return b instanceof a?b.div(this):void 0},a.prototype.__pos__=function(){return this},a.prototype.__neg__=function(){return this.neg()},a.valueOf=function(b,c){if(0===b){if(0!==c)return a.ZERO}else if(0===c);else{if(b===c)return a.ONE;if(1===b){if(2===c)return a.POS_01_02;if(3===c)return a.POS_01_03;if(4===c)return a.POS_01_04;if(5===c)return a.POS_01_05;if(c===-3)return a.NEG_01_03}else if(b===-1){if(1===c)return a.NEG_01_01;if(3===c)return a.NEG_01_03}else if(2===b){if(1===c)return a.POS_02_01;if(3===c)return a.POS_02_03}else if(b===-2){if(1===c)return a.NEG_02_01}else if(3===b){if(1===c)return a.POS_03_01}else if(b===-3){if(1===c)return a.NEG_03_01}else if(4===b){if(1===c)return a.POS_04_01}else if(5===b){if(1===c)return a.POS_05_01}else if(6===b){if(1===c)return a.POS_06_01}else if(7===b){if(1===c)return a.POS_07_01}else if(8===b&&1===c)return a.POS_08_01}return new a(b,c)},a.POS_08_01=new a(8,1),a.POS_07_01=new a(7,1),a.POS_06_01=new a(6,1),a.POS_05_01=new a(5,1),a.POS_04_01=new a(4,1),a.POS_03_01=new a(3,1),a.POS_02_01=new a(2,1),a.ONE=new a(1,1),a.POS_01_02=new a(1,2),a.POS_01_03=new a(1,3),a.POS_01_04=new a(1,4),a.POS_01_05=new a(1,5),a.ZERO=new a(0,1),a.NEG_01_03=new a((-1),3),a.NEG_01_01=new a((-1),1),a.NEG_02_01=new a((-2),1),a.NEG_03_01=new a((-3),1),a.POS_02_03=new a(2,3),a}(),a("QQ",c)}}}),System.register("davinci-newton/math/detectDimensions.js",["./DimensionsSummary"],function(a,b){"use strict";function c(a,b,c,e,f,g,h){if(a.numer===-1){if(1===a.denom)if(b.numer===-2){if(1===b.denom&&0===c.numer&&1===c.denom&&0===e.numer&&1===e.denom&&0===f.numer&&1===f.denom&&0===g.numer&&1===g.denom&&0===h.numer&&1===h.denom)return d["default"].INV_MOMENT_OF_INERTIA}else if(b.numer===-1){if(1===b.denom&&2===c.numer&&1===c.denom&&2===e.numer&&1===e.denom&&0===f.numer&&1===f.denom&&0===g.numer&&1===g.denom&&0===h.numer&&1===h.denom)return d["default"].ELECTRIC_PERMITTIVITY_TIMES_AREA}else if(0===b.numer&&1===b.denom&&0===c.numer&&1===c.denom&&0===e.numer&&1===e.denom&&0===f.numer&&1===f.denom&&0===g.numer&&1===g.denom&&0===h.numer&&1===h.denom)return d["default"].INV_MASS}else if(0===a.numer){if(1===a.denom)if(b.numer===-1){if(1===b.denom&&0===c.numer&&1===c.denom&&0===e.numer&&1===e.denom&&0===f.numer&&1===f.denom&&0===g.numer&&1===g.denom&&0===h.numer&&1===h.denom)return d["default"].INV_LENGTH}else if(0===b.numer){if(1===b.denom)if(c.numer===-1){if(1===c.denom)if(0===e.numer){if(1===e.denom&&0===f.numer&&1===f.denom&&0===g.numer&&1===g.denom&&0===h.numer&&1===h.denom)return d["default"].INV_TIME}else if(1===e.numer&&1===e.denom&&0===f.numer&&1===f.denom&&0===g.numer&&1===g.denom&&0===h.numer&&1===h.denom)return d["default"].ELECTRIC_CURRENT}else if(0===c.numer){if(1===c.denom)if(0===e.numer){if(1===e.denom)if(0===f.numer){if(1===f.denom)if(0===g.numer){if(1===g.denom)if(0===h.numer){if(1===h.denom)return d["default"].ONE}else if(1===h.numer&&1===h.denom)return d["default"].LUMINOUS_INTENSITY}else if(1===g.numer&&1===g.denom&&0===h.numer&&1===h.denom)return d["default"].AMOUNT_OF_SUBSTANCE}else if(1===f.numer&&1===f.denom&&0===g.numer&&1===g.denom&&0===h.numer&&1===h.denom)return d["default"].THERMODYNAMIC_TEMPERATURE}else if(1===e.numer&&1===e.denom&&0===f.numer&&1===f.denom&&0===g.numer&&1===g.denom&&0===h.numer&&1===h.denom)return d["default"].ELECTRIC_CHARGE}else if(1===c.numer){if(1===c.denom&&0===e.numer&&1===e.denom&&0===f.numer&&1===f.denom&&0===g.numer&&1===g.denom&&0===h.numer&&1===h.denom)return d["default"].TIME}else if(2===c.numer&&1===c.denom&&0===e.numer&&1===e.denom&&0===f.numer&&1===f.denom&&0===g.numer&&1===g.denom&&0===h.numer&&1===h.denom)return d["default"].TIME_SQUARED}else if(1===b.numer){if(1===b.denom)if(c.numer===-1){if(1===c.denom&&0===e.numer&&1===e.denom&&0===f.numer&&1===f.denom&&0===g.numer&&1===g.denom&&0===h.numer&&1===h.denom)return d["default"].VELOCITY}else if(0===c.numer&&1===c.denom&&0===e.numer&&1===e.denom&&0===f.numer&&1===f.denom&&0===g.numer&&1===g.denom&&0===h.numer&&1===h.denom)return d["default"].LENGTH}else if(2===b.numer){if(1===b.denom){if(c.numer===-2&&1===c.denom&&0===e.numer&&1===e.denom&&0===f.numer&&1===f.denom&&0===g.numer&&1===g.denom&&0===h.numer&&1===h.denom)return d["default"].VELOCITY_SQUARED;if(c.numer===-1){if(1===c.denom&&0===e.numer&&1===e.denom&&0===f.numer&&1===f.denom&&0===g.numer&&1===g.denom&&0===h.numer&&1===h.denom)return d["default"].RATE_OF_CHANGE_OF_AREA}else if(0===c.numer&&1===c.denom&&0===e.numer&&1===e.denom&&0===f.numer&&1===f.denom&&0===g.numer&&1===g.denom&&0===h.numer&&1===h.denom)return d["default"].AREA}}else if(3===b.numer&&1===b.denom&&0===c.numer&&1===c.denom&&0===e.numer&&1===e.denom&&0===f.numer&&1===f.denom&&0===g.numer&&1===g.denom&&0===h.numer&&1===h.denom)return d["default"].VOLUME}else if(1===a.numer){if(1===a.denom)if(0===b.numer){if(1===b.denom)if(c.numer===-2){if(1===c.denom&&0===e.numer&&1===e.denom&&0===f.numer&&1===f.denom&&0===g.numer&&1===g.denom&&0===h.numer&&1===h.denom)return d["default"].STIFFNESS}else if(0===c.numer&&1===c.denom&&0===e.numer&&1===e.denom&&0===f.numer&&1===f.denom&&0===g.numer&&1===g.denom&&0===h.numer&&1===h.denom)return d["default"].MASS}else if(1===b.numer){if(1===b.denom)if(c.numer===-2){if(1===c.denom)if(e.numer===-1){if(1===e.denom&&0===f.numer&&1===f.denom&&0===g.numer&&1===g.denom&&0===h.numer&&1===h.denom)return d["default"].ELECTRIC_FIELD}else if(0===e.numer&&1===e.denom&&0===f.numer&&1===f.denom&&0===g.numer&&1===g.denom&&0===h.numer&&1===h.denom)return d["default"].FORCE}else if(c.numer===-1&&1===c.denom&&0===e.numer&&1===e.denom&&0===f.numer&&1===f.denom&&0===g.numer&&1===g.denom&&0===h.numer&&1===h.denom)return d["default"].MOMENTUM}else if(2===b.numer&&1===b.denom)if(c.numer===-2){if(1===c.denom&&0===e.numer&&1===e.denom&&0===f.numer&&1===f.denom&&0===g.numer&&1===g.denom&&0===h.numer&&1===h.denom)return d["default"].ENERGY_OR_TORQUE}else if(c.numer===-1){if(1===c.denom&&0===e.numer&&1===e.denom&&0===f.numer&&1===f.denom&&0===g.numer&&1===g.denom&&0===h.numer&&1===h.denom)return d["default"].ANGULAR_MOMENTUM}else if(0===c.numer&&1===c.denom&&0===e.numer&&1===e.denom&&0===f.numer&&1===f.denom&&0===g.numer&&1===g.denom&&0===h.numer&&1===h.denom)return d["default"].MOMENT_OF_INERTIA}else if(2===a.numer&&1===a.denom&&2===b.numer&&1===b.denom&&c.numer===-2&&1===c.denom&&0===e.numer&&1===e.denom&&0===f.numer&&1===f.denom&&0===g.numer&&1===g.denom&&0===h.numer&&1===h.denom)return d["default"].MOMENTUM_SQUARED}var d;b&&b.id;return a("default",c),{setters:[function(a){d=a}],execute:function(){}}}),System.register("davinci-newton/math/Dimensions.js",["../math/QQ","./detectDimensions","./DimensionsSummary"],function(a,b){"use strict";function c(a,b){if(b instanceof e.QQ)return b;throw new Error("Argument "+a+" => "+b+" must be a QQ")}function d(a){switch(a){case"dimensionless":case"lax":case"strict":case"units":n=a;break;default:throw new Error("mode must be 'dimensionless' or 'units' or 'strict' or 'lax'.")}}var e,f,g,h,i,j,k,l,m,n,o;b&&b.id;return a("setExecutionMode",d),{setters:[function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=e.QQ.valueOf(0,1),i=e.QQ.valueOf(1,1),j=e.QQ.valueOf(2,1),k=e.QQ.valueOf(3,1),l=e.QQ.valueOf(-1,1),m=e.QQ.valueOf(-2,1),n="strict",o=function(){function a(a,b,d,e,f,g,h,i){this.M=c("M",a),this.L=c("L",b),this.T=c("T",d),this.Q=c("Q",e),this.temperature=c("temperature",f),this.amount=c("amount",g),this.intensity=c("intensity",h),this.summary_=i}return Object.defineProperty(a.prototype,"summary",{get:function(){return this.summary_},enumerable:!1,configurable:!0}),a.prototype.compatible=function(a){if("number"==typeof this.summary_&&this.summary_===a.summary_)return this;if(this.M.equals(a.M)&&this.L.equals(a.L)&&this.T.equals(a.T)&&this.Q.equals(a.Q)&&this.temperature.equals(a.temperature)&&this.amount.equals(a.amount)&&this.intensity.equals(a.intensity))return this;if(this.isOne()){if(a.isOne())throw new Error;var b="Dimensions must be equal (dimensionless, "+a+")";switch(n){case"dimensionless":return console.warn(b),this;case"units":return console.warn(b),a;case"lax":return a;default:throw new Error(b)}}else if(a.isOne()){var b="Dimensions must be equal ("+this+", dimensionless)";switch(n){case"dimensionless":return console.warn(b),a;case"units":return console.warn(b),this;case"lax":return this;default:throw new Error(b)}}else{var b="Dimensions must be equal ("+this+", "+a+")";switch(n){case"dimensionless":return console.warn(b),this;case"units":return console.warn(b),this;case"lax":return this;default:throw new Error(b)}}},a.prototype.equals=function(a){return this===a||this.M.equals(a.M)&&this.L.equals(a.L)&&this.T.equals(a.T)&&this.Q.equals(a.Q)&&this.temperature.equals(a.temperature)&&this.amount.equals(a.amount)&&this.intensity.equals(a.intensity)},a.prototype.mul=function(b){return a.valueOf(this.M.add(b.M),this.L.add(b.L),this.T.add(b.T),this.Q.add(b.Q),this.temperature.add(b.temperature),this.amount.add(b.amount),this.intensity.add(b.intensity))},a.prototype.div=function(b){return a.valueOf(this.M.sub(b.M),this.L.sub(b.L),this.T.sub(b.T),this.Q.sub(b.Q),this.temperature.sub(b.temperature),this.amount.sub(b.amount),this.intensity.sub(b.intensity))},a.prototype.pow=function(b){return a.valueOf(this.M.mul(b),this.L.mul(b),this.T.mul(b),this.Q.mul(b),this.temperature.mul(b),this.amount.mul(b),this.intensity.mul(b))},a.prototype.sqrt=function(){return a.valueOf(this.M.div(j),this.L.div(j),this.T.div(j),this.Q.div(j),this.temperature.div(j),this.amount.div(j),this.intensity.div(j))},a.prototype.isOne=function(){return this===a.ONE||this.M.isZero()&&this.L.isZero()&&this.T.isZero()&&this.Q.isZero()&&this.temperature.isZero()&&this.amount.isZero()&&this.intensity.isZero()},a.prototype.inv=function(){return a.valueOf(this.M.neg(),this.L.neg(),this.T.neg(),this.Q.neg(),this.temperature.neg(),this.amount.neg(),this.intensity.neg())},a.prototype.toString=function(){var a=function(a,b){return 0===a.numer?null:1===a.denom?1===a.numer?""+b:""+b+" ** "+a.numer:""+b+" ** "+a};return[a(this.M,"mass"),a(this.L,"length"),a(this.T,"time"),a(this.Q,"charge"),a(this.temperature,"thermodynamic temperature"),a(this.amount,"amount of substance"),a(this.intensity,"luminous intensity")].filter(function(a){return"string"==typeof a}).join(" * ")},a.prototype.__add__=function(b){return b instanceof a?this.compatible(b):void 0},a.prototype.__radd__=function(b){return b instanceof a?b.compatible(this):void 0},a.prototype.__sub__=function(b){return b instanceof a?this.compatible(b):void 0},a.prototype.__rsub__=function(b){return b instanceof a?b.compatible(this):void 0},a.prototype.__mul__=function(b){return b instanceof a?this.mul(b):void 0},a.prototype.__rmul__=function(b){return b instanceof a?b.mul(this):void 0},a.prototype.__div__=function(b){return b instanceof a?this.div(b):void 0},a.prototype.__rdiv__=function(b){return b instanceof a?b.div(this):void 0},a.prototype.__pos__=function(){return this},a.prototype.__neg__=function(){return this},a.valueOf=function(b,c,d,e,h,i,j){var k=f["default"](b,c,d,e,h,i,j);switch(k){case g["default"].AMOUNT_OF_SUBSTANCE:return a.AMOUNT_OF_SUBSTANCE;case g["default"].ANGULAR_MOMENTUM:return a.ANGULAR_MOMENTUM;case g["default"].AREA:return a.AREA;case g["default"].ELECTRIC_CHARGE:return a.ELECTRIC_CHARGE;case g["default"].ELECTRIC_CURRENT:return a.ELECTRIC_CURRENT;case g["default"].ELECTRIC_FIELD:return a.ELECTRIC_FIELD;case g["default"].ELECTRIC_PERMITTIVITY_TIMES_AREA:return a.ELECTRIC_PERMITTIVITY_TIMES_AREA;case g["default"].ENERGY_OR_TORQUE:return a.ENERGY_OR_TORQUE;case g["default"].FORCE:return a.FORCE;case g["default"].LUMINOUS_INTENSITY:return a.LUMINOUS_INTENSITY;case g["default"].INV_LENGTH:return a.INV_LENGTH;case g["default"].INV_MASS:return a.INV_MASS;case g["default"].INV_MOMENT_OF_INERTIA:return a.INV_MOMENT_OF_INERTIA;case g["default"].INV_TIME:return a.INV_TIME;case g["default"].LENGTH:return a.LENGTH;case g["default"].MASS:return a.MASS;case g["default"].MOMENT_OF_INERTIA:return a.MOMENT_OF_INERTIA;case g["default"].MOMENTUM:return a.MOMENTUM;case g["default"].MOMENTUM_SQUARED:return a.MOMENTUM_SQUARED;case g["default"].ONE:return a.ONE;case g["default"].RATE_OF_CHANGE_OF_AREA:return a.RATE_OF_CHANGE_OF_AREA;case g["default"].STIFFNESS:return a.STIFFNESS;case g["default"].THERMODYNAMIC_TEMPERATURE:return a.THERMODYNAMIC_TEMPERATURE;case g["default"].TIME:return a.TIME;case g["default"].TIME_SQUARED:return a.TIME_SQUARED;case g["default"].VELOCITY:return a.VELOCITY;case g["default"].VELOCITY_SQUARED:return a.VELOCITY_SQUARED;default:return new a(b,c,d,e,h,i,j,k)}},a.ONE=new a(h,h,h,h,h,h,h,g["default"].ONE),a.MASS=new a(i,h,h,h,h,h,h,g["default"].MASS),a.LENGTH=new a(h,i,h,h,h,h,h,g["default"].LENGTH),a.AREA=new a(h,j,h,h,h,h,h,g["default"].AREA),a.VOLUME=new a(h,k,h,h,h,h,h,g["default"].VOLUME),a.INV_LENGTH=new a(h,l,h,h,h,h,h,g["default"].INV_LENGTH),a.TIME=new a(h,h,i,h,h,h,h,g["default"].TIME),a.ELECTRIC_CHARGE=new a(h,h,h,i,h,h,h,g["default"].ELECTRIC_CHARGE),a.ELECTRIC_CURRENT=new a(h,h,l,i,h,h,h,g["default"].ELECTRIC_CURRENT),a.THERMODYNAMIC_TEMPERATURE=new a(h,h,h,h,i,h,h,g["default"].THERMODYNAMIC_TEMPERATURE),a.AMOUNT_OF_SUBSTANCE=new a(h,h,h,h,h,i,h,g["default"].AMOUNT_OF_SUBSTANCE),a.LUMINOUS_INTENSITY=new a(h,h,h,h,h,h,i,g["default"].LUMINOUS_INTENSITY),a.ANGULAR_MOMENTUM=new a(i,j,l,h,h,h,h,g["default"].ANGULAR_MOMENTUM),a.RATE_OF_CHANGE_OF_AREA=new a(h,j,l,h,h,h,h,g["default"].RATE_OF_CHANGE_OF_AREA),a.ELECTRIC_FIELD=new a(i,i,m,l,h,h,h,g["default"].ELECTRIC_FIELD),a.ELECTRIC_PERMITTIVITY_TIMES_AREA=new a(l,l,j,j,h,h,h,g["default"].ELECTRIC_PERMITTIVITY_TIMES_AREA),a.ENERGY_OR_TORQUE=new a(i,j,m,h,h,h,h,g["default"].ENERGY_OR_TORQUE),a.FORCE=new a(i,i,m,h,h,h,h,g["default"].FORCE),a.INV_MASS=new a(l,h,h,h,h,h,h,g["default"].INV_MASS),a.INV_MOMENT_OF_INERTIA=new a(l,m,h,h,h,h,h,g["default"].INV_MOMENT_OF_INERTIA),a.INV_TIME=new a(h,h,l,h,h,h,h,g["default"].INV_TIME),a.MOMENT_OF_INERTIA=new a(i,j,h,h,h,h,h,g["default"].MOMENT_OF_INERTIA),a.MOMENTUM=new a(i,i,l,h,h,h,h,g["default"].MOMENTUM),a.MOMENTUM_SQUARED=new a(j,j,m,h,h,h,h,g["default"].MOMENTUM_SQUARED),a.STIFFNESS=new a(i,h,m,h,h,h,h,g["default"].STIFFNESS),a.TIME_SQUARED=new a(h,h,j,h,h,h,h,g["default"].TIME_SQUARED),a.VELOCITY=new a(h,i,l,h,h,h,h,g["default"].VELOCITY),a.VELOCITY_SQUARED=new a(h,j,m,h,h,h,h,g["default"].VELOCITY_SQUARED),a}(),a("Dimensions",o)}}}),System.register("davinci-newton/math/DimensionsSummary.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){!function(a){a[a.AMOUNT_OF_SUBSTANCE=0]="AMOUNT_OF_SUBSTANCE",a[a.ANGULAR_MOMENTUM=1]="ANGULAR_MOMENTUM",a[a.AREA=2]="AREA",a[a.ELECTRIC_CHARGE=3]="ELECTRIC_CHARGE",a[a.ELECTRIC_CURRENT=4]="ELECTRIC_CURRENT",a[a.ELECTRIC_FIELD=5]="ELECTRIC_FIELD",a[a.ELECTRIC_PERMITTIVITY_TIMES_AREA=6]="ELECTRIC_PERMITTIVITY_TIMES_AREA",a[a.ENERGY_OR_TORQUE=7]="ENERGY_OR_TORQUE",a[a.FORCE=8]="FORCE",a[a.LUMINOUS_INTENSITY=9]="LUMINOUS_INTENSITY",a[a.INV_LENGTH=10]="INV_LENGTH",a[a.INV_MOMENT_OF_INERTIA=11]="INV_MOMENT_OF_INERTIA",a[a.INV_MASS=12]="INV_MASS",a[a.INV_TIME=13]="INV_TIME",a[a.LENGTH=14]="LENGTH",a[a.MASS=15]="MASS",a[a.MOMENT_OF_INERTIA=16]="MOMENT_OF_INERTIA",a[a.MOMENTUM=17]="MOMENTUM",a[a.MOMENTUM_SQUARED=18]="MOMENTUM_SQUARED",a[a.ONE=19]="ONE",a[a.RATE_OF_CHANGE_OF_AREA=20]="RATE_OF_CHANGE_OF_AREA",a[a.STIFFNESS=21]="STIFFNESS",a[a.TIME=22]="TIME",a[a.TIME_SQUARED=23]="TIME_SQUARED",a[a.THERMODYNAMIC_TEMPERATURE=24]="THERMODYNAMIC_TEMPERATURE",a[a.VELOCITY=25]="VELOCITY",a[a.VELOCITY_SQUARED=26]="VELOCITY_SQUARED",a[a.VOLUME=27]="VOLUME"}(c||(c={})),a("DimensionsSummary",c),a("default",c)}}}),System.register("davinci-newton/math/Unit.js",["../checks/isUndefined","../math/Dimensions","../math/DimensionsSummary"],function(a,b){"use strict";function c(a,b){return p.valueOf(a.multiplier+b.multiplier,a.dimensions.compatible(b.dimensions),a.labels)}function d(a,b){return p.valueOf(a.multiplier-b.multiplier,a.dimensions.compatible(b.dimensions),a.labels)}function e(a,b){return p.valueOf(a.multiplier*b.multiplier,a.dimensions.mul(b.dimensions),a.labels)}function f(a,b){return p.valueOf(a*b.multiplier,b.dimensions,b.labels)}function g(a,b){return p.valueOf(a.multiplier/b.multiplier,a.dimensions.div(b.dimensions),a.labels)}var h,i,j,k,l,m,n,o,p;b&&b.id;return{setters:[function(a){h=a},function(a){i=a},function(a){j=a}],execute:function(){k=["kg","m","s","C","K","mol","cd"],l=[[-1,1,-3,1,2,1,2,1,0,1,0,1,0,1],[-1,1,-2,1,1,1,2,1,0,1,0,1,0,1],[-1,1,-2,1,2,1,2,1,0,1,0,1,0,1],[-1,1,-1,1,2,1,2,1,0,1,0,1,0,1],[-1,1,0,1,0,1,1,1,0,1,0,1,0,1],[-1,1,3,1,-2,1,0,1,0,1,0,1,0,1],[0,1,-3,1,0,1,1,1,0,1,0,1,0,1],[0,1,-2,1,0,1,1,1,0,1,0,1,0,1],[0,1,-1,1,0,1,1,1,0,1,0,1,0,1],[0,1,2,1,-2,1,0,1,0,1,0,1,0,1],[0,1,0,1,-1,1,0,1,0,1,0,1,0,1],[0,1,0,1,-1,1,1,1,0,1,0,1,0,1],[0,1,1,1,-2,1,0,1,0,1,0,1,0,1],[0,1,1,1,-1,1,0,1,0,1,0,1,0,1],[1,1,1,1,-1,1,0,1,0,1,0,1,0,1],[1,1,-1,1,-2,1,0,1,0,1,0,1,0,1],[1,1,-1,1,-1,1,0,1,0,1,0,1,0,1],[1,1,0,1,-3,1,0,1,0,1,0,1,0,1],[1,1,0,1,-2,1,0,1,0,1,0,1,0,1],[1,1,0,1,-1,1,-1,1,0,1,0,1,0,1],[1,1,1,1,-3,1,0,1,-1,1,0,1,0,1],[1,1,1,1,-2,1,-1,1,0,1,0,1,0,1],[1,1,1,1,-2,1,0,1,0,1,0,1,0,1],[1,1,1,1,0,1,-2,1,0,1,0,1,0,1],[1,1,2,1,-2,1,0,1,-1,1,0,1,0,1],[0,1,2,1,-2,1,0,1,-1,1,0,1,0,1],[1,1,2,1,-2,1,0,1,-1,1,-1,1,0,1],[1,1,2,1,-2,1,0,1,0,1,-1,1,0,1],[1,1,2,1,-2,1,0,1,0,1,0,1,0,1],[1,1,2,1,-1,1,0,1,0,1,0,1,0,1],[1,1,2,1,-3,1,0,1,0,1,0,1,0,1],[1,1,2,1,-2,1,-1,1,0,1,0,1,0,1],[1,1,2,1,-1,1,-2,1,0,1,0,1,0,1],[1,1,2,1,0,1,-2,1,0,1,0,1,0,1],[1,1,2,1,-1,1,-1,1,0,1,0,1,0,1],[1,1,3,1,-2,1,-2,1,0,1,0,1,0,1]],m=[["F/m or C**2/N·m**2"],["S or A/V"],["F or C/V"],["C**2/N"],["C/kg"],["N·m·m/kg·kg"],["C/m**3"],["C/m**2"],["C/m"],["J/kg"],["Hz"],["A"],["m/s**2"],["m/s"],["kg·m/s"],["Pa or N/m**2 or J/m**3"],["Pa·s"],["W/m**2"],["N/m"],["T or Wb/m**2"],["W/(m·K)"],["V/m or N/C"],["N"],["H/m"],["J/K"],["J/(kg·K)"],["J/(mol·K)"],["J/mol"],["J or N·m"],["J·s"],["W or J/s"],["V or W/A"],["Ω or V/A"],["H or Wb/A"],["Wb"],["N·m**2/C**2"]],n=function(a,b,c,d,e){var f=function(a,b){return 0===a.numer?null:1===a.denom?1===a.numer?e?b:b:b+"**"+a.numer:b+"**"+a},g=(1===a||c.isOne())&&e?"":" ",h=1===a&&e?"":b,i=[f(c.M,d[0]),f(c.L,d[1]),f(c.T,d[2]),f(c.Q,d[3]),f(c.temperature,d[4]),f(c.amount,d[5]),f(c.intensity,d[6])].filter(function(a){return"string"==typeof a}).join(" ");return""+h+g+i},o=function(a,b,c,d,e){for(var f=c.M,g=c.L,h=c.T,i=c.Q,j=c.temperature,k=c.amount,o=c.intensity,p=0,q=l.length;p<q;p++){var r=l[p];if(f.numer===r[0]&&f.denom===r[1]&&g.numer===r[2]&&g.denom===r[3]&&h.numer===r[4]&&h.denom===r[5]&&i.numer===r[6]&&i.denom===r[7]&&j.numer===r[8]&&j.denom===r[9]&&k.numer===r[10]&&k.denom===r[11]&&o.numer===r[12]&&o.denom===r[13])return e?1!==a?a+" * "+m[p][0]:m[p][0]:a+" * "+m[p][0]}return n(a,b,c,d,e)},p=function(){function a(a,b,c){if(this.multiplier=a,this.dimensions=b,this.labels=c,7!==c.length)throw new Error("Expecting 7 elements in the labels array.");this.multiplier=a,this.dimensions=b,this.labels=c}return a.prototype.compatible=function(b){if(b instanceof a)return this.dimensions.compatible(b.dimensions),this;throw new Error("Illegal Argument for Unit.compatible: "+b)},a.prototype.isCompatible=function(b){if(b instanceof a)return this.dimensions.equals(b.dimensions);throw new Error("Illegal Argument for Unit.compatible: "+b)},a.prototype.__add__=function(b){return b instanceof a?c(this,b):void 0},a.prototype.__radd__=function(b){return b instanceof a?c(b,this):void 0},a.prototype.__sub__=function(b){return b instanceof a?d(this,b):void 0},a.prototype.__rsub__=function(b){return b instanceof a?d(b,this):void 0},a.prototype.mul=function(a){return e(this,a)},a.prototype.__mul__=function(b){return b instanceof a?e(this,b):"number"==typeof b?f(b,this):void 0},a.prototype.__rmul__=function(b){return b instanceof a?e(b,this):"number"==typeof b?f(b,this):void 0},a.prototype.div=function(a){return g(this,a)},a.prototype.__div__=function(b){return b instanceof a?g(this,b):"number"==typeof b?a.valueOf(this.multiplier/b,this.dimensions,this.labels):void 0},a.prototype.__rdiv__=function(b){return b instanceof a?g(b,this):"number"==typeof b?a.valueOf(b/this.multiplier,this.dimensions.inv(),this.labels):void 0},a.prototype.pow=function(b){return a.valueOf(Math.pow(this.multiplier,b.numer/b.denom),this.dimensions.pow(b),this.labels)},a.prototype.inv=function(){return a.valueOf(1/this.multiplier,this.dimensions.inv(),this.labels)},a.prototype.neg=function(){return a.valueOf(-this.multiplier,this.dimensions,this.labels)},a.prototype.isOne=function(){return this.dimensions.isOne()&&1===this.multiplier},a.prototype.sqrt=function(){return a.valueOf(Math.sqrt(this.multiplier),this.dimensions.sqrt(),this.labels)},a.prototype.toExponential=function(a,b){return o(this.multiplier,this.multiplier.toExponential(a),this.dimensions,this.labels,b)},a.prototype.toFixed=function(a,b){return o(this.multiplier,this.multiplier.toFixed(a),this.dimensions,this.labels,b)},a.prototype.toPrecision=function(a,b){return o(this.multiplier,this.multiplier.toPrecision(a),this.dimensions,this.labels,b)},a.prototype.toString=function(a,b){return o(this.multiplier,this.multiplier.toString(a),this.dimensions,this.labels,b)},a.prototype.__pos__=function(){return this},a.prototype.__neg__=function(){return this.neg()},a.isOne=function(b){if(void 0===b)return!0;if(b instanceof a)return b.isOne();throw new Error("isOne argument must be a Unit or undefined.")},a.assertDimensionless=function(b){if(!a.isOne(b))throw new Error("uom "+b+" must be dimensionless.")},a.compatible=function(a,b){if(a){if(b)return a.compatible(b);if(a.isOne())return;throw new Error(a+" is incompatible with 1")}if(b){if(b.isOne())return;throw new Error("1 is incompatible with "+b)}},a.isCompatible=function(a,b){return a?b?a.isCompatible(b):!!a.isOne():!b||!!b.isOne()},a.mul=function(b,c){return b?c?b.mul(c):a.isOne(c)?b:void 0:a.isOne(b)?c:void 0},a.div=function(b,c){return b?c?b.div(c):b:c?c.inv():a.ONE},a.inv=function(b){return b instanceof a?b.isOne()?a.ONE:b.inv():a.ONE},a.mustBeUnit=function(b,c){if(c instanceof a)return c;if(h["default"](c))return a.ONE;throw new Error(b+" must be a Unit or undefined (meaning 1).")},a.pow=function(b,c){return b instanceof a?b.isOne()?void 0:c.isZero()?void 0:b.pow(c):void 0},a.sqrt=function(b){return b instanceof a?b.isOne()?void 0:b.sqrt():void 0},a.valueOf=function(b,c,d){if(1===b)switch(c.summary){case j["default"].AMOUNT_OF_SUBSTANCE:return a.MOLE;case j["default"].ANGULAR_MOMENTUM:return a.JOULE_SECOND;case j["default"].AREA:return a.METER_SQUARED;case j["default"].ELECTRIC_CHARGE:return a.COULOMB;case j["default"].ELECTRIC_CURRENT:return a.AMPERE;case j["default"].ELECTRIC_FIELD:return a.ELECTRIC_FIELD;case j["default"].ELECTRIC_PERMITTIVITY_TIMES_AREA:return a.COULOMB_SQUARED_PER_NEWTON;case j["default"].ENERGY_OR_TORQUE:return a.JOULE;case j["default"].FORCE:return a.NEWTON;case j["default"].LUMINOUS_INTENSITY:return a.CANDELA;case j["default"].INV_LENGTH:return a.INV_METER;case j["default"].INV_MASS:return a.INV_KILOGRAM;case j["default"].INV_MOMENT_OF_INERTIA:return a.INV_KILOGRAM_METER_SQUARED;case j["default"].INV_TIME:return a.INV_SECOND;case j["default"].LENGTH:return a.METER;case j["default"].MASS:return a.KILOGRAM;case j["default"].MOMENT_OF_INERTIA:return a.KILOGRAM_METER_SQUARED;case j["default"].MOMENTUM:return a.KILOGRAM_METER_PER_SECOND;case j["default"].MOMENTUM_SQUARED:return a.KILOGRAM_SQUARED_METER_SQUARED_PER_SECOND_SQUARED;case j["default"].ONE:return a.ONE;case j["default"].RATE_OF_CHANGE_OF_AREA:return a.METER_SQUARED_PER_SECOND;case j["default"].STIFFNESS:return a.STIFFNESS;case j["default"].THERMODYNAMIC_TEMPERATURE:return a.KELVIN;case j["default"].TIME:return a.SECOND;case j["default"].TIME_SQUARED:return a.SECOND_SQUARED;case j["default"].VELOCITY:return a.METER_PER_SECOND;case j["default"].VELOCITY_SQUARED:return a.METER_SQUARED_PER_SECOND_SQUARED;case j["default"].VOLUME:return a.METER_CUBED}return new a(b,c,d)},a.ONE=new a(1,i.Dimensions.ONE,k),a.KILOGRAM=new a(1,i.Dimensions.MASS,k),a.METER=new a(1,i.Dimensions.LENGTH,k),a.SECOND=new a(1,i.Dimensions.TIME,k),a.COULOMB=new a(1,i.Dimensions.ELECTRIC_CHARGE,k),a.AMPERE=new a(1,i.Dimensions.ELECTRIC_CURRENT,k),a.KELVIN=new a(1,i.Dimensions.THERMODYNAMIC_TEMPERATURE,k),a.MOLE=new a(1,i.Dimensions.AMOUNT_OF_SUBSTANCE,k),a.CANDELA=new a(1,i.Dimensions.LUMINOUS_INTENSITY,k),a.COULOMB_SQUARED_PER_NEWTON=new a(1,i.Dimensions.ELECTRIC_PERMITTIVITY_TIMES_AREA,k),
a.ELECTRIC_FIELD=new a(1,i.Dimensions.ELECTRIC_FIELD,k),a.NEWTON=new a(1,i.Dimensions.FORCE,k),a.JOULE=new a(1,i.Dimensions.ENERGY_OR_TORQUE,k),a.JOULE_SECOND=new a(1,i.Dimensions.ANGULAR_MOMENTUM,k),a.METER_SQUARED=new a(1,i.Dimensions.AREA,k),a.METER_CUBED=new a(1,i.Dimensions.VOLUME,k),a.SECOND_SQUARED=new a(1,i.Dimensions.TIME_SQUARED,k),a.INV_KILOGRAM=new a(1,i.Dimensions.INV_MASS,k),a.INV_METER=new a(1,i.Dimensions.INV_LENGTH,k),a.INV_SECOND=new a(1,i.Dimensions.INV_TIME,k),a.KILOGRAM_METER_SQUARED=new a(1,i.Dimensions.MOMENT_OF_INERTIA,k),a.KILOGRAM_METER_PER_SECOND=new a(1,i.Dimensions.MOMENTUM,k),a.KILOGRAM_SQUARED_METER_SQUARED_PER_SECOND_SQUARED=new a(1,i.Dimensions.MOMENTUM_SQUARED,k),a.INV_KILOGRAM_METER_SQUARED=new a(1,i.Dimensions.INV_MOMENT_OF_INERTIA,k),a.STIFFNESS=new a(1,i.Dimensions.STIFFNESS,k),a.METER_PER_SECOND=new a(1,i.Dimensions.VELOCITY,k),a.METER_SQUARED_PER_SECOND=new a(1,i.Dimensions.RATE_OF_CHANGE_OF_AREA,k),a.METER_SQUARED_PER_SECOND_SQUARED=new a(1,i.Dimensions.VELOCITY_SQUARED,k),a}(),a("Unit",p)}}}),System.register("davinci-newton/math/Vec3.js",["../checks/mustBeNumber","../util/veryDifferent","./Scalar3","./Unit"],function(a,b){"use strict";var c,d,e,f,g;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(){function a(a,b,d,e){if(this.x_=c["default"]("x",a),this.y_=c["default"]("y",b),this.z_=c["default"]("z",d),this.uom_=f.Unit.mustBeUnit("uom",e),this.uom_&&1!==this.uom_.multiplier){var g=this.uom_.multiplier;this.x_*=g,this.y_*=g,this.z_*=g,this.uom_=f.Unit.valueOf(1,e.dimensions,e.labels)}}return Object.defineProperty(a.prototype,"x",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this.y_},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"z",{get:function(){return this.z_},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"uom",{get:function(){return this.uom_},enumerable:!1,configurable:!0}),a.prototype.add=function(b){var c=f.Unit.compatible(this.uom_,b.uom);return new a(this.x+b.x,this.y+b.y,this.z+b.z,c)},a.prototype.divByScalar=function(b){return new a(this.x/b,this.y/b,this.z/b,this.uom_)},a.prototype.lco=function(b){var c=b.yz,d=b.zx,e=b.xy,g=this.x,h=this.y,i=this.z,j=d*i-e*h,k=e*g-c*i,l=c*h-d*g;return new a(j,k,l,f.Unit.mul(this.uom_,b.uom))},a.prototype.subtract=function(b){var c=f.Unit.compatible(this.uom_,b.uom);return new a(this.x-b.x,this.y-b.y,this.z-b.z,c)},a.prototype.mulByScalar=function(b){return new a(b*this.x,b*this.y,b*this.z,this.uom_)},a.prototype.cross=function(b){var c=this.x,d=this.y,e=this.z,g=b.x,h=b.y,i=b.z,j=d*i-e*h,k=e*g-c*i,l=c*h-d*g;return new a(j,k,l,f.Unit.mul(this.uom_,b.uom))},a.prototype.distanceTo=function(a){var b=this.x-a.x,c=this.y-a.y,d=this.z-a.z,g=Math.sqrt(b*b+c*c+d*d),h=f.Unit.compatible(this.uom_,a.uom);return new e["default"](g,h)},a.prototype.dot=function(a){var b=this.x*a.x+this.y*a.y+this.z*a.z,c=f.Unit.mul(this.uom_,a.uom);return new e["default"](b,c)},a.prototype.magnitude=function(){var a=this.x,b=this.y,c=this.z;return Math.sqrt(a*a+b*b+c*c)},a.prototype.nearEqual=function(a,b){return!d["default"](this.x_,a.x,b)&&(!d["default"](this.y_,a.y,b)&&!d["default"](this.z_,a.z,b))},a.prototype.direction=function(){var a=this.magnitude();if(1!==a){if(0===a)throw new Error("direction is undefined.");return this.divByScalar(a)}return this},a.prototype.rotate=function(b){if(1===b.a&&0===b.xy&&0===b.yz&&0===b.zx)return this;var c=this.x,d=this.y,e=this.z,f=b.xy,g=b.yz,h=b.zx,i=b.a,j=i*c-h*e+f*d,k=i*d-f*c+g*e,l=i*e-g*d+h*c,m=g*c+h*d+f*e,n=j*i+m*g+k*f-l*h,o=k*i+m*h+l*g-j*f,p=l*i+m*f+j*h-k*g;return new a(n,o,p,this.uom_)},a.prototype.toString=function(a){return"new Vec3("+this.x_.toString(a)+", "+this.y_.toString(a)+", "+this.z_.toString(a)+")"},a.prototype.__add__=function(a){return this.add(a)},a.prototype.__div__=function(a){return this.divByScalar(a)},a.prototype.__mul__=function(a){return this.mulByScalar(a)},a.prototype.__rmul__=function(a){return this.mulByScalar(a)},a.prototype.__sub__=function(a){return this.subtract(a)},a.fromVector=function(b){return new a(b.x,b.y,b.z,b.uom)},a.e1=new a(1,0,0),a.e2=new a(0,1,0),a.e3=new a(0,0,1),a.zero=new a(0,0,0),a}(),a("Vec3",g)}}}),System.register("davinci-newton/model/CoordType.js",[],function(a,b){"use strict";var c,d;b&&b.id;return{setters:[],execute:function(){a("LOCAL",c=0),a("WORLD",d=1)}}}),System.register("davinci-newton/solvers/AdaptiveStepSolver.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){c=function(){function a(a,b,c,d){this.metric=d,this.stepUBound=1,this.stepLBound=1e-5,this.diffEq_=a,this.energySystem_=b,this.odeSolver_=c,this.totSteps_=0,this.secondDiff_=!0,this.tolerance_=1e-6}return a.prototype.step=function(a,b){var c=this.metric;this.savedState=this.diffEq_.getState();var d=this.diffEq_.time,e=a,f=0;this.diffEq_.epilog();var g=c.a(this.energySystem_.totalEnergy()),h=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,j=!0;if(!(a<this.stepLBound)){do{var k=d;if(!j&&(this.diffEq_.setState(this.savedState),this.diffEq_.epilog(),e/=5,e<this.stepLBound))throw new Error("time step "+e+" too small. startEnergy => "+g+" lastEnergyDiff => "+h);for(f=0;k<d+a;){var l=e;k+l>d+a-1e-10&&(l=d+a-k),f++,this.odeSolver_.step(l,b),this.diffEq_.epilog(),k+=l}var m=c.a(this.energySystem_.totalEnergy()),n=Math.abs(g-m);this.secondDiff_?j||(i=Math.abs(n-h)):i=n,h=n,j=!1}while(i>this.tolerance_);this.totSteps_+=f}},Object.defineProperty(a.prototype,"secondDiff",{get:function(){return this.secondDiff_},set:function(a){this.secondDiff_=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"tolerance",{get:function(){return this.tolerance_},set:function(a){this.tolerance_=a},enumerable:!1,configurable:!0}),a}(),a("AdaptiveStepSolver",c)}}}),System.register("davinci-newton/solvers/ConstantEnergySolver.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){c=function(){function a(a,b,c){this.stepUpperBound=1,this.stepLowerBound=1e-5,this.tolerance_=1e-6,this.simulation_=a,this.energySystem_=b,this.solverMethod_=c,this.totSteps_=0}return a.prototype.step=function(a,b){this.savedState=this.simulation_.getState();var c=this.simulation_.time,d=a,e=0;this.simulation_.epilog();var f=this.energySystem_.metric,g=f.a(this.energySystem_.totalEnergy()),h=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,j=!0;if(!(a<this.stepLowerBound)){do{var k=c;if(!j&&(this.simulation_.setState(this.savedState),this.simulation_.epilog(),d/=5,d<this.stepLowerBound))throw new Error("Unable to achieve tolerance "+this.tolerance+" with stepLowerBound "+this.stepLowerBound);for(e=0;k<c+a;){var l=d;k+l>c+a-1e-10&&(l=c+a-k),e++,this.solverMethod_.step(l,b),this.simulation_.epilog(),k+=l}var m=f.a(this.energySystem_.totalEnergy()),n=Math.abs(g-m);i=n,h=n,j=!1}while(i>this.tolerance_);this.totSteps_+=e}},Object.defineProperty(a.prototype,"tolerance",{get:function(){return this.tolerance_},set:function(a){this.tolerance_=a},enumerable:!1,configurable:!0}),a}(),a("ConstantEnergySolver",c)}}}),System.register("davinci-newton/solvers/EulerMethod.js",["../util/zeroArray"],function(a,b){"use strict";var c,d;b&&b.id;return{setters:[function(a){c=a}],execute:function(){d=function(){function a(a){this.sim_=a,this.inp_=[],this.k1_=[]}return a.prototype.step=function(a,b){var d=this.sim_.getState(),e=d.length;this.inp_.length!==e&&(this.inp_=new Array(e),this.k1_=new Array(e));for(var f=this.inp_,g=this.k1_,h=0;h<e;h++)f[h]=d[h];c["default"](g),this.sim_.evaluate(f,g,0,b);for(var h=0;h<e;h++)d[h]+=g[h]*a;this.sim_.setState(d)},a}(),a("EulerMethod",d)}}}),System.register("davinci-newton/solvers/ModifiedEuler.js",["../util/zeroArray"],function(a,b){"use strict";var c,d;b&&b.id;return{setters:[function(a){c=a}],execute:function(){d=function(){function a(a){this.sim_=a,this.inp_=[],this.k1_=[],this.k2_=[]}return a.prototype.step=function(a,b){var d=this.sim_.getState(),e=d.length;this.inp_.length!==e&&(this.inp_=new Array(e),this.k1_=new Array(e),this.k2_=new Array(e));for(var f=this.inp_,g=this.k1_,h=this.k2_,i=0;i<e;i++)f[i]=d[i];c["default"](g),this.sim_.evaluate(f,g,0,b);for(var i=0;i<e;i++)f[i]=d[i]+g[i]*a;c["default"](h),this.sim_.evaluate(f,h,a,b);for(var i=0;i<e;i++)d[i]+=(g[i]+h[i])*a/2;this.sim_.setState(d)},a}(),a("ModifiedEuler",d)}}}),System.register("davinci-newton/util/zeroArray.js",[],function(a,b){"use strict";function c(a){for(var b=a.length,c=0;c<b;c++)a[c]=0}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/solvers/RungeKutta.js",["../util/zeroArray"],function(a,b){"use strict";var c,d;b&&b.id;return{setters:[function(a){c=a}],execute:function(){d=function(){function a(a){this.inp_=[],this.k1_=[],this.k2_=[],this.k3_=[],this.k4_=[],this.sim_=a}return a.prototype.step=function(a,b){var d=this.sim_.getState(),e=d.length;this.inp_.length<e&&(this.inp_=new Array(e),this.k1_=new Array(e),this.k2_=new Array(e),this.k3_=new Array(e),this.k4_=new Array(e));for(var f=this.inp_,g=this.k1_,h=this.k2_,i=this.k3_,j=this.k4_,k=0;k<e;k++)f[k]=d[k];c["default"](g),this.sim_.evaluate(f,g,0,b);for(var k=0;k<e;k++)f[k]=d[k]+g[k]*a/2;c["default"](h),this.sim_.evaluate(f,h,a/2,b);for(var k=0;k<e;k++)f[k]=d[k]+h[k]*a/2;c["default"](i),this.sim_.evaluate(f,i,a/2,b);for(var k=0;k<e;k++)f[k]=d[k]+i[k]*a;c["default"](j),this.sim_.evaluate(f,j,a,b);for(var k=0;k<e;k++)d[k]+=(g[k]+2*h[k]+2*i[k]+j[k])*a/6;this.sim_.setState(d)},a}(),a("RungeKutta",d)}}}),System.register("davinci-newton/strategy/DefaultAdvanceStrategy.js",["../checks/mustBeNonNullObject"],function(a,b){"use strict";var c,d;b&&b.id;return{setters:[function(a){c=a}],execute:function(){d=function(){function a(a,b){this.simulation_=c["default"]("simulation",a),this.solver_=c["default"]("solver",b)}return a.prototype.advance=function(a,b){this.simulation_.prolog(),this.solver_.step(a,b),this.simulation_.epilog()},a}(),a("DefaultAdvanceStrategy",d)}}}),System.register("davinci-newton/util/UtilityCore.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){c=function(){function a(){}return a.MAX_INTEGER=Math.pow(2,53),a}(),a("default",c)}}}),System.register("davinci-newton/util/CircularList.js",["./UtilityCore"],function(a,b){"use strict";var c,d,e,f;b&&b.id;return{setters:[function(a){c=a}],execute:function(){d="exceeded max int",e=function(){function a(a){if(void 0===a&&(a=3e3),this.size_=0,this.cycles_=0,this.nextPtr_=0,this.lastPtr_=-1,this.capacity_=a||3e3,this.capacity_<2)throw new Error;this.size_=0,this.cycles_=0,this.nextPtr_=0,this.lastPtr_=-1,this.values_=new Array(this.capacity_),this.lastValue_=null}return a.prototype.causeMaxIntError=function(){this.size_=this.capacity_,this.cycles_=Math.floor(c["default"].MAX_INTEGER/this.capacity_)-1},a.prototype.getEndIndex=function(){if(0===this.size_)return-1;var a;return a=0===this.nextPtr_?this.pointerToIndex(this.size_-1):this.pointerToIndex(this.nextPtr_-1)},a.prototype.getEndValue=function(){var a=this.getEndIndex();return a===-1?null:this.values_[this.indexToPointer_(a)]},a.prototype.getIterator=function(a){return new f(this,a)},a.prototype.getSize=function(){return this.size_},a.prototype.getStartIndex=function(){var a=this.size_<this.capacity_?0:this.pointerToIndex(this.nextPtr_);return a},a.prototype.getValue=function(a){var b=this.indexToPointer_(a);return this.values_[b]},a.prototype.indexToPointer_=function(a){if(this.size_<this.capacity_)return a;var b=a%this.capacity_,c=a-(this.cycles_-(b<this.nextPtr_?0:1))*this.capacity_;return c},a.prototype.pointerToIndex=function(a){if(this.size_<this.capacity_)return a;var b=a+(this.cycles_-(a<this.nextPtr_?0:1))*this.capacity_;if(b>=c["default"].MAX_INTEGER)throw new Error(d);return b},a.prototype.reset=function(){this.nextPtr_=this.size_=0,this.cycles_=0,this.lastPtr_=-1},a.prototype.store=function(a){return this.lastPtr_=this.nextPtr_,this.values_[this.nextPtr_]=a,this.nextPtr_++,this.size_<this.capacity_&&this.size_++,this.nextPtr_>=this.capacity_&&(this.cycles_++,this.nextPtr_=0),this.pointerToIndex(this.lastPtr_)},a}(),a("CircularList",e),f=function(){function a(a,b){if(this.cList=a,this.first_=a.size_>0,this.cList_=a,(void 0===b||b<0)&&(b=a.getStartIndex()),a.size_>0&&(b<a.getStartIndex()||b>a.getEndIndex()))throw new Error("out of range startIndex="+b);this.index_=b,this.pointer_=a.indexToPointer_(b)}return a.prototype.getIndex=function(){if(0===this.cList_.size_)throw new Error("no data");return this.index_},a.prototype.getValue=function(){if(0===this.cList_.size_)throw new Error("no data");return this.cList_.values_[this.pointer_]},a.prototype.hasNext=function(){return this.first_||this.index_<this.cList_.getEndIndex()},a.prototype.hasPrevious=function(){return this.first_||this.index_>this.cList_.getStartIndex()},a.prototype.nextValue=function(){if(0===this.cList_.size_)throw new Error("no data");if(this.first_)this.first_=!1;else{if(this.index_+1>this.cList_.getEndIndex())throw new Error("cannot iterate past end of list");this.index_++,this.pointer_=this.cList_.indexToPointer_(this.index_)}return this.cList_.values_[this.pointer_]},a.prototype.previousValue=function(){if(0===this.cList_.size_)throw new Error("no data");if(this.first_)this.first_=!1;else{if(this.index_-1<this.cList_.getStartIndex())throw new Error("cannot iterate prior to start of list");this.index_--,this.pointer_=this.cList_.indexToPointer_(this.index_)}return this.cList_.values_[this.pointer_]},a}()}}}),System.register("davinci-newton/view/DrawingMode.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){!function(a){a[a.DOTS=0]="DOTS",a[a.LINES=1]="LINES"}(c||(c={})),a("DrawingMode",c)}}}),System.register("davinci-newton/checks/isNumber.js",[],function(a,b){"use strict";function c(a){return"number"==typeof a}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/checks/mustSatisfy.js",[],function(a,b){"use strict";function c(a,b,c,d){if(!b){var e=c?c():"satisfy some condition",f=d?" in "+d():"";throw new Error(a+" must "+e+f+".")}}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/checks/isNull.js",[],function(a,b){"use strict";function c(a){return null===a}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/checks/mustBeNonNullObject.js",["../checks/mustSatisfy","../checks/isNull","../checks/isObject"],function(a,b){"use strict";function c(){return"be a non-null `object`"}function d(a,b,d){return e["default"](a,g["default"](b)&&!f["default"](b),c,d),b}var e,f,g;b&&b.id;return a("default",d),{setters:[function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){}}}),System.register("davinci-newton/util/isEmpty.js",[],function(a,b){"use strict";function c(a){return 0===a.length}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/view/LabCanvas.js",["../checks/isNumber","../checks/mustBeNonNullObject","../util/AbstractSubject","../util/clone","../util/contains","../util/GenericEvent","../util/isEmpty","../util/remove","../util/veryDifferent","./ScreenRect"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a}],execute:function(){m="width",n="height",o="alpha",p="background",q=function(a){function b(b){var c=a.call(this)||this;return c.labViews_=[],c.memorizables_=[],c.focusView_=null,c.alpha_=1,c.background_="",c.canvas_=b,b.contentEditable="false",c}return r(b,a),b.prototype.addMemo=function(a){g["default"](this.memorizables_,a)||this.memorizables_.push(a)},b.prototype.addView=function(a){if(d["default"]("view",a),this.getWidth()>0&&this.getHeight()>0){var c=new l["default"](0,0,this.getWidth(),this.getHeight());a.setScreenRect(c)}this.labViews_.push(a),this.addMemo(a),this.broadcast(new h["default"](this,b.VIEW_ADDED,a)),this.broadcast(new h["default"](this,b.VIEW_LIST_MODIFIED)),null==this.focusView_&&this.setFocusView(a)},b.prototype.focus=function(){this.canvas_.focus()},b.prototype.getAlpha=function(){return this.alpha_},b.prototype.getBackground=function(){return this.background_},b.prototype.getCanvas=function(){return this.canvas_},b.prototype.getContext=function(){return this.canvas_.getContext("2d")},b.prototype.getFocusView=function(){return this.focusView_},b.prototype.getHeight=function(){return this.canvas_.height},b.prototype.getMemos=function(){return f["default"](this.memorizables_)},b.prototype.getScreenRect=function(){return new l["default"](0,0,this.canvas_.width,this.canvas_.height)},b.prototype.getViews=function(){return f["default"](this.labViews_)},b.prototype.getWidth=function(){return this.canvas_.width},b.prototype.memorize=function(){for(var a=0,b=this.memorizables_.length;a<b;a++)this.memorizables_[a].memorize()},b.prototype.notifySizeChanged=function(){var a=this.getScreenRect();this.labViews_.forEach(function(b){b.setScreenRect(a)}),this.broadcast(new h["default"](this,b.SIZE_CHANGED))},b.prototype.paint=function(){if(null!=this.canvas_.offsetParent){var a=this.canvas_.getContext("2d");a.save(),""!==this.background_?(a.globalAlpha=this.alpha_,a.fillStyle=this.background_,a.fillRect(0,0,this.canvas_.width,this.canvas_.height),a.globalAlpha=1):a.clearRect(0,0,this.canvas_.width,this.canvas_.height);for(var b=this.labViews_,c=b.length,d=0;d<c;d++)b[d].paint(a);a.restore()}},b.prototype.removeMemo=function(a){j["default"](this.memorizables_,a)},b.prototype.removeView=function(a){d["default"]("view",a),j["default"](this.labViews_,a),this.removeMemo(a),this.focusView_===a&&this.setFocusView(i["default"](this.labViews_)?null:this.labViews_[0]),this.broadcast(new h["default"](this,b.VIEW_REMOVED,a)),this.broadcast(new h["default"](this,b.VIEW_LIST_MODIFIED))},b.prototype.setAlpha=function(a){k["default"](this.alpha_,a)&&(this.alpha_=a,k["default"](a,1)&&""===this.background_&&this.setBackground("white"),this.broadcastParameter(o))},b.prototype.setBackground=function(a){this.background_!==a&&(this.background_=a,this.broadcastParameter(p))},b.prototype.setFocusView=function(a){if(null!=a&&!g["default"](this.labViews_,a))throw new Error("cannot set focus to unknown view "+a);this.focusView_!==a&&(null!=this.focusView_&&this.focusView_.loseFocus(),this.focusView_=a,null!=a&&a.gainFocus(),this.broadcast(new h["default"](this,b.FOCUS_VIEW_CHANGED,a)))},b.prototype.setHeight=function(a){k["default"](a,this.canvas_.height)&&(this.canvas_.height=a),this.notifySizeChanged(),this.broadcastParameter(n)},b.prototype.setScreenRect=function(a){if(!l["default"].isDuckType(a))throw new Error("not a ScreenRect "+a);if(0!==a.getTop()||0!==a.getLeft())throw new Error("top left must be 0,0, was: "+a);this.setSize(a.getWidth(),a.getHeight())},b.prototype.setSize=function(a,b){if(!c["default"](a)||a<=0||!c["default"](b)||b<=0)throw new Error("bad size "+a+", "+b);this.canvas_.width=a,this.canvas_.height=b,this.notifySizeChanged(),this.broadcastParameter(m),this.broadcastParameter(n)},b.prototype.setWidth=function(a){k["default"](a,this.canvas_.width)&&(this.canvas_.width=a),this.notifySizeChanged(),this.broadcastParameter(m)},b.FOCUS_VIEW_CHANGED="FOCUS_VIEW_CHANGED",b.SIZE_CHANGED="SIZE_CHANGED",b.VIEW_LIST_MODIFIED="VIEW_LIST_MODIFIED",b.VIEW_ADDED="VIEW_ADDED",b.VIEW_REMOVED="VIEW_REMOVED",b}(e["default"]),a("LabCanvas",q)}}}),System.register("davinci-newton/checks/mustBeFinite.js",[],function(a,b){"use strict";function c(a){if("number"!=typeof a||!isFinite(a))throw new Error("not a finite number "+a);return a}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/view/AffineTransform.js",["./Point"],function(a,b){"use strict";var c,d;b&&b.id;return{setters:[function(a){c=a}],execute:function(){d=function(){function a(a,b,c,d,e,f){this.m11_=a,this.m12_=b,this.m21_=c,this.m22_=d,this.dx_=e,this.dy_=f}return a.prototype.applyTransform=function(a){return a.transform(this.m11_,this.m12_,this.m21_,this.m22_,this.dx_,this.dy_),this},a.prototype.concatenate=function(b){var c=this.m11_*b.m11_+this.m21_*b.m12_,d=this.m12_*b.m11_+this.m22_*b.m12_,e=this.m11_*b.m21_+this.m21_*b.m22_,f=this.m12_*b.m21_+this.m22_*b.m22_,g=this.m11_*b.dx_+this.m21_*b.dy_+this.dx_,h=this.m12_*b.dx_+this.m22_*b.dy_+this.dy_;return new a(c,d,e,f,g,h)},a.prototype.lineTo=function(a,b,c){var d=this.transform(a,b);return c.lineTo(d.x,d.y),this},a.prototype.moveTo=function(a,b,c){var d=this.transform(a,b);return c.moveTo(d.x,d.y),this},a.prototype.rotate=function(b){var c=Math.cos(b),d=Math.sin(b),e=c*this.m11_+d*this.m21_,f=c*this.m12_+d*this.m22_,g=-d*this.m11_+c*this.m21_,h=-d*this.m12_+c*this.m22_;return new a(e,f,g,h,this.dx_,this.dy_)},a.prototype.scale=function(b,c){var d=this.m11_*b,e=this.m12_*b,f=this.m21_*c,g=this.m22_*c;return new a(d,e,f,g,this.dx_,this.dy_)},a.prototype.setTransform=function(a){return a.setTransform(this.m11_,this.m12_,this.m21_,this.m22_,this.dx_,this.dy_),this},a.prototype.transform=function(a,b){var d=this.m11_*a+this.m21_*b+this.dx_,e=this.m12_*a+this.m22_*b+this.dy_;return new c["default"](d,e)},a.prototype.translate=function(b,c){var d=this.dx_+this.m11_*b+this.m21_*c,e=this.dy_+this.m12_*b+this.m22_*c;return new a(this.m11_,this.m12_,this.m21_,this.m22_,d,e)},a.IDENTITY=new a(1,0,0,1,0,0),a}(),a("default",d)}}}),System.register("davinci-newton/view/AlignH.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){!function(a){a[a.LEFT=0]="LEFT",a[a.MIDDLE=1]="MIDDLE",a[a.RIGHT=2]="RIGHT",a[a.FULL=3]="FULL"}(c||(c={})),a("AlignH",c)}}}),System.register("davinci-newton/view/AlignV.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){!function(a){a[a.TOP=0]="TOP",a[a.MIDDLE=1]="MIDDLE",a[a.BOTTOM=2]="BOTTOM",a[a.FULL=3]="FULL"}(c||(c={})),a("AlignV",c)}}}),System.register("davinci-newton/view/CoordMap.js",["../checks/mustBeFinite","./AffineTransform","./AlignH","./AlignV","./DoubleRect","./Point","./ScreenRect"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){j=1e-15,k=function(){function a(a,b,e,f,g,h){this.screen_left_=c["default"](a),this.screen_bottom_=c["default"](b),this.sim_left_=c["default"](e),this.sim_bottom_=c["default"](f),this.pixel_per_unit_x_=c["default"](g),this.pixel_per_unit_y_=c["default"](h);var i=d["default"].IDENTITY;i=i.translate(this.screen_left_,this.screen_bottom_),i=i.scale(this.pixel_per_unit_x_,-this.pixel_per_unit_y_),i=i.translate(-this.sim_left_,-this.sim_bottom_),this.transform_=i}return a.make=function(b,c,d,g,h){if(void 0===d&&(d=e.AlignH.MIDDLE),void 0===g&&(g=f.AlignV.MIDDLE),void 0===h&&(h=1),h<j||!isFinite(h))throw new Error("bad aspectRatio "+h);var i=c.getLeft(),k=c.getBottom(),l=c.getRight()-i,m=c.getTop()-k;if(l<j||m<j)throw new Error("simRect cannot be empty "+c);var n=b.getTop(),o=b.getLeft(),p=b.getWidth(),q=b.getHeight(),r=0,s=0,t=0,u=0;if(d===e.AlignH.FULL&&(t=p/l,r=0),g===f.AlignV.FULL&&(u=q/m,s=0),d!==e.AlignH.FULL||g!==f.AlignV.FULL){var v=void 0;if(d===e.AlignH.FULL)u=t*h,v=!0;else if(g===f.AlignV.FULL)t=u/h,v=!1;else{t=p/l,u=t*h,v=!0;var w=Math.floor(.5+u*m);q<w&&(u=q/m,t=u/h,v=!1)}if(v){r=0;var w=Math.floor(.5+m*u);switch(g){case f.AlignV.BOTTOM:s=0;break;case f.AlignV.MIDDLE:s=(q-w)/2;break;case f.AlignV.TOP:s=q-w;break;default:throw new Error}}else{s=0;var x=Math.floor(.5+l*t);switch(d){case e.AlignH.LEFT:r=0;break;case e.AlignH.MIDDLE:r=(p-x)/2;break;case e.AlignH.RIGHT:r=p-x;break;default:throw new Error}}}var y=new a(o,n+q,i-r/t,k-s/u,t,u);return y},a.isDuckType=function(b){return b instanceof a||void 0!==b.getAffineTransform&&void 0!==b.simToScreenX&&void 0!==b.simToScreenY&&void 0!==b.screenToSimX&&void 0!==b.screenToSimY&&void 0!==b.getScaleX&&void 0!==b.getScaleY},a.prototype.getAffineTransform=function(){return this.transform_},a.prototype.getScaleX=function(){return this.pixel_per_unit_x_},a.prototype.getScaleY=function(){return this.pixel_per_unit_y_},a.prototype.screenToSim=function(a,b){return new h["default"](this.screenToSimX(a),this.screenToSimY(b))},a.prototype.screenToSimRect=function(a){return new g["default"](this.screenToSimX(a.getLeft()),this.screenToSimY(a.getTop()+a.getHeight()),this.screenToSimX(a.getLeft()+a.getWidth()),this.screenToSimY(a.getTop()))},a.prototype.screenToSimScaleX=function(a){return a/this.pixel_per_unit_x_},a.prototype.screenToSimScaleY=function(a){return a/this.pixel_per_unit_y_},a.prototype.screenToSimX=function(a){return this.sim_left_+(a-this.screen_left_)/this.pixel_per_unit_x_},a.prototype.screenToSimY=function(a){return this.sim_bottom_+(this.screen_bottom_-a)/this.pixel_per_unit_y_},a.prototype.simToScreen=function(a){return new h["default"](this.simToScreenX(a.x),this.simToScreenY(a.y))},a.prototype.simToScreenRect=function(a){return new i["default"](this.simToScreenX(a.getLeft()),this.simToScreenY(a.getTop()),this.simToScreenScaleX(a.getWidth()),this.simToScreenScaleY(a.getHeight()))},a.prototype.simToScreenScaleX=function(a){return a*this.pixel_per_unit_x_},a.prototype.simToScreenScaleY=function(a){return a*this.pixel_per_unit_y_},a.prototype.simToScreenX=function(a){return this.screen_left_+(a-this.sim_left_)*this.pixel_per_unit_x_},a.prototype.simToScreenY=function(a){return this.screen_bottom_-(a-this.sim_bottom_)*this.pixel_per_unit_y_},a}(),a("default",k)}}}),System.register("davinci-newton/util/clone.js",[],function(a,b){"use strict";function c(a){for(var b=a.length,c=new Array(b),d=0;d<b;d++)c[d]=a[d];return c}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/util/contains.js",[],function(a,b){"use strict";function c(a,b){for(var c=a.length,d=0;d<c;d++)if(a[d]===b)return!0;return!1}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/util/findIndex.js",[],function(a,b){"use strict";function c(a,b){for(var c=a.length,d=0;d<c;d++){var e=a[d];if(b(e,d))return d}return-1}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/util/find.js",["./findIndex"],function(a,b){"use strict";function c(a,b){var c=d["default"](a,b);return c<0?null:a[c]}var d;b&&b.id;return a("default",c),{setters:[function(a){d=a}],execute:function(){}}}),System.register("davinci-newton/util/ParameterBoolean.js",["./toName","./validName"],function(a,b){"use strict";var c,d,e;b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(){function a(a,b,e,f,g,h){this.subject_=a,this.name_=d["default"](c["default"](b)),this.getter_=e,this.setter_=f,this.isComputed_=!1,this.choices_=[],this.values_=[]}return Object.defineProperty(a.prototype,"name",{get:function(){return this.name_},enumerable:!1,configurable:!0}),a.prototype.getSubject=function(){return this.subject_},a.prototype.nameEquals=function(a){return this.name_===c["default"](a)},a.prototype.setComputed=function(a){this.isComputed_=a},a}(),a("ParameterBoolean",e),a("default",e)}}}),System.register("davinci-newton/util/ParameterNumber.js",["./toName","./validName"],function(a,b){"use strict";var c,d,e;b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(){function a(a,b,e,f,g,h){this.subject_=a,this.name_=d["default"](c["default"](b)),this.getter_=e,this.setter_=f,this.isComputed_=!1,this.signifDigits_=3,this.decimalPlaces_=-1,this.lowerLimit_=0,this.upperLimit_=Number.POSITIVE_INFINITY,this.choices_=[],this.values_=[]}return Object.defineProperty(a.prototype,"name",{get:function(){return this.name_},enumerable:!1,configurable:!0}),a.prototype.getSubject=function(){return this.subject_},a.prototype.getValue=function(){return this.getter_()},a.prototype.nameEquals=function(a){return this.name_===c["default"](a)},a.prototype.setComputed=function(a){this.isComputed_=a},a.prototype.setLowerLimit=function(a){if(a>this.getValue()||a>this.upperLimit_)throw new Error("out of range");return this.lowerLimit_=a,this},a.prototype.setSignifDigits=function(a){return this.signifDigits_=a,this},a}(),a("ParameterNumber",e),a("default",e)}}}),System.register("davinci-newton/util/ParameterString.js",["./toName","./validName"],function(a,b){"use strict";var c,d,e;b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(){function a(a,b,e,f,g,h){this.subject_=a,this.name_=d["default"](c["default"](b)),this.getter_=e,this.setter_=f,this.isComputed_=!1,this.suggestedLength_=20,this.maxLength_=Number.POSITIVE_INFINITY,this.choices_=[],this.values_=[],this.inputFunction_=null}return Object.defineProperty(a.prototype,"name",{get:function(){return this.name_},enumerable:!1,configurable:!0}),a.prototype.getSubject=function(){return this.subject_},a.prototype.getValue=function(){return this.getter_()},a.prototype.nameEquals=function(a){return this.name_===c["default"](a)},a.prototype.setComputed=function(a){this.isComputed_=a},a}(),a("ParameterString",e),a("default",e)}}}),System.register("davinci-newton/util/removeAt.js",[],function(a,b){"use strict";function c(a,b){return 1===Array.prototype.splice.call(a,b,1).length}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/util/remove.js",["./removeAt"],function(a,b){"use strict";function c(a,b){var c,e=a.indexOf(b);return(c=e>=0)&&d["default"](a,e),c}var d;b&&b.id;return a("default",c),{setters:[function(a){d=a}],execute:function(){}}}),System.register("davinci-newton/util/AbstractSubject.js",["./clone","./contains","./find","./ParameterBoolean","./ParameterNumber","./ParameterString","./remove","../util/toName"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a}],execute:function(){k=function(){function a(){this.doBroadcast_=!0,this.observers_=[],this.paramList_=[]}return a.prototype.addObserver=function(a){d["default"](this.observers_,a)||this.observers_.push(a)},a.prototype.removeObserver=function(a){i["default"](this.observers_,a)},a.prototype.addParameter=function(a){var b=a.name,c=this.getParam(b);if(null!=c)throw new Error("parameter "+b+" already exists: "+c);this.paramList_.push(a)},a.prototype.getParam=function(a){return a=j["default"](a),e["default"](this.paramList_,function(b){return b.name===a})},a.prototype.getParameter=function(a){var b=this.getParam(a);if(null!=b)return b;throw new Error("Parameter not found "+a)},a.prototype.getParameterBoolean=function(a){var b=this.getParam(a);if(b instanceof f["default"])return b;throw new Error("ParameterBoolean not found "+a)},a.prototype.getParameterNumber=function(a){var b=this.getParam(a);if(b instanceof g["default"])return b;throw new Error("ParameterNumber not found "+a)},a.prototype.getParameterString=function(a){var b=this.getParam(a);if(b instanceof h["default"])return b;throw new Error("ParameterString not found "+a)},a.prototype.getParameters=function(){return c["default"](this.paramList_)},a.prototype.broadcast=function(a){if(this.doBroadcast_)for(var b=this.observers_.length,c=0;c<b;c++)this.observers_[c].observe(a)},a.prototype.broadcastParameter=function(a){var b=this.getParam(a);
if(null===b)throw new Error("unknown Parameter "+a);this.broadcast(b)},a.prototype.getBroadcast=function(){return this.doBroadcast_},a.prototype.getObservers=function(){return c["default"](this.observers_)},a}(),a("AbstractSubject",k),a("default",k)}}}),System.register("davinci-newton/util/toName.js",[],function(a,b){"use strict";function c(a){return a.toUpperCase().replace(/[ -]/g,"_")}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/util/validName.js",[],function(a,b){"use strict";function c(a){if(!a.match(/^[A-Z_][A-Z_0-9]*$/))throw new Error("not a valid name: "+a);return a}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/util/GenericEvent.js",["./toName","./validName"],function(a,b){"use strict";var c,d,e;b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(){function a(a,b,e){this.subject_=a,this.value_=e,this.name_=d["default"](c["default"](b))}return Object.defineProperty(a.prototype,"name",{get:function(){return this.name_},enumerable:!1,configurable:!0}),a.prototype.getSubject=function(){return this.subject_},a.prototype.nameEquals=function(a){return this.name_===c["default"](a)},a}(),a("GenericEvent",e),a("default",e)}}}),System.register("davinci-newton/util/insertAt.js",[],function(a,b){"use strict";function c(a,b,c){return arguments.length<=2?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function d(a,b,d,e){return Array.prototype.splice.apply(a,c(arguments,1))}function e(a,b,c){void 0===c&&(c=0),d(a,c,0,b)}b&&b.id;return a("default",e),{setters:[],execute:function(){}}}),System.register("davinci-newton/checks/isObject.js",[],function(a,b){"use strict";function c(a){return"object"==typeof a}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/view/DisplayList.js",["../util/AbstractSubject","../util/GenericEvent","../util/insertAt","../checks/isObject"],function(a,b){"use strict";var c,d,e,f,g,h=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(a){function b(){var b=a.call(this)||this;return b.drawables_=[],b}return h(b,a),b.prototype.add=function(a){if(!f["default"](a))throw new Error("non-object passed to DisplayList.add");var c=a.getZIndex();this.sort();var g=this.drawables_.length,h=0;for(h=0;h<g;h++){var i=this.drawables_[h].getZIndex();if(c<i)break}e["default"](this.drawables_,a,h),this.broadcast(new d["default"](this,b.OBJECT_ADDED,a))},b.prototype.draw=function(a,b){this.sort();for(var c=this.drawables_,d=c.length,e=0;e<d;e++)c[e].draw(a,b)},b.prototype.prepend=function(a){if(!f["default"](a))throw new Error("non-object passed to DisplayList.add");var c=a.getZIndex();this.sort();var g=this.drawables_.length,h=g;for(h=g;h>0;h--){var i=this.drawables_[h-1].getZIndex();if(c>i)break}e["default"](this.drawables_,a,h),this.broadcast(new d["default"](this,b.OBJECT_ADDED,a))},b.prototype.sort=function(){},b.OBJECT_ADDED="OBJECT_ADDED",b.OBJECT_REMOVED="OBJECT_REMOVED",b}(c["default"]),a("DisplayList",g),a("default",g)}}}),System.register("davinci-newton/view/Point.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){c=function(){function a(a,b){this.x_=a,this.y_=b}return Object.defineProperty(a.prototype,"x",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this.y_},enumerable:!1,configurable:!0}),a}(),a("default",c)}}}),System.register("davinci-newton/view/DoubleRect.js",["./Point","../util/veryDifferent"],function(a,b){"use strict";var c,d,e;b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(){function a(a,b,c,d){if(this.left_=a,this.right_=c,this.bottom_=b,this.top_=d,a>c)throw new Error("DoubleRect: left > right "+a+" > "+c);if(b>d)throw new Error("DoubleRect: bottom > top "+b+" > "+d)}return a.clone=function(b){return new a(b.getLeft(),b.getBottom(),b.getRight(),b.getTop())},a.isDuckType=function(b){return b instanceof a||void 0!==b.getLeft&&void 0!==b.getRight&&void 0!==b.getTop&&void 0!==b.getBottom&&void 0!==b.translate&&void 0!==b.scale},a.make=function(b,c){var d=Math.min(b.x,c.x),e=Math.max(b.x,c.x),f=Math.min(b.y,c.y),g=Math.max(b.y,c.y);return new a(d,f,e,g)},a.makeCentered=function(b,c,d){var e=b.x,f=b.y;return new a(e-c/2,f-d/2,e+c/2,f+d/2)},a.makeCentered2=function(b,c){var d=b.x,e=b.y,f=c.x,g=c.y;return new a(d-f/2,e-g/2,d+f/2,e+g/2)},a.prototype.contains=function(a){return a.x>=this.left_&&a.x<=this.right_&&a.y>=this.bottom_&&a.y<=this.top_},a.prototype.equals=function(b){return b===this||b instanceof a&&(b.getLeft()===this.left_&&b.getRight()===this.right_&&b.getBottom()===this.bottom_&&b.getTop()===this.top_)},a.prototype.expand=function(b,c){return c=void 0===c?b:c,new a(this.getLeft()-b,this.getBottom()-c,this.getRight()+b,this.getTop()+b)},a.prototype.getBottom=function(){return this.bottom_},a.prototype.getCenter=function(){return new c["default"](this.getCenterX(),this.getCenterY())},a.prototype.getCenterX=function(){return(this.left_+this.right_)/2},a.prototype.getCenterY=function(){return(this.bottom_+this.top_)/2},a.prototype.getHeight=function(){return this.top_-this.bottom_},a.prototype.getLeft=function(){return this.left_},a.prototype.getRight=function(){return this.right_},a.prototype.getTop=function(){return this.top_},a.prototype.getWidth=function(){return this.right_-this.left_},a.prototype.isEmpty=function(a){return void 0===a&&(a=1e-16),this.getWidth()<a||this.getHeight()<a},a.prototype.maybeVisible=function(a,b){if(this.contains(a)||this.contains(b))return!0;var c=a.x,d=a.y,e=b.x,f=b.y,g=this.left_;return!(c<g&&e<g)&&(g=this.right_,!(c>g&&e>g)&&(g=this.bottom_,!(d<g&&f<g)&&(g=this.top_,!(d>g&&f>g))))},a.prototype.nearEqual=function(a,b){return!d["default"](this.left_,a.getLeft(),b)&&(!d["default"](this.bottom_,a.getBottom(),b)&&(!d["default"](this.right_,a.getRight(),b)&&!d["default"](this.top_,a.getTop(),b)))},a.prototype.scale=function(b,c){c=void 0===c?b:c;var d=this.getCenterX(),e=this.getCenterY(),f=this.getWidth(),g=this.getHeight();return new a(d-b*f/2,e-c*g/2,d+b*f/2,e+c*g/2)},a.prototype.translate=function(b,c){return new a(this.left_+b,this.bottom_+c,this.right_+b,this.top_+c)},a.prototype.union=function(b){return new a(Math.min(this.left_,b.getLeft()),Math.min(this.bottom_,b.getBottom()),Math.max(this.right_,b.getRight()),Math.max(this.top_,b.getTop()))},a.prototype.unionPoint=function(b){return new a(Math.min(this.left_,b.x),Math.min(this.bottom_,b.y),Math.max(this.right_,b.x),Math.max(this.top_,b.y))},a.EMPTY_RECT=new a(0,0,0,0),a}(),a("default",e)}}}),System.register("davinci-newton/checks/isFunction.js",[],function(a,b){"use strict";function c(a){return"function"==typeof a}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/util/veryDifferent.js",[],function(a,b){"use strict";function c(a,b,c,d){if(void 0===c&&(c=1e-14),void 0===d&&(d=1),c<=0)throw new Error("epsilon ("+c+") must be positive.");if(d<=0)throw new Error("magnitude ("+d+") must be positive.");var e=Math.max(Math.abs(a),Math.abs(b)),f=e>d?e:d;return Math.abs(a-b)>f*c}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-newton/view/ScreenRect.js",["../checks/isFunction","../util/veryDifferent"],function(a,b){"use strict";var c,d,e;b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(){function a(a,b,c,d){if(c<0||d<0)throw new Error;this.left_=a,this.top_=b,this.width_=c,this.height_=d}return a.clone=function(b){return new a(b.left_,b.top_,b.width_,b.height_)},a.prototype.equals=function(a){return this.left_===a.left_&&this.top_===a.top_&&this.width_===a.width_&&this.height_===a.height_},a.isDuckType=function(b){return b instanceof a||void 0!==b.getLeft&&void 0!==b.getTop&&void 0!==b.getWidth&&void 0!==b.getHeight&&void 0!==b.isEmpty&&void 0!==b.equals&&void 0!==b.nearEqual},a.prototype.getCenterX=function(){return this.left_+this.width_/2},a.prototype.getCenterY=function(){return this.top_+this.height_/2},a.prototype.getHeight=function(){return this.height_},a.prototype.getLeft=function(){return this.left_},a.prototype.getTop=function(){return this.top_},a.prototype.getWidth=function(){return this.width_},a.prototype.isEmpty=function(a){return void 0===a&&(a=1e-14),this.width_<a||this.height_<a},a.prototype.makeOval=function(a){var b=this.width_/2,d=this.height_/2;if(c["default"](a.ellipse))a.beginPath(),a.moveTo(this.left_+this.width_,this.top_+d),a.ellipse(this.left_+b,this.top_+d,b,d,0,0,2*Math.PI,!1);else{var e=Math.min(b,d);a.beginPath(),a.moveTo(this.left_+this.width_,this.top_),a.arc(this.left_+b,this.top_+d,e,0,2*Math.PI,!1),a.closePath()}},a.prototype.makeRect=function(a){a.rect(this.left_,this.top_,this.width_,this.height_)},a.prototype.nearEqual=function(a,b){return!d["default"](this.left_,a.left_,b)&&(!d["default"](this.top_,a.top_,b)&&(!d["default"](this.width_,a.width_,b)&&!d["default"](this.height_,a.height_,b)))},a.EMPTY_RECT=new a(0,0,0,0),a}(),a("default",e)}}}),System.register("davinci-newton/view/SimView.js",["../util/AbstractSubject","../util/clone","../util/contains","../util/GenericEvent","../util/ParameterBoolean","../util/ParameterNumber","../util/remove","../util/veryDifferent","./AlignH","./AlignV","./CoordMap","./DisplayList","./DoubleRect","./ScreenRect"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a}],execute:function(){q=function(a){function b(c){var d=a.call(this)||this;if(d.panX=.05,d.panY=.05,d.zoom=1.1,d.screenRect_=new p["default"](0,0,800,600),d.horizAlign_=k.AlignH.MIDDLE,d.verticalAlign_=l.AlignV.MIDDLE,d.aspectRatio_=1,d.displayList_=new n["default"],d.scaleTogether_=!0,d.opaqueness=1,d.memorizables_=[],!(c instanceof o["default"])||c.isEmpty())throw new Error("bad simRect: "+c);return d.simRect_=c,d.coordMap_=m["default"].make(d.screenRect_,d.simRect_,d.horizAlign_,d.verticalAlign_,d.aspectRatio_),d.width_=c.getWidth(),d.height_=c.getHeight(),d.centerX_=c.getCenterX(),d.centerY_=c.getCenterY(),d.ratio_=d.height_/d.width_,d.addParameter(new h["default"](d,b.PARAM_NAME_WIDTH,function(){return d.getWidth()},function(a){return d.setWidth(a)})),d.addParameter(new h["default"](d,b.PARAM_NAME_HEIGHT,function(){return d.getHeight()},function(a){return d.setHeight(a)})),d.addParameter(new h["default"](d,b.PARAM_NAME_CENTER_X,function(){return d.getCenterX()},function(a){return d.setCenterX(a)}).setLowerLimit(Number.NEGATIVE_INFINITY)),d.addParameter(new h["default"](d,b.PARAM_NAME_CENTER_Y,function(){return d.getCenterY()},function(a){return d.setCenterY(a)}).setLowerLimit(Number.NEGATIVE_INFINITY)),d.addParameter(new g["default"](d,b.PARAM_NAME_SCALE_TOGETHER,function(){return d.getScaleTogether()},function(a){return d.setScaleTogether(a)})),d.addParameter(new h["default"](d,b.PARAM_NAME_VERTICAL_ALIGN,function(){return d.vAxisAlign},function(a){return d.vAxisAlign=a})),d.addParameter(new h["default"](d,b.PARAM_NAME_HORIZONTAL_ALIGN,function(){return d.hAxisAlign},function(a){return d.hAxisAlign=a})),d.addParameter(new h["default"](d,b.PARAM_NAME_ASPECT_RATIO,function(){return d.getAspectRatio()},function(a){return d.setAspectRatio(a)})),d}return r(b,a),b.prototype.addMemo=function(a){e["default"](this.memorizables_,a)||this.memorizables_.push(a)},b.prototype.gainFocus=function(){},b.prototype.getAspectRatio=function(){return this.aspectRatio_},b.prototype.getCenterX=function(){return this.centerX_},b.prototype.getCenterY=function(){return this.centerY_},b.prototype.getCoordMap=function(){return this.coordMap_},b.prototype.getDisplayList=function(){return this.displayList_},b.prototype.getHeight=function(){return this.height_},Object.defineProperty(b.prototype,"hAxisAlign",{get:function(){return this.horizAlign_},set:function(a){this.horizAlign_=a,this.realign(),this.broadcastParameter(b.PARAM_NAME_HORIZONTAL_ALIGN)},enumerable:!1,configurable:!0}),b.prototype.getMemos=function(){return d["default"](this.memorizables_)},b.prototype.getScaleTogether=function(){return this.scaleTogether_},b.prototype.getScreenRect=function(){return this.screenRect_},b.prototype.getSimRect=function(){return this.simRect_},Object.defineProperty(b.prototype,"vAxisAlign",{get:function(){return this.verticalAlign_},set:function(a){this.verticalAlign_=a,this.realign(),this.broadcastParameter(b.PARAM_NAME_VERTICAL_ALIGN)},enumerable:!1,configurable:!0}),b.prototype.getWidth=function(){return this.width_},b.prototype.loseFocus=function(){},b.prototype.paint=function(a){a.save(),a.globalAlpha=this.opaqueness,this.displayList_.draw(a,this.coordMap_),a.restore()},b.prototype.setCoordMap=function(a){if(!m["default"].isDuckType(a))throw new Error("not a CoordMap: "+a);this.coordMap_=a,this.broadcast(new f["default"](this,b.COORD_MAP_CHANGED))},b.prototype.setScreenRect=function(a){if(!p["default"].isDuckType(a))throw new Error("not a ScreenRect: "+a);if(a.isEmpty())throw new Error("empty screenrect");this.screenRect_.equals(a)||(this.screenRect_=a,this.realign(),this.broadcast(new f["default"](this,b.SCREEN_RECT_CHANGED)))},b.prototype.setSimRect=function(a){if(!o["default"].isDuckType(a))throw new Error("not a DoubleRect: "+a);a.equals(this.simRect_)||(this.simRect_=a,this.realign(),this.broadcastParameter(b.PARAM_NAME_WIDTH),this.broadcastParameter(b.PARAM_NAME_HEIGHT),this.broadcastParameter(b.PARAM_NAME_CENTER_X),this.broadcastParameter(b.PARAM_NAME_CENTER_Y),this.broadcast(new f["default"](this,b.SIM_RECT_CHANGED)))},b.prototype.memorize=function(){for(var a=0,b=this.memorizables_.length;a<b;a++)this.memorizables_[a].memorize()},b.prototype.realign=function(){this.setCoordMap(m["default"].make(this.screenRect_,this.simRect_,this.horizAlign_,this.verticalAlign_,this.aspectRatio_)),this.width_=this.simRect_.getWidth(),this.height_=this.simRect_.getHeight(),this.centerX_=this.simRect_.getCenterX(),this.centerY_=this.simRect_.getCenterY(),this.ratio_=this.height_/this.width_},b.prototype.modifySimRect=function(){var a=this.centerX_-this.width_/2,b=this.centerY_-this.height_/2,c=new o["default"](a,b,a+this.width_,b+this.height_);this.setSimRect(c)},b.prototype.panDown=function(){this.setCenterY(this.centerY_-this.panY*this.height_)},b.prototype.panLeft=function(){this.setCenterX(this.centerX_-this.panX*this.width_)},b.prototype.panRight=function(){this.setCenterX(this.centerX_+this.panX*this.width_)},b.prototype.panUp=function(){this.setCenterY(this.centerY_+this.panY*this.height_)},b.prototype.removeMemo=function(a){i["default"](this.memorizables_,a)},b.prototype.setAspectRatio=function(a){j["default"](this.aspectRatio_,a)&&(this.aspectRatio_=a,this.realign(),this.broadcastParameter(b.PARAM_NAME_ASPECT_RATIO))},b.prototype.setCenterX=function(a){j["default"](this.centerX_,a)&&(this.centerX_=a,this.modifySimRect())},b.prototype.setCenterY=function(a){j["default"](this.centerY_,a)&&(this.centerY_=a,this.modifySimRect())},b.prototype.setHeight=function(a){j["default"](this.height_,a)&&(this.height_=a,this.scaleTogether_&&(this.width_=this.height_/this.ratio_),this.modifySimRect())},b.prototype.setScaleTogether=function(a){this.scaleTogether_!==a&&(this.scaleTogether_=a,this.scaleTogether_&&(this.ratio_=this.height_/this.width_),this.broadcastParameter(b.PARAM_NAME_SCALE_TOGETHER))},b.prototype.setWidth=function(a){j["default"](this.width_,a)&&(this.width_=a,this.scaleTogether_&&(this.height_=this.width_*this.ratio_),this.modifySimRect())},b.prototype.zoomIn=function(){this.setHeight(this.height_/this.zoom)},b.prototype.zoomOut=function(){this.setHeight(this.height_*this.zoom)},b.PARAM_NAME_WIDTH="width",b.PARAM_NAME_HEIGHT="height",b.PARAM_NAME_CENTER_X="center-x",b.PARAM_NAME_CENTER_Y="center-y",b.PARAM_NAME_HORIZONTAL_ALIGN="horizontal-align",b.PARAM_NAME_VERTICAL_ALIGN="vertical-align",b.PARAM_NAME_ASPECT_RATIO="aspect-ratio",b.PARAM_NAME_SCALE_TOGETHER="scale X-Y together",b.COORD_MAP_CHANGED="COORD_MAP_CHANGED",b.SCREEN_RECT_CHANGED="SCREEN_RECT_CHANGED",b.SIM_RECT_CHANGED="SIM_RECT_CHANGED",b}(c["default"]),a("SimView",q)}}}),System.register("davinci-newton.js",["./davinci-newton/config","./davinci-newton/core/ConstantForceLaw","./davinci-newton/core/CoulombLaw","./davinci-newton/core/Force","./davinci-newton/core/GravitationLaw","./davinci-newton/core/Particle","./davinci-newton/core/RigidBody","./davinci-newton/core/Spring","./davinci-newton/core/State","./davinci-newton/core/VarsList","./davinci-newton/engine2D/Block2","./davinci-newton/engine2D/ConstantForceLaw2","./davinci-newton/engine2D/Disc2","./davinci-newton/engine2D/Dynamics2","./davinci-newton/engine2D/Euclidean2","./davinci-newton/engine2D/Force2","./davinci-newton/engine2D/GravitationForceLaw2","./davinci-newton/engine2D/Physics2","./davinci-newton/engine2D/Spring2","./davinci-newton/engine3D/Block3","./davinci-newton/engine3D/ConstantForceLaw3","./davinci-newton/engine3D/Cylinder3","./davinci-newton/engine3D/Dynamics3","./davinci-newton/engine3D/Euclidean3","./davinci-newton/engine3D/Force3","./davinci-newton/engine3D/GravitationForceLaw3","./davinci-newton/engine3D/Physics3","./davinci-newton/engine3D/Sphere3","./davinci-newton/engine3D/Spring3","./davinci-newton/graph/AxisChoice","./davinci-newton/graph/DisplayGraph","./davinci-newton/graph/EnergyTimeGraph","./davinci-newton/graph/Graph","./davinci-newton/graph/GraphLine","./davinci-newton/math/Dimensions","./davinci-newton/math/Geometric2","./davinci-newton/math/Geometric3","./davinci-newton/math/Matrix3","./davinci-newton/math/QQ","./davinci-newton/math/Unit","./davinci-newton/math/Vec3","./davinci-newton/model/CoordType","./davinci-newton/solvers/AdaptiveStepSolver","./davinci-newton/solvers/ConstantEnergySolver","./davinci-newton/solvers/EulerMethod","./davinci-newton/solvers/ModifiedEuler","./davinci-newton/solvers/RungeKutta","./davinci-newton/strategy/DefaultAdvanceStrategy","./davinci-newton/util/CircularList","./davinci-newton/view/AlignH","./davinci-newton/view/AlignV","./davinci-newton/view/DrawingMode","./davinci-newton/view/LabCanvas","./davinci-newton/view/SimView"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a},function(a){t=a},function(a){u=a},function(a){v=a},function(a){w=a},function(a){x=a},function(a){y=a},function(a){z=a},function(a){A=a},function(a){B=a},function(a){C=a},function(a){D=a},function(a){E=a},function(a){F=a},function(a){G=a},function(a){H=a},function(a){I=a},function(a){J=a},function(a){K=a},function(a){L=a},function(a){M=a},function(a){N=a},function(a){O=a},function(a){P=a},function(a){Q=a},function(a){R=a},function(a){S=a},function(a){T=a},function(a){U=a},function(a){V=a},function(a){W=a},function(a){X=a},function(a){Y=a},function(a){Z=a},function(a){$=a},function(a){_=a},function(a){aa=a},function(a){ba=a}],execute:function(){ca={get LAST_MODIFIED(){return c.config.LAST_MODIFIED},get VERSION(){return c.config.VERSION},get AdaptiveStepSolver(){return S.AdaptiveStepSolver},get AlignH(){return Z.AlignH},get AlignV(){return $.AlignV},get AxisChoice(){return F.AxisChoice},get Block2(){return m.Block2},get Block3(){return v.Block3},get CircularList(){return Y.CircularList},get ConstantEnergySolver(){return T.ConstantEnergySolver},get ConstantForceLaw(){return d.ConstantForceLaw},get ConstantForceLaw2(){return n.ConstantForceLaw2},get ConstantForceLaw3(){return w.ConstantForceLaw3},get LOCAL(){return R.LOCAL},get WORLD(){return R.WORLD},get CoulombLaw(){return e.CoulombLaw},get Disc2(){return o.Disc2},get Cylinder3(){return x.Cylinder3},get DefaultAdvanceStrategy(){return X.DefaultAdvanceStrategy},get Dimensions(){return K.Dimensions},get DisplayGraph(){return G.DisplayGraph},get DrawingMode(){return _.DrawingMode},get Dynamic2(){return p.Dynamics2},get Dynamic3(){return y.Dynamics3},get EnergyTimeGraph(){return H.EnergyTimeGraph},get EulerMethod(){return U.EulerMethod},get Euclidean2(){return q.Euclidean2},get Euclidean3(){return z.Euclidean3},get Force(){return f.Force},get Force2(){return r.Force2},get Force3(){return A.Force3},get Geometric2(){return L.Geometric2},get Geometric3(){return M.Geometric3},get Graph(){return I.Graph},get GraphLine(){return J.GraphLine},get GravitationLaw(){return g.GravitationLaw},get GravitationForceLaw2(){return s.GravitationForceLaw2},get GravitationForceLaw3(){return B.GravitationForceLaw3},get LabCanvas(){return aa.LabCanvas},get Matrix3(){return N.Matrix3},get ModifiedEuler(){return V.ModifiedEuler},get QQ(){return O.QQ},get Particle(){return h.Particle},get Physics2(){return t.Physics2},get Physics3(){return C.Physics3},get State(){return k.State},get RigidBody(){return i.RigidBody},get RungeKutta(){return W.RungeKutta},get SimView(){return ba.SimView},get Sphere3(){return D.Sphere3},get Spring(){return j.Spring},get Spring2(){return u.Spring2},get Spring3(){return E.Spring3},get setExecutionMode(){return K.setExecutionMode},get Unit(){return P.Unit},get VarsList(){return l.VarsList},get Vec3(){return Q.Vec3}},a("default",ca)}}});